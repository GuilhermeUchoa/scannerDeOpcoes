<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Login | Op&#xE7;&#xF5;es.Net.Br</title><link rel="manifest" href="/site.webmanifest"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#1d1d1d"><link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous"><link rel="stylesheet" href="/css/common-bundle.css?v=JdcJEjREHJkJafRgBLo0hK_top0"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-130714908-1"></script><script>function paramIsNotUtm(param){return param.slice(0,4)!=='utm_';}
window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());var OPCOESNETBR_GA_ID='UA-130714908-1';gtag('config',OPCOESNETBR_GA_ID,{'send_page_view':false});gtag('event','page_view',{'event_callback':function(){if(history&&history.replaceState&&location.search){var params=location.search.slice(1).split('&');var newParams=params.filter(paramIsNotUtm);if(newParams.length<params.length){var search=newParams.length?'?'+newParams.join('&'):'';var url=location.pathname+search+location.hash;history.replaceState(null,null,url);}}}});</script><script>var __displayUrl__='https://opcoes.net.br/login?ReturnUrl=%2Flistaopcoes%2Ftodas%3FidAcao%3DPETR4%26dataReferencia%3D2025-12-26';</script><meta property="og:title" content="Opções.Net.Br"><meta property="og:url" content="https://opcoes.net.br"><meta property="og:site_name" content="Opções.net.br"><meta property="og:image" content="https://opcoes.net.br/images/preview.opcoes.net.br.png"><meta property="og:locale" content="pt_BR"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Opções.Net.Br"><meta name="twitter:url" content="https://opcoes.net.br"><meta name="twitter:image" content="https://opcoes.net.br/images/preview.opcoes.net.br.png"></head><body><div class="page-wrapper default-theme sidebar-bg bg1 toggled"><nav id="sidebar" class="sidebar-wrapper"><div class="sidebar-content"><div class="sidebar-item sidebar-brand"><a id="link-home" class="menu-item-enabled">OP&Ccedil;&Otilde;ES.NET.BR</a></div><div class="sidebar-item sidebar-menu"><ul><li class="header-menu"><span>Novidades</span></li><li class="sidebar-dropdown"><a href="#" class="menu-item-enabled"> <i class="fas fa-book" title="Artigos"></i> <span class="menu-item-enabled menu-text">Artigos</span> </a><div class="sidebar-submenu"><ul><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, { name: 'article', params: { title: 'Histórico de beta', url: '/artigos/historico-de-beta' } })">Histórico de beta</a></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, { name: 'article', params: { title: 'Histórico de correlação', url: '/artigos/historico-de-correlacao' } })">Histórico de correlação</a></li></ul></div></li><li class="header-menu"><span>Acompanhamento</span></li><li><a href="#" data-bind="class: userStore.loadingStatus.portfolios() === 'loaded' ? 'menu-item-enabled' : 'menu-item-disabled', click: userStore.loadingStatus.portfolios() === 'loaded' ? setRoot.bind($root, 'portfolios-ui-root') : function() {}, title: userStore.loadingStatus.portfolios() === 'loading' ? '' : 'Carregando...'"> <i class="fas fa-wallet" title="Carteiras"></i> <span class="menu-text">Carteiras</span> <img class="menu-item-loading-img" data-bind="visible: userStore.loadingStatus.portfolios() === 'loading' " src="/images/loader.gif"> </a></li><li class="sidebar-dropdown"><a href="#" data-bind="class: userStore.loadingStatus.strategies() === 'loaded' ? 'menu-item-enabled' : 'menu-item-disabled', click: userStore.loadingStatus.strategies() === 'loaded' ? setRoot.bind($root, 'strategies-ui-root') : function() {}, title: userStore.loadingStatus.strategies() ? '' : 'Carregando...'"> <i class="fas fa-lightbulb" title="Estratégias"></i> <span class="menu-text">Estratégias</span> <img class="menu-item-loading-img" data-bind="visible: userStore.loadingStatus.strategies() === 'loading' " src="/images/loader.gif"> </a><div class="sidebar-submenu" data-bind="if: userStore.loadingStatus.strategies() === 'loaded'"><ul><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, { name: 'strategies-ui-root', params: 'strategies-open-ui-root' })">Executadas - em aberto</a></li><li><a href="#" class="menu-item-enabled" data-bind="visible: userStore.strategiesGroups.executed_where_any_position_has_pnl_realized.groupStrategies().length, click: setRoot.bind($root, { name: 'strategies-ui-root', params: 'strategies-where-any-position-has-pnl-realized-ui-root' })">Executadas - encerradas</a></li><li><a href="#" class="menu-item-enabled" data-bind="visible: userStore.strategiesGroups.not_executed_expired.groupStrategies().length, click: setRoot.bind($root, { name: 'strategies-ui-root', params: 'strategies-not-executed-expired' })">Não executadas - expiradas</a></li><li><a href="#" class="menu-item-enabled" data-bind="visible: userStore.strategiesGroups.not_executed_not_expired.groupStrategies().length, click: setRoot.bind($root, { name: 'strategies-ui-root', params: 'strategies-not-executed-not-expired' })">Não executadas - não expiradas</a></li></ul></div></li><li><a href="#" data-bind="class: userStore.loadingStatus.portfolios() === 'loaded' &amp;&amp; userStore.loadingStatus.strategies() === 'loaded' ? 'menu-item-enabled' : 'menu-item-disabled', click: userStore.loadingStatus.portfolios() &amp;&amp; userStore.loadingStatus.strategies() === 'loaded' ? setRoot.bind($root, 'consolidated-position') : function() {}, title: userStore.loadingStatus.portfolios() &amp;&amp; userStore.loadingStatus.strategies() ? '' : 'Carregando...'"> <i class="fas fa-dollar-sign" title="Posição consolidada"></i> <span class="menu-text">Posição consolidada</span> <img class="menu-item-loading-img" data-bind="visible: userStore.loadingStatus.portfolios() === 'loading' || userStore.loadingStatus.strategies() === 'loading'" src="/images/loader.gif"> </a></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, 'faq-acomp-ui-root')"> <i class="fas fa-book" title="Tutorial / FAQ"></i> <span class="menu-text">Tutorial / FAQ</span> </a></li><li class="header-menu"><span>Acesso</span></li><li><a class="menu-item-enabled" href="https://opcoes.net.br/planos" target="_blank"> <i class="fas fa-pen" title="Assinatura / contratação"></i> <span class="menu-text">Assinatura / contratação</span> </a></li><li><a class="menu-item-enabled" href="/Account/Register" target="_blank"> <i class="fas fa-user-check" title="Cadastro gratuito"></i> <span class="menu-text">Cadastro gratuito</span> </a></li><li><a class="menu-item-enabled" href="#" data-bind="click: setRoot.bind($root,{ name: 'url-content', params: { url: '/login' } })"> <i class="fas fa-sign-in-alt" title="Login"></i> <span class="menu-text">Login</span> </a></li><li><a class="menu-item-enabled" href="#" onclick="window.open('/Account/ForgotPassword','pwdRecoveryWnd','popup=1,left='+(Math.floor(window.innerWidth/2)-430)+',top='+(Math.floor(window.innerHeight/2)-320)+',width=860,height=640')"> <i class="fas fa-key" title="Recuperar senha"></i> <span class="menu-text">Recuperar senha</span> </a></li><li class="header-menu"><span>Estratégia Venda Coberta</span></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, 'venda-coberta-ui-root')"> <i class="fas fa-chart-area" title="Comparativo de taxas"></i> <span class="menu-text">Comparativo de taxas</span> </a></li><li class="header-menu"><span>Mercado</span></li><li id="menu-mercado-sem-submenus"><a href="#" data-bind="class: userStore.loadingStatus.highsLows() === 'loaded' ? 'menu-item-enabled' : 'menu-item-disabled', click: userStore.loadingStatus.highsLows() === 'loaded' ? setRoot.bind($root, 'market-main-dashboard') : function() {}, title: userStore.loadingStatus.highsLows() ? '' : 'Carregando...'"> <i class="fas fa-table" title="Altas e baixas"></i> <span class="menu-text">Altas e baixas</span> <span class="badge badge-pill" data-prop="c" data-ticker="IBOV" data-class-negative="badge-danger" data-class-positive="badge-success"></span> </a></li><li id="menu-mercado-com-submenus" class="sidebar-dropdown"><a href="#" data-bind="class: userStore.loadingStatus.highsLows() === 'loaded' ? 'menu-item-enabled' : 'menu-item-disabled', click: userStore.loadingStatus.highsLows() === 'loaded' ? setRoot.bind($root, 'market-main-dashboard') : function() {}, title: userStore.loadingStatus.highsLows() ? '' : 'Carregando...'"> <i class="fas fa-table" title="Altas e baixas"></i> <span class="menu-text">Altas e baixas</span> <span class="badge badge-pill" data-prop="c" data-ticker="IBOV" data-class-negative="badge-danger" data-class-positive="badge-success"></span> </a><div class="sidebar-submenu"><ul><li><a data-bind="class: userStore.loadingStatus.highsLows() === 'loaded' ? 'menu-item-enabled' : 'menu-item-disabled', click: userStore.loadingStatus.highsLows() === 'loaded' ? setRoot.bind($root, 'market-main-dashboard') : function() {}, title: userStore.loadingStatus.highsLows() ? '' : 'Carregando...'" data-uipart="highsLowsAndVolumes" href="#highsLowsAndVolumes">BDRs, ETFs, FIIs, IBOV</a></li><li><a data-bind="class: userStore.loadingStatus.highsLows() === 'loaded' ? 'menu-item-enabled' : 'menu-item-disabled', click: userStore.loadingStatus.highsLows() === 'loaded' ? setRoot.bind($root, 'market-main-dashboard') : function() {}, title: userStore.loadingStatus.highsLows() ? '' : 'Carregando...'" data-uipart="optionsAndVols" href="#optionsAndVols">Opções e volatilidade</a></li></ul></div></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, 'open-interest-ui-root')"> <i class="fas fa-book-open" title="Posições em aberto"></i> <span class="menu-text">Posições em aberto</span> </a></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, 'put-call-ratio-history-page')"> <i class="fas fa-signal" title="Put / call ratio"></i> <span class="menu-text">Put / call ratio</span> </a></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, 'trade-volume-history-charts')"> <i class="fa fa-chart-bar" title="Volume histórico"></i> <span class="menu-text">Volume histórico</span> </a></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, 'asset-page-ui-root')"> <i class="fa fa-chart-bar" title="Volume opções"></i> <span class="menu-text">Volume opções</span> </a></li><li class="header-menu"><span>Versão anterior</span></li><li><a href="/v1" target="_blank" class="menu-item-enabled"> <i class="fa fa-flag"></i> <span class="menu-item-enabled menu-text">Capa</span> </a></li><li><a href="/acoes" target="_blank" class="menu-item-enabled"> <i class="fa fa-table"></i> <span class="menu-item-enabled menu-text">Ações e volatilidades</span> </a></li><li class="sidebar-dropdown"><a href="#" class="menu-item-enabled"> <i class="fa fa-list"></i> <span class="menu-item-enabled menu-text">Opções</span> </a><div class="sidebar-submenu"><ul><li><a class="menu-item-enabled" target="_blank" href="/opcoes/bovespa">Grade</a></li><li><a class="menu-item-enabled" target="_blank" href="/matriz-opcoes-strike-x-vencimento">Matriz</a></li><li><a class="menu-item-enabled" target="_blank" href="/opcoes/pozinhos">Pozinhos</a></li><li><a class="menu-item-enabled" target="_blank" href="/opcoes/skew-curva-de-volatilidade-implicita">Skew, negócios e volume</a></li><li><a class="menu-item-enabled" target="_blank" href="/opcoes/bovespa/vencimentos-longos">Vencimentos longos</a></li><li><a class="menu-item-enabled" target="_blank" href="/opcoes/venda-coberta">Venda coberta - ranking</a></li><li><a class="menu-item-enabled" target="_blank" href="/historico/volatilidade-implicita">Vol. implícita - Histórico</a></li><li><a class="menu-item-enabled" target="_blank" href="/visao-3d/volatilidade-implicita/PETR4">Vol. implícita - Visão 3D</a></li></ul></div></li><li><a class="menu-item-enabled" target="_blank" href="/opcoes/estrategias"> <i class="fas fa-chart-line" title="Simulador"></i> <span class="menu-item-enabled menu-text">Simulador</span> </a></li><li class="header-menu"><span>Sobre o Opções.Net.Br</span></li><li class="sidebar-dropdown"><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, { name: 'url-content', params: { url: '/contato-suporte' } })"> <i class="fas fa-at" title="Contatos e Termos de Uso"></i> <span class="menu-item-enabled menu-text">Contatos e Termos</span> </a><div class="sidebar-submenu"><ul><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, { name: 'url-content', params: { url: '/contato-suporte' } })">Contato e suporte</a></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, { name: 'url-content', params: { url: '/politica-de-privacidade' } })">Política de privacidade</a></li><li><a href="#" class="menu-item-enabled" data-bind="click: setRoot.bind($root, { name: 'url-content', params: { url: '/termos-de-uso' } })">Termos de uso</a></li></ul></div></li></ul></div></div></nav><script src="https://www.gstatic.com/charts/loader.js"></script><script src="/js/common-bundle-before.js?v=P6QuZrT6-AhghPlNzbDp9GWpoHI"></script><script src="/js/sidebar-bundle.js?v=6_WtbVXhyJWRp9XabbqKL7c9VYY"></script><script>localforage.config({name:'opcoesnetbr'});</script><main class="page-content pt-2"><div id="overlay" class="overlay"></div><!--ko if: globalErrorMessage--><div class="yellow" data-bind="html: globalErrorMessage"></div><!--/ko--><div class="full-height" data-bind="rootComponent: rootComponent"><div class="container top-buffer-40"><script>$.get('/login?ctrlsOnly=true&ReturnUrl=/listaopcoes/todas?idAcao=PETR4&dataReferencia=2025-12-26').done(function(html){$('div.container').append(html);}).fail(function(){$('div.container').append('<a href="/login">Fazer login</a>');});</script></div></div><script type="text/html" id="empty-template"></script><script type="text/html" id="preloaded-html-template"><!--ko template: { nodes: $componentTemplateNodes }--><!--/ko--></script><script type="text/html" id="loading-template"><div class="centeredOverlay"><div class="loading-content align-center" data-bind="html: html"></div></div></script><script type="text/html" id="default-sortable-table-head-template"><tr data-bind="foreach: data_fields"><th data-bind="class: $data.css_class, css: { 'cursor-pointer': $data.sort_prop }, html: $data.name, click: $data.sort_prop ? $parent.sortBy.bind($data, $data.sort_prop) : function() {}"></th></tr></script><script type="text/html" id="sortable-table-template"><table data-bind="class: $data.css_class"><thead data-bind="template: { name: header_template || 'default-sortable-table-head-template', data: $data }"></thead><tbody data-bind="template: { name: body_template, foreach: data_rows }"></tbody><tfoot data-bind="visible: $data.footer_template, template: { name: $data.footer_template, data: $data }"></tfoot></table></script><script type="text/html" id="select-or-span-template"><!--ko if: ko.unwrap(optionsList).length <= 1--> <span style="padding-left: 5px; padding-right: 5px" data-bind="text: ko.unwrap(optionsList)[0].text"></span> <!--/ko--> <!--ko if: ko.unwrap(optionsList).length > 1--> <select data-bind="options: optionsList, optionsText: 'text', value: selectedValue"></select> <!--/ko--></script><script type="text/html" id="intraday-values-history-template"><div class="intraday-values-history-container"><div class="intraday-values-history-ctrls-left"><table class="default-table-styles"><thead><tr><th>Exibir</th><th>da</th><th>Usar escala</th></tr></thead><tbody data-bind="foreach: configurableChartSeries"><tr><td class="nowrap"><label class="lbl-clr-chk"> <input type="checkbox" data-bind="checked: selected"> <span data-bind="class: 'span-chk ' + color.cssClass"></span> <!--ko if: ko.unwrap(propertyOptionsList).length <= 1--> <span style="padding-left: 5px; padding-right: 5px" data-bind="text: ko.unwrap(propertyOptionsList).length &amp;&amp; ko.unwrap(propertyOptionsList)[0].text"></span> <!--/ko--> </label> <!--ko if: ko.unwrap(propertyOptionsList).length > 1--> <select data-bind="options: propertyOptionsList, optionsText: 'text', value: selectedProperty"></select> <!--/ko--></td><td><!--ko template: { name: 'select-or-span-template', data: { optionsList: sourceOptionsList, selectedValue: selectedSource } }--> <!--/ko--></td><td><select data-bind="value: targetAxisIndex"><option value="1">direita</option><option value="0">esquerda</option></select></td></tr></tbody></table></div><div class="intraday-values-history-main"><div class="intraday-values-history-ctrls-top"><div>Escala esquerda <select data-bind="value: leftScaleType"><option value="">linear</option><option value="mirrorLog">logarítmica</option></select></div><div data-bind="text: title"></div><div class="align-right">Escala direita <select data-bind="value: rightScaleType"><option value="">linear</option><option value="mirrorLog">logarítmica</option></select></div></div><div class="intraday-values-history-chart" data-bind="component: { name: 'google-chart', params: $data }"></div></div></div></script><script type="text/html" id="price-and-implied-volatility-intraday-history-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><div class="not-clickable align-center">HISTÓRICO VOLATILIDADE IMPLÍCITA INTRADAY</div></div><div class="height-100-perc-30px pad-20" data-bind="template: { name: 'intraday-values-history-template', data: $data }"></div></div></script><script type="text/html" id="faq-acomp-ui-root-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"><strong>TUTORIAL / FAQ</strong></a> <a class="clickable" data-bind="text: 'Acompanhamento de estratégias', click: component.bind($data, 'tutorial-faq-acompanhamento-estrategias'), style: { 'background-color': component() === 'tutorial-faq-acompanhamento-estrategias' ? '#1d1d1d' : '' }"></a></div><div class="height-100-perc-30px" data-bind="component: component"></div></div></script><script type="text/html" id="tutorial-faq-acompanhamento-estrategias-content"><h3 class="noselect">O que há de novo no acompanhamento de estratégias do Opções.Net.Br? Tour rápido:</h3><div class="container-fluid"><div id="myCarousel" class="carousel slide" data-ride="carousel"><div class="carousel-inner" role="listbox"><div class="item active"><h4 class="align-center">Todas informações relevantes no mesmo lugar: gráficos do ativo, de payoff e de skew</h4><img class="img-responsive" src="/images/novo-acompanhamento/grafico-ativo-payoff-skew.png"></div><div class="item"><h4 class="align-center">Customização completa da tabela de resultados conforme preferência do usuário</h4><img class="img-responsive" src="/images/novo-acompanhamento/customizacao-tabela-resultados.png"></div><div class="item"><h4 class="align-center">Histórico de PnL, gregas, prêmios e volatilidades</h4><img class="img-responsive" src="/images/novo-acompanhamento/historico-pnl-gregas-premios-volatilidades.png"></div><div class="item"><h4 class="align-center">Histórico organizado de todas operações realizadas na estratégia</h4><img class="img-responsive" src="/images/novo-acompanhamento/historico-detalhado-operacoes-realizadas.png"></div><div class="item"><h4 class="align-center">Melhores alternativas de rolagem para algumas estratégias</h4><img class="img-responsive" src="/images/novo-acompanhamento/alternativas-de-rolagem.png"></div></div><a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="sr-only">Próxima</span> </a> <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> <span class="sr-only">Anterior</span> </a></div></div><h3 class="noselect">Como funciona o novo acompanhamento de resultados das estratégias?</h3><div><p>No novo acompanhamento as estratégias são agrupadas por status:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/status-estrategias.png"></p><p>Estratégias salvas no simulador possuem o status de não executadas. Isso pois nem sempre os preços e quantidades executadas coincidem com os preços e quantidades da simulação. Estratégias não executadas são subdivididas nas categorias expiradas ou não expiradas, conforme a situação das opções utilizadas na estratégia.</p><p>Para que a plataforma calcule o lucro / prejuízo correto da posição, esteja ela em aberto ou encerrada, é necessário indicar o preço, quantidade e data da execução. Se o preço e/ou quantidade forem os mesmos da simulação, basta um clique para copiar o valor. Quando a plataforma estiver roteando as ordens isso não será mais necessário. Opcionalmente você pode indicar também o número da nota de negociação. Isso será utilizado futuramente no controle de custos de negociação. Após definir todos valores, aguarde a mensagem de 'Atualização pendente' desaparecer. Os resultados da estratégia poderão então ser acompanhados na seção 'Em aberto'.</p><p><img class="img-responsive" src="/images/novo-acompanhamento/definindo-preco-execucao.gif"></p><p>Caso uma estratégia ou operação tenha sido executada sem antes ter sido simulada, pode ser cadastrada diretamente no item 'Estratégias / Cadastrar'. É possível cadastrar qualquer tipo de estratégia ou posição, incluindo com ativos diversos tais como long and short e carteiras de ativos e opções.</p><p>IMPORTANTE: Por padrão o sistema exibe dois 'slots', ou linhas onde as operações podem ser cadastradas. Caso haja apenas uma operação, exclua a segunda linha. O sistema só irá salvar quando todas as operações estiverem com todos dados necessários preenchidos:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/excluir-linha-sem-operacao.png"></p><p>Uma vez que preço, quantidade e data de execução estejam definidos, a estratégia passará para o status 'Em aberto' até que suas posições sejam encerradas, opções expirem ou sejam exercidas. A seção 'Estratégias em aberto' apresentará o resultado resumido de todas estratégias nesse status, agrupadas por ativo. Para ver o resultado detalhado, gráficos, histórico de PnL e gregas e outras opções, basta selecionar uma estratégia clicando em seu nome ou vencimento:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/resumo-resultados-em-aberto.png"></p><p>No caso de estratégias que são continuamente roladas ou ajustadas, o acompanhamento permite incluir um novo grupo de operações para cada rolagem / ajuste realizado. Desta forma todo o histórico é preservado de forma organizada:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/historico-de-operacoes.png"></p><p>Um grupo de operações é o conjunto de uma ou mais operações realizadas na abertura, ajuste / rolagem ou encerramento da posição. As descrições definidas para cada grupo de operações ajudam a identificar rapidamente seu propósito e racional:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/straddle-Nancy-Pelosi.png"></p><p>Para algumas estratégias a plataforma simplifica imensamente a rolagem da posição. No caso de venda de call ou put, o item 'Rolagem' traz uma lista de opções considerando o strike da posição vendida e também o preço atual do ativo. É possível simular o aumento ou redução das posições vendidas nos diferentes strikes sugeridos para rolagem. O notional é indicado para cada uma das alternativas de rolagem:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/rolagem.png"></p><p>Após o encerramento das posições ou expiração das opções da estratégia, ela passará ao status 'Encerrada'. E na seção 'Estratégias Encerradas' é possível acompanhar os resultados agrupados por mês e ano:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/resultados-por-mes-ano.png"></p><p>E aí, o que você achou do novo acompanhamento? Vai ajudar no seu operacional? Ficou com alguma dúvida? Entre em contato com nossa equipe através do sac@opcoes.net.br</p><p data-bind="text: userSpecificMessage"></p><p>Essa é a primeira funcionalidade liberada da nova versão da plataforma. As demais funcionalidades como a nova simulação e algumas outras novidades exigem vídeos explicativos que estão sendo desenvolvidos.</p></div><h3 class="noselect">Como registrar que uma posição foi encerrada, rolada ou ajustada?</h3><div><p>Para indicar que a estratégia foi encerrada ou ajustada você deve cadastrar a(s) operação(ões) realizadas:</p><p>1) Mude para a visão do histórico de operações:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/encerrar-posicao-1.png"></p><p>2) Inclua um novo grupo de operações clicando no [+] indicado na foto abaixo e forneça uma descrição:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/encerrar-posicao-2.png"></p><p>3) Informe as operações realizadas:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/encerrar-posicao-3.png"></p><p>Nesse exemplo descrevemos o novo grupo como 'Zeragem'.</p></div><h3 class="noselect">Como a plataforma calcula o lucro ou prejuízo da operação?</h3><div><p>Para calcular o lucro ou prejuízo de uma estratégia a plataforma considera o valor para fechar todas as posições abertas a mercado, ou seja, o pior caso para zeragem. Portanto, normalmente os lucros podem ser realizados acima do indicado, e os prejuízos abaixo. No caso de opções com pouca liquidez vale a mesma coisa, sendo que nesses casos o spread tende a ser bem maior. É difícil estimar o lucro / prejuízo real nessas situações, sendo recomendável utilizar uma oferta bem favorável e ir modificando gradativamente até se fechar o(s) negócio(s).</p></div><h3 class="noselect">Como os resultados são estimados quando o mercado está fechado?</h3><div><p>Para mitigar o erro que opções pouco negociadas ocasionariam no cálculo do resultado, a plataforma utiliza como referência os valores do book poucos instantes antes do mercado entrar no leilão de fechamento. Desta forma todos valores estão alinhados, ainda que divergentes dos valores do último negócio. Por exemplo, pode ser que o último negócio de uma opção tenha ocorrido às 13h21min e entre esse instante e o fechamento do pregão o ativo objeto pode ter variado significativamente. Desta forma, usar os preços de último negócio dos ativos da estratégia implicaria num valor fora da realidade. Usar uma "fotografia" do book a poucos instantes do encerramento do pregão gera um valor muito mais realista.</p></div><h3 class="noselect">O gráfico de payoff considera o lucro já realizado na estratégia?</h3><div><p>Atualmente o gráfico de payoff não reflete o lucro já realizado em operações fechadas propositalmente. O objetivo é que o usuário se concentre no resultado da posição que está aberta. Futuramente pretendemos incluir um check dando a alternativa de considerar o lucro / prejuízo já realizado no gráfico.</p></div><h3 class="noselect">Por que a opção de rolagem não aparece para minha estratégia?</h3><div><p>A opção de rolagem atualmente só está disponível para estratégias de venda de call e put. Caso a estratégia em visualização seja uma dessas, o item aparece. Essa funcionalidade será implementada para outras estratégias também.</p><p><img class="img-responsive" src="/images/novo-acompanhamento/checkbox-rolagem.png"></p></div><h3 class="noselect">Como registrar o exercício de opções?</h3><div><p>O novo acompanhamento de estrat&#xE9;gias do Op&#xE7;&#xF5;es.Net.Br permite o registro do exerc&#xED;cio de op&#xE7;&#xE3;o de forma muito similar &#xE0; que vemos na nota de negocia&#xE7;&#xE3;o da corretora.</p><p>Como pode ver na imagem abaixo, &#xE9; necess&#xE1;rio indicar a compra ou venda do instrumento que representa o exerc&#xED;cio da op&#xE7;&#xE3;o, assim como na nota:</p><p><img class="img-responsive" src="/images/novo-acompanhamento/exercicio-opcoes-2.png" border="0" alt="Registrando exercício de opções"></p><p>No exemplo hipot&#xE9;tico acima, o investidor foi exercido numa op&#xE7;&#xE3;o de compra que havia vendido. Como resultado, foi obrigado a vender o ativo pelo pre&#xE7;o do strike.</p><p>O registro &#xE9; feito incluindo um novo grupo de opera&#xE7;&#xF5;es e cadastrando nele a opera&#xE7;&#xE3;o do exerc&#xED;cio, nesse caso a venda do instrumento cujo c&#xF3;digo &#xE9; o mesmo da op&#xE7;&#xE3;o, acrescido da letra &#x27;E&#x27; ao final. Exatamente como na nota de negocia&#xE7;&#xE3;o.</p><p>Perceba que quando um novo grupo de opera&#xE7;&#xF5;es &#xE9; criado, por padr&#xE3;o s&#xE3;o geradas duas linhas para registro de opera&#xE7;&#xF5;es. Como s&#xF3; h&#xE1; uma opera&#xE7;&#xE3;o a ser registrada, exclua a outra linha como indicado.</p></div></script><script type="text/html" id="default_custom_template"><header class="section-header"><a class="close" data-bind="click: function() { $data.visible(false); }">x</a><p data-bind="html: title"></p></header><div class="section-content" data-bind="html: html"></div></script><script type="text/html" id="default_template"><div class="var-col" data-bind="foreach: $data"><div class="var-ativo" data-bind="click: $parents[1].selected_augmented_asset, style: { 'font-size': $parents[1].selected_view_mode().id === 'by_volume' ? changeBarsVolumeFontSize : '' } "><div class="variacao" data-bind="class: leftBarClassName, style: { 'background-size': leftBarBgSizeStr } "><span data-bind="text: leftPercentChangeStr"></span></div><div class="cod-ativo" data-bind="text: asset.t"></div><div class="variacao" data-bind="class: rightBarClassName, style: { 'background-size': rightBarBgSizeStr } "><span data-bind="text: rightPercentChangeStr"></span></div></div></div></script><script type="text/html" id="by_sector_template"><div class="var-col" data-bind="foreach: $data"><div class="segmento" data-bind="text: sector"></div><!--ko foreach: stocks--><div class="var-ativo" data-bind="click: $parents[2].selected_augmented_asset"><div class="variacao" data-bind="class: leftBarClassName, style: { 'background-size': leftBarBgSizeStr } "><span data-bind="text: leftPercentChangeStr"></span></div><div class="cod-ativo" data-bind="text: asset.t"></div><div class="variacao" data-bind="class: rightBarClassName, style: { 'background-size': rightBarBgSizeStr } "><span data-bind="text: rightPercentChangeStr"></span></div></div><!--/ko--></div></script><script type="text/html" id="assets-changes-and-volumes-bars-template"><section id="mercado-variacao-e-volume"><header id="header-variacao-e-volume"><div id="header-variacao-content"><div><p><select data-bind="options: all_assets_kinds, optionsText: 'description', value: selected_asset_kind"></select></p></div><div><p><select data-bind="options: all_periods, optionsText: 'capitalized', value: ui_period"></select></p></div><!--ko foreach: all_view_modes--><div class="clickable-option" data-bind="click: $parent.setHighsLowsOrder, css: { selected: $data === $parent.selected_view_mode() }"><p data-bind="text: description"></p><div class="bottom-div"></div></div><!--/ko--></div></header><div class="info-message" style="display: none" data-bind="visible: message"><span data-bind="html: message"></span><a class="close" data-bind="click: clearMessage">x</a></div><div id="mercado-variacao"><div id="mercado-variacao-colunas" data-bind="css: { options: selected_asset_kind().id === 'options' }, class: selected_view_mode().id, template: { name: columnsTemplate, foreach: columns } "></div></div><section id="detalhes-ativo" data-bind="visible: selected_augmented_asset"><header class="section-header"><a class="close" data-bind="click: function() { $data.selected_augmented_asset(null); }">x</a><p data-bind="with: selected_augmented_asset"><strong> <span data-bind="text: asset.t"></span> <span data-bind="visible: asset.p">Últ:</span> <span data-bind="brFormattedDecimal: asset.p, style: { color: ko.unwrap(asset.c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(asset.c) >= 0.0001 ? '#7ECC7E' : '' }"></span> <span data-bind="brFormattedPercentage: { value: asset.c, appendPercentSymbol: true, appendPositiveSign: true, maxDecimalPlaces: 2 }, style: { color: ko.unwrap(asset.c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(asset.c) >= 0.0001 ? '#7ECC7E' : '' }"></span> <span data-bind="text: asset.h"></span> <span data-bind="visible: asset.mi">Mín:</span> <span data-bind="visible: asset.mi, brFormattedDecimal: asset.mi"></span> <span data-bind="visible: asset.ma">Max:</span> <span data-bind="visible: asset.ma, brFormattedDecimal: asset.ma"></span> <span data-bind="visible: asset.n">Negócios:</span> <span data-bind="visible: asset.n, brFormattedInteger: asset.n"></span> <span data-bind="visible: asset.f">Vol. financeiro: </span> <span data-bind="visible: asset.f, brFormattedDecimal: asset.f"></span> </strong></p></header><div class="section-content"><div class="asset-description" data-bind="css: { 'is-available': selected_asset_description }, html: selected_asset_description"></div><div class="asset-chart" data-bind="css: { 'description-is-available': selected_asset_description }"></div></div></section></section></script><script type="text/html" id="asset-volatilities-history-and-metrics-charts-template"><div><header class="header-opcoes"><div>Volatilidade histórica, implícita, IV rank e percentil de <select data-bind="options: all_underlyings, optionsCaption: '', value: selected_underlying"></select></div></header><div class="flex-vertical"><div class="flex-grow vols-history-chart" data-bind="component: { name: 'asset-volatilities-history-chart', params: $data }"></div><div class="impl-vol-metrics-charts" data-bind="component: { name: 'asset-implied-volatility-metrics-charts', params: $data }"></div></div></div></script><script type="text/html" id="market-main-dashboard-template"><div id="mercado"><section id="left-area" data-bind="visible: highsLowsAndVolumesVisible"><div style="width: 100%" data-bind="component: { name: 'assets-changes-and-volumes-bars', params: $data }"></div></section><section id="right-area" data-bind="visible: optionsAndVolsVisible"><div id="rankings-opcoes" data-bind="component: { name: 'options-rankings', params: $data }"></div><div id="mercado-volatilidade" data-bind="component: { name: 'asset-volatilities-history-and-metrics-charts', params: $data }"></div></section></div></script><script type="text/html" id="open-interest-table-body-template"><tr><td data-bind="text: underlying" class="align-left"></td><td data-bind="text: ticker" class="align-left"></td><td data-bind="text: expiration_date" class="align-center"></td><td data-bind="text: dc"></td><td data-bind="brFormattedDecimal: strike"></td><td data-bind="brFormattedInteger: covered"></td><td data-bind="brFormattedInteger: blocked"></td><td data-bind="brFormattedInteger: uncovered"></td><td data-bind="brFormattedDecimal: notional_uncovered"></td><td data-bind="brFormattedInteger: buyers"></td><td data-bind="brFormattedInteger: sellers"></td><td data-bind="brFormattedDecimal: { value: iq, maxDecimalPlaces: 1 }"></td></tr></script><script type="text/html" id="open-interest-table-template"><div data-bind="component: { name: 'sortable-table', params: sortableTableParams }"></div></script><script type="text/html" id="open-interest-distortions-by-iq-template"><div data-bind="component: { name: 'open-interest-table', params: { descending: true, sort_expression: 'iq', limit: 200 } }"></div></script><script type="text/html" id="open-interest-distortions-by-uncovered-notional-template"><div data-bind="component: { name: 'open-interest-table', params: { descending: true, sort_expression: 'notional_uncovered', limit: 200 } }"></div></script><script type="text/html" id="open-interest-distortions-by-uncovered-contracts-template"><div data-bind="component: { name: 'open-interest-table', params: { descending: true, sort_expression: 'uncovered', limit: 200 } }"></div></script><script type="text/html" id="open-interest-ui-root-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"><strong>POSIÇÔES EM ABERTO</strong></a> <a class="clickable" data-bind="text: 'Maiores descobertas por notional', click: setViewComponent.bind($data, 'open-interest-distortions-by-uncovered-notional'), style: { 'background-color': component() === 'open-interest-distortions-by-uncovered-notional' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Maiores descobertas por número de contratos', click: setViewComponent.bind($data, 'open-interest-distortions-by-uncovered-contracts'), style: { 'background-color': component() === 'open-interest-distortions-by-uncovered-contracts' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Maiores IQs', click: setViewComponent.bind($data, 'open-interest-distortions-by-iq'), style: { 'background-color': component() === 'open-interest-distortions-by-iq' ? '#1d1d1d' : '' }"></a></div><div class="height-100-perc-30px pad-20" data-bind="component: component"></div></div></script><script type="text/html" id="single_day_full_table_template"><table class="tabela-ativos"><thead><tr><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 't' }, click: function() { $parent.selected_table_mode_sort_prop() === 't' || $parent.selected_table_mode_sort_prop('t'); }">Ativo</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'c' }, click: function() { $parent.selected_table_mode_sort_prop() === 'c' || $parent.selected_table_mode_sort_prop('c'); }">Var (%)</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'n' }, click: function() { $parent.selected_table_mode_sort_prop() === 'n' || $parent.selected_table_mode_sort_prop('n'); }">Negócios</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'f' }, click: function() { $parent.selected_table_mode_sort_prop() === 'f' || $parent.selected_table_mode_sort_prop('f'); }">Vol. Financeiro</th></tr></thead><tbody data-bind="foreach: $data"><tr><td><a data-bind="click: $parent.selected_augmented_asset, text: asset.t"></a></td><td data-bind="brFormattedPercentage: { value: asset.c, appendPositiveSign: true, maxDecimalPlaces: 2 }, style: { color: ko.unwrap(asset.c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(asset.c) >= 0.0001 ? '#7ECC7E' : '' }"></td><td data-bind="brFormattedInteger: asset.n"></td><td data-bind="brFormattedDecimal: asset.f"></td></tr></tbody></table></script><script type="text/html" id="days_range_full_table_template"><table class="tabela-ativos"><thead><tr><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 't' }, click: function() { $parent.selected_table_mode_sort_prop() === 't' || $parent.selected_table_mode_sort_prop('t'); }">Ativo</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'c' }, click: function() { $parent.selected_table_mode_sort_prop() === 'c' || $parent.selected_table_mode_sort_prop('c'); }">Var (%)</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'f' }, click: function() { $parent.selected_table_mode_sort_prop() === 'f' || $parent.selected_table_mode_sort_prop('f'); }">Vol. Financeiro</th></tr></thead><tbody data-bind="foreach: $data"><tr><td><a data-bind="click: $parent.selected_augmented_asset, text: asset.t"></a></td><td data-bind="brFormattedPercentage: { value: asset.c, appendPositiveSign: true, maxDecimalPlaces: 2 }, style: { color: ko.unwrap(asset.c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(asset.c) >= 0.0001 ? '#7ECC7E' : '' }"></td><td data-bind="brFormattedDecimal: asset.f"></td></tr></tbody></table></script><script type="text/html" id="single_day_summary_table_template"><table class="tabela-ativos"><thead><tr><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 't' }, click: function() { $parent.selected_table_mode_sort_prop() === 't' || $parent.selected_table_mode_sort_prop('t'); }">Ativo</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'p' }, click: function() { $parent.selected_table_mode_sort_prop() === 'p' || $parent.selected_table_mode_sort_prop('p'); }">Últ.</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'c' }, click: function() { $parent.selected_table_mode_sort_prop() === 'c' || $parent.selected_table_mode_sort_prop('c'); }">Var (%)</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'f' }, click: function() { $parent.selected_table_mode_sort_prop() === 'f' || $parent.selected_table_mode_sort_prop('f'); }">Vol. Financeiro</th></tr></thead><tbody data-bind="foreach: $data"><tr><td><a data-bind="click: $parent.selected_augmented_asset, text: asset.t"></a></td><td data-bind="brFormattedDecimal: asset.p"></td><td data-bind="brFormattedPercentage: { value: asset.c, appendPositiveSign: true, maxDecimalPlaces: 2 }, style: { color: ko.unwrap(asset.c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(asset.c) >= 0.0001 ? '#7ECC7E' : '' }"></td><td data-bind="brFormattedDecimal: asset.f"></td></tr></tbody></table></script><script type="text/html" id="days_range_summary_table_template"><table class="tabela-ativos"><thead><tr><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 't' }, click: function() { $parent.selected_table_mode_sort_prop() === 't' || $parent.selected_table_mode_sort_prop('t'); }">Ativo</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'c' }, click: function() { $parent.selected_table_mode_sort_prop() === 'c' || $parent.selected_table_mode_sort_prop('c'); }">Var (%)</th><th data-bind="css: { 'cursor-pointer': $parent.selected_table_mode_sort_prop() !== 'f' }, click: function() { $parent.selected_table_mode_sort_prop() === 'f' || $parent.selected_table_mode_sort_prop('f'); }">Vol. Financeiro</th></tr></thead><tbody data-bind="foreach: $data"><tr><td><a data-bind="click: $parent.selected_augmented_asset, text: asset.t"></a></td><td data-bind="brFormattedPercentage: { value: asset.c, appendPositiveSign: true, maxDecimalPlaces: 2 }, style: { color: ko.unwrap(asset.c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(asset.c) >= 0.0001 ? '#7ECC7E' : '' }"></td><td data-bind="brFormattedDecimal: asset.f"></td></tr></tbody></table></script><script type="text/html" id="single_day_template"><tr><td><a data-bind="attr: { href: '/' + t, target: '_blank' }, text: t"></a></td><td data-bind="text: du"></td><td data-bind="brFormattedDecimal: s"></td><td data-bind="brFormattedDecimal: p"></td><td data-bind="brFormattedPercentage: { value: c, appendPositiveSign: true, maxDecimalPlaces: 2 }, style: { color: ko.unwrap(c) &lt; 0 ? '#fe7f7f' : ko.unwrap(c) > 0 ? '#7ECC7E' : '' }"></td><td data-bind="text: h"></td><td data-bind="brFormattedInteger: n"></td><td data-bind="brFormattedDecimal: f"></td></tr></script><script type="text/html" id="highs_lows_days_range_template"><tr><td><a data-bind="attr: { href: '/' + t, target: '_blank' }, text: t"></a></td><td data-bind="text: du"></td><td data-bind="brFormattedDecimal: s"></td><td data-bind="brFormattedPercentage: { value: c, appendPositiveSign: true, maxDecimalPlaces: 2 }, style: { color: ko.unwrap(c) &lt; 0 ? '#fe7f7f' : ko.unwrap(c) > 0 ? '#7ECC7E' : '' }"></td><td data-bind="brFormattedInteger: avg_n"></td><td data-bind="brFormattedDecimal: avg_f"></td><td data-bind="brFormattedInteger: sum_n"></td><td data-bind="brFormattedDecimal: sum_f"></td></tr></script><script type="text/html" id="volumes_days_range_template"><tr><td><a data-bind="attr: { href: '/' + t, target: '_blank' }, text: t"></a></td><td data-bind="text: du"></td><td data-bind="brFormattedDecimal: s"></td><td data-bind="brFormattedInteger: avg_n"></td><td data-bind="brFormattedDecimal: avg_f"></td><td data-bind="brFormattedInteger: sum_n"></td><td data-bind="brFormattedDecimal: sum_f"></td></tr></script><script type="text/html" id="options-rankings-template"><div class="full-height"><header class="header-opcoes"><div>Maiores &nbsp; <select data-bind="options: all_options_rankings, optionsText: 'description', value: ui_options_ranking"></select> de <select data-bind="value: selected_option_kind"><option value="" selected="selected">todas opções</option><option value="calls">CALLs</option><option value="puts">PUTs</option></select> de <select data-bind="options: all_underlyings, optionsCaption: 'todos ativos', value: selected_underlying"></select> <select data-bind="options: all_periods, optionsText: 'lowered', value: ui_period"></select> &nbsp; <a title="Abrir janela independente" href="javascript:window.open('/rankings-opcoes', 'rankings-opcoes', 'width=570,height=600,resizable=yes,scrollbars=yes')"><i class="fas fa-external-link-square-alt fa-lg" aria-hidden="true"></i></a></div></header><div id="container-tabela-opcoes" data-bind="css: { 'height-100-perc-50px': customScrollBar }"><div class="info-message" style="display: none" data-bind="visible: message"><span data-bind="html: message"></span><a class="close" data-bind="click: clearMessage">x</a></div><table class="tabela-ativos"><thead style="display: none" data-bind="if: tableTemplate() === 'single_day_template', visible: tableTemplate() === 'single_day_template'"><tr><th>Opção</th><th><abbr title="Dias úteis para o vencimento">D.U.</abbr></th><th>Strike</th><th>Último</th><th class="cursor-pointer" data-bind="click: function() { ui_options_ranking() === options_rankings.HIGHS ? ui_options_ranking(options_rankings.LOWS) : ui_options_ranking(options_rankings.HIGHS); }">Var (%)</th><th>Dt / Hr</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.NUMBERS_OF_TRADES }, click: function() { return ui_options_ranking() === options_rankings.NUMBERS_OF_TRADES || ui_options_ranking(options_rankings.NUMBERS_OF_TRADES); }">N&ordm;. Neg</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.VOLUMES }, click: function() { return ui_options_ranking() === options_rankings.VOLUMES || ui_options_ranking(options_rankings.VOLUMES); }">Vol. Financeiro</th></tr></thead><thead style="display: none" data-bind="if: tableTemplate() === 'highs_lows_days_range_template', visible: tableTemplate() === 'highs_lows_days_range_template'"><tr><th rowspan="2">Opção</th><th rowspan="2"><abbr title="Dias úteis para o vencimento">D.U.</abbr></th><th rowspan="2">Strike</th><th rowspan="2" class="cursor-pointer" data-bind="click: function() { ui_options_ranking() === options_rankings.HIGHS ? ui_options_ranking(options_rankings.LOWS) : ui_options_ranking(options_rankings.HIGHS); }">Var (%)</th><th colspan="2">Média diária</th><th colspan="2">Total <span data-bind="with: data_period"><span data-bind="text: lowered"></span></span></th></tr><tr><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.NUMBERS_OF_TRADES }, click: function() { return ui_options_ranking() === options_rankings.NUMBERS_OF_TRADES || ui_options_ranking(options_rankings.NUMBERS_OF_TRADES); }">N&ordm;. Neg</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.VOLUMES }, click: function() { return ui_options_ranking() === options_rankings.VOLUMES || ui_options_ranking(options_rankings.VOLUMES); }">Vol. Financeiro</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.NUMBERS_OF_TRADES }, click: function() { return ui_options_ranking() === options_rankings.NUMBERS_OF_TRADES || ui_options_ranking(options_rankings.NUMBERS_OF_TRADES); }">N&ordm;. Neg</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.VOLUMES }, click: function() { return ui_options_ranking() === options_rankings.VOLUMES || ui_options_ranking(options_rankings.VOLUMES); }">Vol. Financeiro</th></tr></thead><thead style="display: none" data-bind="if: tableTemplate() === 'volumes_days_range_template', visible: tableTemplate() === 'volumes_days_range_template'"><tr><th rowspan="2">Opção</th><th rowspan="2"><abbr title="Dias úteis para o vencimento">D.U.</abbr></th><th rowspan="2">Strike</th><th colspan="2">Média diária</th><th colspan="2">Total <span data-bind="with: data_period"><span data-bind="text: lowered"></span></span></th></tr><tr><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.NUMBERS_OF_TRADES }, click: function() { return ui_options_ranking() === options_rankings.NUMBERS_OF_TRADES || ui_options_ranking(options_rankings.NUMBERS_OF_TRADES); }">N&ordm;. Neg</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.VOLUMES }, click: function() { return ui_options_ranking() === options_rankings.VOLUMES || ui_options_ranking(options_rankings.VOLUMES); }">Vol. Financeiro</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.NUMBERS_OF_TRADES }, click: function() { return ui_options_ranking() === options_rankings.NUMBERS_OF_TRADES || ui_options_ranking(options_rankings.NUMBERS_OF_TRADES); }">N&ordm;. Neg</th><th data-bind="css: { 'cursor-pointer': ui_options_ranking() !== options_rankings.VOLUMES }, click: function() { return ui_options_ranking() === options_rankings.VOLUMES || ui_options_ranking(options_rankings.VOLUMES); }">Vol. Financeiro</th></tr></thead><tbody data-bind="template: { name: tableTemplate, foreach: options } "></tbody></table></div></div></script><script type="text/html" id="trade-volume-history-by-asset-kind-table-body-template"><tr><td><div data-bind="style:{ backgroundColor: color, width: 12, height: 12 }"></div></td><td class="nowrap" data-bind="text: name"></td><td class="align-right" data-bind="brFormattedAsText: { value: volume, format: 'short' } "></td></tr></script><script type="text/html" id="trade-volume-history-by-asset-kind-template"><div class="flex-horizontal flex-gap-10"><div><p class="align-center pad-top-10">Volume financeiro em <span data-bind="text: lastTradeDate"></span></p><div data-bind="component: { name: 'sortable-table', params: sortableTableParams }"></div></div><div class="flex-grow flex-vertical"><div class="flex-horizontal flex-space-evenly pad-top-10"><div>Volume financeiro diário em R$</div><div><input type="checkbox" id="exclude-acoes-IBOV" data-bind="checked: excludeIBOVstocks"><label for="exclude-acoes-IBOV"> Excluir ações do IBOV</label></div></div><div class="flex-grow" data-bind="component: { name: 'google-chart', params: chartParams }"></div></div></div></script><script type="text/html" id="options-trade-volume-history-by-underlying-group-table-body-template"><tr><td><div data-bind="style:{ backgroundColor: color, width: 12, height: 12 }"></div></td><td class="nowrap" data-bind="text: name"></td><td class="align-right" data-bind="brFormattedAsText: { value: volume, format: 'short' }"></td></tr></script><script type="text/html" id="options-trade-volume-history-by-underlying-group-template"><div class="flex-horizontal flex-gap-10"><div><p class="align-center pad-top-10">Volume financeiro em <span data-bind="text: lastTradeDate"></span></p><div data-bind="component: { name: 'sortable-table', params: sortableTableParams }"></div></div><div class="flex-grow flex-vertical"><div class="flex-horizontal flex-space-evenly pad-top-10"><div>Volume financeiro diário em R$</div></div><div class="flex-grow" data-bind="component: { name: 'google-chart', params: chartParams }"></div></div></div></script><script type="text/html" id="trade-volume-history-charts-template"><div class="flex-vertical flex-gap-30 pad-10"><div data-bind="component: 'trade-volume-history-by-asset-kind'"></div><div data-bind="component: 'options-trade-volume-history-by-underlying-group'"></div></div></script><script type="text/html" id="next-options-expirations-table-body-template"><tr><td class="align-center" data-bind="text: dt"></td><td class="align-right" data-bind="text: du"></td><td class="align-right" data-bind="text: dc"></td></tr></script><script type="text/html" id="next-options-expirations-table-template"><div data-bind="component: { name: 'sortable-table', params: sortableTableParams }"></div></script><script type="text/html" id="put-call-ratio-asset-history-template"><div class="flex-vertical"><div class="not-clickable align-center"><input class="align-center max-width-60 uppercase" onclick="this.select()" type="text" data-bind="style: { color: dynamicUnderlying.isInvalid() ? 'yellow' : 'inherit' }, textInput: dynamicUnderlying.ticker"> &nbsp;&nbsp;&nbsp;&nbsp; <span data-bind="with: dynamicUnderlying.asset"><span data-bind="brFormattedDecimal: p, style: { color: ko.unwrap(c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(c) >= 0.0001 ? '#7ECC7E' : '' }"></span></span> &nbsp;&nbsp;&nbsp;&nbsp; <span data-bind="with: dynamicUnderlying.asset"><span data-bind="brFormattedPercentage: { value: c, maxDecimalPlaces: 2, appendPercentSymbol: true, appendPositiveSign: true }, style: { color: ko.unwrap(c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(c) >= 0.0001 ? '#7ECC7E' : '' }"></span></span> &nbsp;&nbsp;&nbsp;&nbsp; <span data-bind="with: dynamicUnderlying.asset"><span data-bind="text: h"></span></span></div><div data-bind="foreach: expirations"><p class="text-center top-buffer-20 bottom-buffer-0" data-bind="visible: $parent.detailedByExpiration">Vencimento: <span data-bind="text: expirationDate"></span></p><div class="flex-grow bottom-buffer-40" style="min-height: 240px" data-bind="component: { name: 'tradingview-lightweight-chart', params: chartParams }"></div></div></div></script><script type="text/html" id="put-call-ratio-history-page-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><div class="not-clickable align-center">HISTÓRICO DE PUT / CALL RATIO &nbsp;&nbsp; <select data-bind="value: selectedMetric"><option value="ratio_qty">Quantidade negociada</option><option value="ratio_trades">Número de negócios</option><option value="ratio_value">Volume financeiro</option></select> <label style="margin-left: 30px"><input type="checkbox" data-bind="checked: detailedByExpiration"> Detalhar por vencimento</label></div></div><div class="height-100-perc-30px flex-horizontal flex-space-between flex-wrap pad-20" data-bind="foreach: underlyings"><div class="tvlwchart-noborder flex-basis-48-perc" data-bind="component: { name: 'put-call-ratio-asset-history', params: $data }"></div></div></div></script><script type="text/html" id="options-trade-volume-page-for-underlying-template"><div class="flex-horizontal flex-gap-20 pad-10 full-height"><div><div><p><select data-bind="value: selectedMetric"><option value="number_of_trades">Número de negócios</option><option value="traded_quantity">Quantidade negociada</option><option value="traded_value">Volume financeiro</option></select> em <span data-bind="text: lastTradeDate"></span></p></div><div class="height-100-perc-60px min-width-380"><table class="default-table-styles"><thead><tr><th></th><th colspan="4">Vencimento</th><th rowspan="2"><input type="checkbox" data-bind="attr: { id: 'checkCallsTbl' + idSuffix }, checked: callsSelected" style="accent-color: #1f77b4"><br> <label data-bind="attr: { for: 'checkCallsTbl' + idSuffix }">CALLs</label></th><th rowspan="2"><input type="checkbox" data-bind="attr: { id: 'checkPutsTbl' + idSuffix }, checked: putsSelected" style="accent-color: #ff7f0e"><br> <label data-bind="attr: { for: 'checkPutsTbl' + idSuffix }">PUTs</label></th><th rowspan="2"><br>TOTAL</th></tr><tr><th><input type="checkbox" checked="checked" data-bind="click: toggleAll"></th><th>Data</th><th><abbr title="Dias úteis">D.U.</abbr></th><th><abbr title="Dias corridos">D.C.</abbr></th><th><abbr title="Semana">W</abbr></th></tr></thead><tbody data-bind="foreach: volumesByExpiration"><tr><td><input type="checkbox" data-bind="attr: { id: 'e' + expiration_date }, checked: selected, style: { accentColor: accentColor }"></td><td class="nowrap"><label data-bind="attr: { for: 'e' + expiration_date }, text: expiration_date"></label></td><td class="align-right" data-bind="brFormattedInteger: du "></td><td class="align-right" data-bind="brFormattedInteger: dc "></td><td class="align-right" data-bind="text: w "></td><td class="align-right nowrap" data-bind="brFormattedAsText: { value: calls, format: 'short' } "></td><td class="align-right nowrap" data-bind="brFormattedAsText: { value: puts, format: 'short' } "></td><td class="align-right nowrap" data-bind="brFormattedAsText: { value: total, format: 'short' } "></td></tr></tbody></table></div></div><div class="flex-grow flex-vertical flex-gap-20"><div class="flex-basis-50-perc flex-vertical"><div>Histórico agrupado por vencimento</div><div class="flex-grow" data-bind="component: { name: 'google-chart', params: byExpirationChartParams }"></div></div><div class="flex-basis-50-perc flex-vertical"><div>Histórico &nbsp;&nbsp; <input type="checkbox" data-bind="attr: { id: 'checkCallsTitle' + idSuffix }, checked: callsSelected" style="accent-color: #1f77b4"><label data-bind="attr: { for: 'checkCallsTitle' + idSuffix }"> CALLs</label> &nbsp;&nbsp; <input type="checkbox" data-bind="attr: { id: 'checkPutsTitle' + idSuffix }, checked: putsSelected" style="accent-color: #ff7f0e"><label data-bind="attr: { for: 'checkPutsTitle' + idSuffix }"> PUTs</label></div><div class="flex-grow" data-bind="component: { name: 'google-chart', params: byCallPutFlagChartParams }"></div></div></div></div></script><script type="text/html" id="asset-page-ui-root-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"> <input class="align-center max-width-60 uppercase" onclick="this.select()" type="text" data-bind="style: { color: dynamicUnderlying.isInvalid() ? 'yellow' : 'inherit' }, textInput: dynamicUnderlying.ticker"> &nbsp;&nbsp;&nbsp;&nbsp; <span data-bind="with: dynamicUnderlying.asset"><span data-bind="brFormattedDecimal: p, style: { color: ko.unwrap(c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(c) >= 0.0001 ? '#7ECC7E' : '' }"></span></span> &nbsp;&nbsp;&nbsp;&nbsp; <span data-bind="with: dynamicUnderlying.asset"><span data-bind="brFormattedPercentage: { value: c, maxDecimalPlaces: 2, appendPercentSymbol: true, appendPositiveSign: true }, style: { color: ko.unwrap(c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(c) >= 0.0001 ? '#7ECC7E' : '' }"></span></span> &nbsp;&nbsp;&nbsp;&nbsp; <span data-bind="with: dynamicUnderlying.asset"><span data-bind="text: h"></span></span> </a> <a class="clickable" data-bind="text: 'Volume opções', click: component.bind($data, { name: 'options-trade-volume-page-for-underlying', params: { dynamicUnderlying: dynamicUnderlying } } ), style: { 'background-color': component().name === 'options-trade-volume-page-for-underlying' ? '#1d1d1d' : '' }"></a></div><div class="height-100-perc-30px" data-bind="component: component"></div></div></script><script type="text/html" id="ranges-ctrls-venda-coberta-taxas-probabilidades-graficos-estudo-template"><div class="flex-horizontal flex-gap-10" data-bind="style: { color: color }"><div>Dias úteis para vencimento</div><div><span data-bind="text: dus"></span></div><div><input type="range" min="1" max="90" style="direction: rtl" data-bind="value: dus, style: { 'accent-color': color }"></div><div>Volatilidade implícita</div><div><span data-bind="text: impliedVol"></span>%</div><div><input type="range" min="1" max="100" data-bind="value: impliedVol, style: { 'accent-color': color }"></div></div></script><script type="text/html" id="venda-coberta-taxas-probabilidades-graficos-estudo-template"><div class="flex-vertical full-height"><div class="flex-horizontal flex-gap-20 pad-20"><div class="flex-horizontal flex-grow flex-wrap flex-gap-10"><div data-bind="component: { name: 'ranges-ctrls-venda-coberta-taxas-probabilidades-graficos-estudo', params: blueSerie }"></div><div data-bind="component: { name: 'ranges-ctrls-venda-coberta-taxas-probabilidades-graficos-estudo', params: yellowSerie }"></div><div data-bind="component: { name: 'ranges-ctrls-venda-coberta-taxas-probabilidades-graficos-estudo', params: redSerie }"></div><div data-bind="component: { name: 'ranges-ctrls-venda-coberta-taxas-probabilidades-graficos-estudo', params: greenSerie }"></div></div><div class="flex-horizontal flex-gap-10 nowrap"><div class="nowrap">Taxa de juros</div><div><input type="text" class="align-center" style="width: 50px" data-bind="brFormattedDecimal: riskFreeRate"> % a.a.</div></div></div><div class="flex-vertical flex-grow pad-20"><div class="flex-horizontal flex-basis-50-perc"><div style="align-self: center">CALLS</div><div class="flex-basis-33-perc" data-bind="component: { name: 'google-chart', params: calls_taxa_x_delta_or_probability }"></div><div class="flex-basis-33-perc" data-bind="component: { name: 'google-chart', params: taxa_x_prob_otm_calls }"></div><div class="flex-basis-33-perc" data-bind="component: { name: 'google-chart', params: calls_delta_x_probability }"></div></div><div class="flex-horizontal flex-basis-50-perc"><div style="align-self: center">PUTS</div><div class="flex-basis-33-perc" data-bind="component: { name: 'google-chart', params: puts_taxa_x_delta_or_probability }"></div><div class="flex-basis-33-perc" data-bind="component: { name: 'google-chart', params: taxa_x_prob_otm_puts }"></div><div class="flex-basis-33-perc" data-bind="component: { name: 'google-chart', params: puts_delta_x_probability }"></div></div></div></div></script><script type="text/html" id="tabela-checkboxes-vencimentos-ativos-template"><table class="default-table-styles"><thead><tr><th></th><!--ko foreach: boundUnderlyings--><th><input class="align-center max-width-60 uppercase" onclick="this.select()" type="text" data-bind="style: { color: isInvalid() ? 'yellow' : 'inherit' }, textInput: ticker"></th><!--/ko--></tr><tr><th>Último preço (R$)</th><!--ko foreach: boundUnderlyings--><th class="align-center" data-bind="with: asset"><span data-bind="brFormattedDecimal: p, style: { color: ko.unwrap(c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(c) >= 0.0001 ? '#7ECC7E' : '' }"></span></th><!--/ko--></tr><tr><th>Variação (%)</th><!--ko foreach: boundUnderlyings--><th class="align-center" data-bind="with: asset"><span data-bind="brFormattedPercentage: { value: c, maxDecimalPlaces: 2, appendPositiveSign: true }, style: { color: ko.unwrap(c) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(c) >= 0.0001 ? '#7ECC7E' : '' }"></span></th><!--/ko--></tr></thead><tbody data-bind="foreach: boundExpirations"><tr><td class="nowrap"><select style="font-family: monospace" data-bind="options: $parent.allExpirations, optionsText: 'label', value: expirationObservable"></select></td><!--ko foreach: underlyings--><td class="align-center"><input type="checkbox" data-bind="attr: { disabled: disabled }, checked: selected, style: { 'accent-color': accentColor }"></td><!--/ko--></tr></tbody></table></script><script type="text/html" id="venda-coberta-tabela-opcoes-taxas-probabilidades-template"><table class="default-table-styles"><thead><tr><th>Ativo</th><th>Opção</th><th>Strike</th><th>Bid</th><th>Ask</th><th><abbr title="Probabilidade OTM">Probab. OTM</abbr></th><th>Taxa (%) a.m.</th><th>Taxa (%) período</th><th>Proteção</th><th>Lucro máximo</th><th>Prejuízo máximo</th></tr></thead><tbody><tr><td>PETR4</td><td>PETRO229</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></script><script type="text/html" id="venda-coberta-taxas-probabilidades-graficos-por-ativos-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="ovfl-x-auto" style="height: 210px" data-bind="component: { name: 'tabela-checkboxes-vencimentos-ativos', params: { series: series } } "></div><div class="flex-vertical height-100-perc-210px"><div class="flex-horizontal"><div></div><div class="align-center flex-basis-48-perc"><select data-bind="value: xAxisPropertyForYTaxa"><option value="delta">Delta x Taxa a.m.</option><option value="itmProbability">Probabilidade ITM x Taxa a.m.</option><option value="otmProbability">Probabilidade OTM x Taxa a.m.</option></select></div><div class="align-center flex-basis-48-perc"><select data-bind="value: yAxisPropertyForXDelta"><option value="itmProbability">Delta x Probabilidade ITM</option><option value="otmProbability">Delta x Probabilidade OTM</option></select></div></div><div class="flex-horizontal flex-basis-46-perc"><div style="align-self: center">CALLS</div><div class="flex-basis-48-perc" style="min-height: 240px" data-bind="component: { name: 'google-chart', params: calls_taxa_x_delta_or_probability }"></div><div class="flex-basis-48-perc" style="min-height: 240px" data-bind="component: { name: 'google-chart', params: calls_delta_x_probability }"></div></div><div class="flex-horizontal flex-basis-46-perc"><div style="align-self: center">PUTS</div><div class="flex-basis-48-perc" style="min-height: 240px" data-bind="component: { name: 'google-chart', params: puts_taxa_x_delta_or_probability }"></div><div class="flex-basis-48-perc" style="min-height: 240px" data-bind="component: { name: 'google-chart', params: puts_delta_x_probability }"></div></div></div></div></script><script type="text/html" id="venda-coberta-tabelas-por-ativo-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div>BUSCAR POR ATIVO</div><div class="flex-horizontal flex-gap-20"><div class="flex-grow"><div class="align-center pad-10">CALLs - Vencimento 1</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div><div class="flex-grow"><div class="align-center pad-10">PUTS - Vencimento 1</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div></div><div class="flex-horizontal flex-gap-20"><div class="flex-grow"><div class="align-center pad-10">CALLs - Vencimento 2</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div><div class="flex-grow"><div class="align-center pad-10">PUTs - Vencimento 2</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div></div></div></script><script type="text/html" id="venda-coberta-tabelas-por-probabilidade-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div>BUSCAR POR PROBABILIDADE OTM</div><div class="flex-horizontal flex-gap-20"><div class="flex-grow"><div class="align-center pad-10">CALLs - Vencimento 1</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div><div class="flex-grow"><div class="align-center pad-10">PUTS - Vencimento 1</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div></div><div class="flex-horizontal flex-gap-20"><div class="flex-grow"><div class="align-center pad-10">CALLs - Vencimento 2</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div><div class="flex-grow"><div class="align-center pad-10">PUTs - Vencimento 2</div><div data-bind="template: 'venda-coberta-tabela-opcoes-taxas-probabilidades-template'"></div></div></div></div></script><script type="text/html" id="venda-coberta-ui-root-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"><strong>VENDA COBERTA</strong></a> <a class="clickable" data-bind="text: 'Gráficos delta x probabilidade x taxa', click: component.bind($data, 'venda-coberta-taxas-probabilidades-graficos-por-ativos'), style: { 'background-color': component() === 'venda-coberta-taxas-probabilidades-graficos-por-ativos' ? '#1d1d1d' : '' }"></a></div><div class="height-100-perc-30px" data-bind="component: component"></div></div></script><script type="text/html" id="url-content-template"><div data-bind="html: htmlContent"></div></script><script type="text/html" id="article-ui-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"><strong>ARTIGOS</strong></a> <a class="not-clickable align-center" data-bind="text: title"></a></div><div class="height-100-perc-30px" data-bind="component: { name: 'url-content', params: { url: $data.url } }"></div></div></script><script type="text/html" id="registration-completed-content"><div class="flex-centered flex-vertical pad-20"><h2>Cadastro concluído!</h2><h4>Parabéns! Seu cadastro foi concluído com sucesso e agora você tem acesso a informações e funcionalidades exclusivas na nossa plataforma!</h4></div></script><script type="text/html" id="top-ui-bar-item-template"><a class="clickable" data-bind="text: text, click: currentComponent.bind($data, targetComponent), style: { 'background-color': currentComponent() === targetComponent ? '#1d1d1d' : '' }"></a></script><script type="text/html" id="strategies-ui-root-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"><strong>ESTRATÉGIAS / POSIÇÔES</strong></a> <a class="clickable" data-bind="text: 'Em aberto', click: setViewComponent.bind($data, 'strategies-open-ui-root'), style: { 'background-color': component() === 'strategies-open-ui-root' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="visible: executed_where_any_position_has_pnl_realized_visible, text: 'Encerradas', click: setViewComponent.bind($data, 'strategies-where-any-position-has-pnl-realized-ui-root'), style: { 'background-color': component() === 'strategies-where-any-position-has-pnl-realized-ui-root' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="visible: not_executed_expired_visible, text: 'Não executadas - expiradas', click: setViewComponent.bind($data, 'strategies-not-executed-expired'), style: { 'background-color': component() === 'strategies-not-executed-expired' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="visible: not_executed_not_expired_visible, text: 'Não executadas - não expiradas', click: setViewComponent.bind($data, 'strategies-not-executed-not-expired'), style: { 'background-color': component() === 'strategies-not-executed-not-expired' ? '#1d1d1d' : '' }"></a></div><div class="height-100-perc-30px" data-bind="component: component"></div></div></script><script type="text/html" id="strategies-open-list-table-template"><div class="flex-vertical full-height flex-gap-10"><div data-bind="style: selectedStrategy() ? { 'min-height': 110, 'max-height': '33%', 'overflow-y': 'auto' } : { 'min-height': 'initial', 'max-height': 'initial', 'overflow-y': 'initial' }"><table class="default-table-styles default-align-right strategies-open-list-table pad-10"><thead><tr><th colspan="4">Ativo</th><th colspan="2" rowspan="2">Exposição (R$)</th><th rowspan="2">Estratégia</th><th colspan="3">Vencimento</th><th colspan="2"><abbr title="Realizável a mercado. Pode-se conseguir uma melhor execução.">Lucro / prejuízo realizável *</abbr></th><th rowspan="2">Realizado (R$)</th><th colspan="4">Gregas</th></tr><tr><th>Ticker</th><th>Último</th><th>Var. (%)</th><th>Data / hora</th><th class="col-exp-dt">Data</th><th class="col-dc">DC</th><th class="col-dc">DU</th><th>R$</th><th>%</th><th>Delta</th><th>Gamma</th><th>Theta</th><th>Vega</th></tr></thead><tbody data-bind="foreach: underlyings"><tr><td data-bind="attr: { rowspan: strategies.length }, with: underlying_asset" class="col-underlying"><span data-bind="text: t"></span></td><td data-bind="attr: { rowspan: strategies.length }, with: underlying_asset"><span data-bind="brFormattedDecimal: p, css: { 'color-red': ko.unwrap(c) &lt;= -0.0001, 'color-green': ko.unwrap(c) >= 0.0001 }"></span></td><td data-bind="attr: { rowspan: strategies.length }, with: underlying_asset"><span data-bind="brFormattedPercentage: { value: c, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(c) &lt;= -0.0001, 'color-green': ko.unwrap(c) >= 0.0001 }"></span></td><td data-bind="attr: { rowspan: strategies.length }, with: underlying_asset" class="col-last-datetime"><span data-bind="text: h"></span></td><td data-bind="attr: { rowspan: strategies.length, colspan: strategies.length === 1 ? 2 : 1 }"><span data-bind="brFormattedDecimal: exposure, css: { 'color-red': ko.unwrap(exposure) &lt;= -0.01 }"></span></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }, visible: strategies.length > 1, brFormattedDecimal: strategies[0].exposure, css: { 'color-red': ko.unwrap(strategies[0].exposure) &lt;= -0.01 }" class="cursor-pointer"></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="col-title cursor-pointer noselect"><a data-bind="text: strategies[0].titleComputed"></a></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }, text: strategies[0].resultingPositionFirstUnexpiredExpirationDateDDMMYYYY" class="col-exp-dt cursor-pointer"></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }, text: strategies[0].resultingPositionFirstUnexpiredExpirationInDCs" class="align-center cursor-pointer"></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }, text: strategies[0].resultingPositionFirstUnexpiredExpirationInDUs" class="align-center cursor-pointer"></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="cursor-pointer"><abbr data-bind="brFormattedDecimal: strategies[0].pnl_open_amount_ref_all_open_positions, css: { 'color-red': ko.unwrap(strategies[0].pnl_open_amount_ref_all_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(strategies[0].pnl_open_amount_ref_all_open_positions) >= 0.01 }" title="Lucro / prejuízo realizável a mercado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: strategies[0].pnl_open_amount_ref_all_open_positions.hasValue()">*</span></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="cursor-pointer"><abbr data-bind="brFormattedPercentage: { value: strategies[0].pnl_open_percentage_ref_all_open_positions, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(strategies[0].pnl_open_amount_ref_all_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(strategies[0].pnl_open_amount_ref_all_open_positions) >= 0.01 }" title="Lucro / prejuízo percentual realizável a mercado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: strategies[0].pnl_open_percentage_ref_all_open_positions.hasValue()">*</span></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="cursor-pointer"><span data-bind="brFormattedDecimal: strategies[0].pnl_realized, css: { 'color-red': ko.unwrap(strategies[0].pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(strategies[0].pnl_realized) >= 0.01 }"></span></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="cursor-pointer"><span data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: strategies[0].delta_all_positions }, css: { 'color-red': ko.unwrap(strategies[0].delta_all_positions) &lt;= -0.01 }"></span></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="cursor-pointer"><span data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: strategies[0].gamma_all_positions }, css: { 'color-red': ko.unwrap(strategies[0].gamma_all_positions) &lt;= -0.01 }"></span></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="cursor-pointer"><span data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: strategies[0].theta_financeiro_all_positions }, css: { 'color-red': ko.unwrap(strategies[0].theta_financeiro_all_positions) &lt;= -0.01, 'color-green': ko.unwrap(strategies[0].theta_financeiro_all_positions) >= 0.01 }"></span></td><td data-bind="click: function() { if (strategies[0] === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy(strategies[0]); }, style: { 'background-color': strategies[0] === $parent.selectedStrategy() ? '#282828' : '' }" class="cursor-pointer"><span data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: strategies[0].vega_all_positions }, css: { 'color-red': ko.unwrap(strategies[0].vega_all_positions) &lt;= -0.01 }"></span></td></tr><!--ko foreach: strategies.slice(1)--><tr data-bind="click: function() { if ($data === $parents[1].selectedStrategy()) { $parents[1].selectedStrategy(null); } else $parents[1].selectedStrategy($data); }, style: { 'background-color': $data === $parents[1].selectedStrategy() ? '#282828' : '' } "><td class="cursor-pointer" data-bind="brFormattedDecimal: exposure, css: { 'color-red': ko.unwrap(exposure) &lt;= -0.01 }"></td><td class="col-title cursor-pointer noselect"><a data-bind="text: titleComputed"></a></td><td class="col-exp-dt cursor-pointer" data-bind="text: resultingPositionFirstUnexpiredExpirationDateDDMMYYYY"></td><td class="align-center cursor-pointer" data-bind="text: resultingPositionFirstUnexpiredExpirationInDCs"></td><td class="align-center cursor-pointer" data-bind="text: resultingPositionFirstUnexpiredExpirationInDUs"></td><td class="cursor-pointer"><abbr data-bind="brFormattedDecimal: pnl_open_amount_ref_all_open_positions, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_all_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_all_open_positions) >= 0.01 }" title="Lucro / prejuízo realizável a mercado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_amount_ref_all_open_positions.hasValue()">*</span></td><td class="cursor-pointer"><abbr data-bind="brFormattedPercentage: { value: pnl_open_percentage_ref_all_open_positions, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_all_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_all_open_positions) >= 0.01 }" title="Lucro / prejuízo percentual realizável a mercado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_percentage_ref_all_open_positions.hasValue()">*</span></td><td class="cursor-pointer" data-bind="brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }"></td><td class="cursor-pointer" data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: delta_all_positions }, css: { 'color-red': ko.unwrap(delta_all_positions) &lt;= -0.01 }"></td><td class="cursor-pointer" data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: gamma_all_positions }, css: { 'color-red': ko.unwrap(gamma_all_positions) &lt;= -0.01 }"></td><td class="cursor-pointer" data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: theta_financeiro_all_positions }, css: { 'color-red': ko.unwrap(theta_financeiro_all_positions) &lt;= -0.01, 'color-green': ko.unwrap(theta_financeiro_all_positions) >= 0.01 }"></td><td class="cursor-pointer" data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: vega_all_positions }, css: { 'color-red': ko.unwrap(vega_all_positions) &lt;= -0.01 }"></td></tr><!--/ko--></tbody><tfoot><tr><td colspan="4"></td><td data-bind="attr: { colspan: any_underlying_has_more_than_one_strategy ? 2 : 1 }"></td><td colspan="4"></td><td><abbr data-bind="brFormattedDecimal: pnl_open_amount_ref_all_open_positions, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_all_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_all_open_positions) >= 0.01 }" title="Lucro / prejuízo realizável a mercado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_amount_ref_all_open_positions.hasValue()">*</span></td><td><abbr data-bind="brFormattedPercentage: { value: pnl_open_percentage_ref_all_open_positions, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_all_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_all_open_positions) >= 0.01 }" title="Lucro / prejuízo percentual realizável a mercado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_percentage_ref_all_open_positions.hasValue()">*</span></td><td data-bind="brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }"></td><td data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: delta_all_strategies }, css: { 'color-red': ko.unwrap(delta_all_strategies) &lt;= -0.01 }"></td><td data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: gamma_all_strategies }, css: { 'color-red': ko.unwrap(gamma_all_strategies) &lt;= -0.01 }"></td><td data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: theta_financeiro_all_strategies }, css: { 'color-red': ko.unwrap(theta_financeiro_all_strategies) &lt;= -0.01, 'color-green': ko.unwrap(theta_financeiro_all_strategies) >= 0.01 }"></td><td data-bind="brFormattedDecimal: { maxDecimalPlaces: 2, value: vega_all_strategies }, css: { 'color-red': ko.unwrap(vega_all_strategies) &lt;= -0.01 }"></td></tr></tfoot></table></div><div class="flex-grow ovfl-y-auto" data-bind="if: selectedStrategy"><div data-bind="component: { name: 'strategy-or-portfolio', params: selectedStrategy }"></div></div><div class="flex-grow ovfl-y-auto" data-bind="ifnot: selectedStrategy"><div style="width: 920px; margin: 0 auto" class="fade-in-element text-center"><p style="font-size: 32px">Você está visualizando o gerenciamento de estratégias do Opções.Net.Br, recurso exclusivo para assinantes Premium.</p><p style="font-size: 18px">As estratégias exibidas são mero exemplo e não constituem sugestão de investimento.</p></div></div></div></script><script type="text/html" id="strategies-open-list-expanded-template"><div class="strategies-list-container" data-bind="template: { name: 'strategy-or-portfolio-template', foreach: strategies }"></div></script><script type="text/html" id="strategies-open-ui-root-template"><div class="strategies-open-ui-root-container flex-vertical full-height pad-left-10 pad-top-10"><div class="strategies-open-ui-root-top-bar flex-horizontal flex-start"><div class="nowrap" data-bind="template: { name: 'show-edit-boolean-with-select-template', data: { label: 'Conta real:', edit: true, nullable: true, optionsCaption: '(Indefinido)', value: realAccount } }"></div><div><span data-bind="text: filteredStrategiesCountText"></span> com posições abertas</div><div data-bind="visible: filteredStrategiesCount">PnL: <span data-bind="css: { 'color-red': ko.unwrap(pnl_open_amount_ref_all_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_all_open_positions) >= 0.01 }">R$ <span data-bind="brFormattedDecimal: pnl_open_amount_ref_all_open_positions"></span></span></div><div data-bind="visible: filteredStrategiesCount">Theta: <span data-bind="css: { 'color-red': ko.unwrap(theta_financeiro_all_strategies) &lt;= -0.01, 'color-green': ko.unwrap(theta_financeiro_all_strategies) >= 0.01 }">R$ <span data-bind="brFormattedDecimal: theta_financeiro_all_strategies"></span></span></div><top-ui-bar-item data-bind="visible: filteredStrategiesCount() > 1" params="text: 'Lista expandida', currentComponent: viewModeComponent, targetComponent: 'strategies-open-list-expanded'"></top-ui-bar-item> <top-ui-bar-item data-bind="visible: filteredStrategiesCount() > 1" params="text: 'Lista resumida', currentComponent: viewModeComponent, targetComponent: 'strategies-open-list-table'"></top-ui-bar-item></div><div class="height-100-perc-60px" data-bind="component: viewModeComponent, visible: filteredStrategiesCount"></div></div></script><script type="text/html" id="strategies-with-all-positions-closed-template"><div class="strategies-with-all-positions-closed-container flex-horizontal full-height"><div class="vertical-scroll min-width-140"><table class="default-table-styles default-align-right"><thead><tr><th>Ano / Mês<br> <select data-bind="value: openingClosingOption"><option value="Opening">Abertura</option><option value="Closing">Fechamento</option></select></th></tr></thead><tbody data-bind="foreach: resultsByMonth"><tr class="cursor-pointer" data-bind="click: $parent.selectedMonth.bind($data, month), style: { 'background-color': month === $parent.selectedMonth() ? '#282828' : '' }"><td class="align-center noselect nowrap"><a data-bind="text: month"></a></td></tr></tbody></table></div><div class="flex-vertical full-height flex-gap-10 width-100-perc-140px"><div data-bind="component: { name: 'sortable-table', params: sortableTableParams }, style: selectedStrategy() ? { 'min-height': 60, 'max-height': '33%', 'overflow-y': 'auto' } : { 'min-height': 'initial', 'max-height': 'initial', 'overflow-y': 'initial' }"></div><div class="flex-grow ovfl-y-auto" data-bind="if: selectedStrategy"><div data-bind="component: { name: 'strategy-or-portfolio', params: selectedStrategy }"></div></div></div></div></script><script type="text/html" id="strategies-with-all-positions-closed-table-body-template"><tr class="cursor-pointer" data-bind="attr: { 'data-strategy_id': id }, click: function() { if ($data === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy($data); }, style: { 'background-color': $data === $parent.selectedStrategy() ? '#282828' : '' } "><td class="col-ticker" data-bind="text: underlying_asset_id"></td><td class="col-title noselect"><a data-bind="text: title"></a></td><td class="col-date" data-bind="text: openingDateDDMMYYYY"></td><td class="col-date" data-bind="text: closingDateDDMMYYYY"></td><td class="col-pnl align-right" data-bind="brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }"></td></tr></script><script type="text/html" id="strategies-with-all-positions-closed-table-footer-template"><tr><td colspan="4"></td><td class="align-right" data-bind="brFormattedDecimal: total_pnl_realized, css: { 'color-red': ko.unwrap(total_pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(total_pnl_realized) >= 0.01 }"></td></tr></script><script type="text/html" id="strategies-where-any-position-has-pnl-realized-table-body-template"><tr class="cursor-pointer" data-bind="attr: { 'data-strategy_id': id }, click: function() { if ($data.strategy === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy($data.strategy); }, style: { 'background-color': $data.strategy === $parent.selectedStrategy() ? '#282828' : '' } "><td class="col-ticker" data-bind="text: underlying_asset_id, attr: { rowspan: operations_with_pnl_realized.length }"></td><td class="col-title noselect" data-bind="attr: { rowspan: operations_with_pnl_realized.length }"><a data-bind="text: title"></a></td><td class="align-right" data-bind="brFormattedDecimal: pnl_realized_on_selected_month, attr: { rowspan: operations_with_pnl_realized.length }, css: { 'color-red': pnl_realized_on_selected_month &lt;= -0.01, 'color-green': pnl_realized_on_selected_month >= 0.01 }"></td><td class="col-date" data-bind="text: operations_with_pnl_realized[0].date"></td><td class="align-center" data-bind="text: operations_with_pnl_realized[0].op"></td><td data-bind="text: operations_with_pnl_realized[0].op_asset_ticker"></td><td class="align-right" data-bind="brFormattedDecimal: operations_with_pnl_realized[0].pnl_realized, css: { 'color-red': operations_with_pnl_realized[0].pnl_realized &lt;= -0.01, 'color-green': operations_with_pnl_realized[0].pnl_realized >= 0.01 }"></td><td class="align-center" data-bind="brFormattedInteger: operations_with_pnl_realized[0].brokerage_note_number"></td></tr><!--ko foreach: operations_with_pnl_realized.slice(1)--><tr class="cursor-pointer" data-bind="attr: { 'data-strategy_id': $parent.id }, click: function() { if ($parent.strategy === $parents[1].selectedStrategy()) { $parents[1].selectedStrategy(null); } else $parents[1].selectedStrategy($parent.strategy); }, style: { 'background-color': $parent.strategy === $parents[1].selectedStrategy() ? '#282828' : '' } "><td class="col-date" data-bind="text: date"></td><td class="align-center" data-bind="text: op"></td><td data-bind="text: op_asset_ticker"></td><td class="align-right" data-bind="brFormattedDecimal: pnl_realized, css: { 'color-red': pnl_realized &lt;= -0.01, 'color-green': pnl_realized >= 0.01 }"></td><td class="align-center" data-bind="brFormattedInteger: brokerage_note_number"></td></tr><!--/ko--></script><script type="text/html" id="strategies-with-any-operation-in-selected-month-table-body-template"><tr class="cursor-pointer" data-bind="attr: { 'data-strategy_id': id }, click: function() { if ($data.strategy === $parent.selectedStrategy()) { $parent.selectedStrategy(null); } else $parent.selectedStrategy($data.strategy); }, style: { 'background-color': $data.strategy === $parent.selectedStrategy() ? '#282828' : '' } "><td class="col-ticker" data-bind="text: underlying_asset_id, attr: { rowspan: operations_in_selected_month.length }"></td><td class="col-title noselect" data-bind="attr: { rowspan: operations_in_selected_month.length }"><a data-bind="text: title"></a></td><td class="col-date" data-bind="text: operations_in_selected_month[0].date"></td><td class="align-center" data-bind="text: operations_in_selected_month[0].op"></td><td data-bind="text: operations_in_selected_month[0].op_asset_ticker"></td><td class="align-center" data-bind="brFormattedInteger: operations_in_selected_month[0].brokerage_note_number"></td></tr><!--ko foreach: operations_in_selected_month.slice(1)--><tr class="cursor-pointer" data-bind="attr: { 'data-strategy_id': $parent.id }, click: function() { if ($parent.strategy === $parents[1].selectedStrategy()) { $parents[1].selectedStrategy(null); } else $parents[1].selectedStrategy($parent.strategy); }, style: { 'background-color': $parent.strategy === $parents[1].selectedStrategy() ? '#282828' : '' } "><td class="col-date" data-bind="text: date"></td><td class="align-center" data-bind="text: op"></td><td data-bind="text: op_asset_ticker"></td><td class="align-center" data-bind="brFormattedInteger: brokerage_note_number"></td></tr><!--/ko--></script><script type="text/html" id="strategies-where-any-position-has-pnl-realized-table-footer-template"><tr><td colspan="2"></td><td class="align-right" data-bind="brFormattedDecimal: total_pnl_realized, css: { 'color-red': ko.unwrap(total_pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(total_pnl_realized) >= 0.01 }"></td><td colspan="3"></td><td class="align-right" data-bind="brFormattedDecimal: total_pnl_realized, css: { 'color-red': ko.unwrap(total_pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(total_pnl_realized) >= 0.01 }"></td><td></td></tr></script><script type="text/html" id="strategies-with-any-operation-in-selected-month-template"><div class="strategies-with-any-operation-in-selected-month-container flex-horizontal full-height"><div class="vertical-scroll min-width-100"><table class="default-table-styles default-align-right"><thead><tr><th class="nowrap">Ano / Mês</th></tr></thead><tbody data-bind="foreach: orderedMonths"><tr class="cursor-pointer" data-bind="click: $parent.selectedMonth.bind($data, $data), style: { 'background-color': $data === $parent.selectedMonth() ? '#282828' : '' }"><td class="align-center noselect nowrap"><a data-bind="text: $data.replace('-', ' / ')"></a></td></tr></tbody></table></div><div class="flex-vertical full-height flex-gap-10 width-100-perc-100px"><div data-bind="component: { name: 'sortable-table', params: sortableTableParams }, style: selectedStrategy() ? { 'min-height': 110, 'max-height': '33%', 'overflow-y': 'auto' } : { 'min-height': 'initial', 'max-height': 'initial', 'overflow-y': 'initial' }"></div><div class="flex-grow ovfl-y-auto" data-bind="if: selectedStrategy"><div data-bind="component: { name: 'strategy-or-portfolio', params: selectedStrategy }"></div></div></div></div></script><script type="text/html" id="strategies-where-any-position-has-pnl-realized-template"><div class="strategies-where-any-position-has-pnl-realized-container flex-horizontal full-height"><div class="vertical-scroll min-width-240"><table class="default-table-styles default-align-right"><thead><tr><th class="nowrap">Ano / Mês</th><th class="nowrap">Lucro / prejuízo bruto</th></tr></thead><tbody data-bind="foreach: resultsByMonth"><tr class="cursor-pointer" data-bind="click: $parent.selectedMonth.bind($data, month), style: { 'background-color': month === $parent.selectedMonth() ? '#282828' : '' }"><td class="align-center noselect nowrap"><a data-bind="text: month.replace('-', ' / ')"></a></td><td data-bind="brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }"></td></tr></tbody><tfoot><tr><td></td><td data-bind="brFormattedDecimal: total_pnl_realized, css: { 'color-red': ko.unwrap(total_pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(total_pnl_realized) >= 0.01 }"></td></tr></tfoot></table></div><div class="flex-vertical full-height flex-gap-10 width-100-perc-240px"><div data-bind="component: { name: 'sortable-table', params: sortableTableParams }, style: selectedStrategy() ? { 'min-height': 110, 'max-height': '33%', 'overflow-y': 'auto' } : { 'min-height': 'initial', 'max-height': 'initial', 'overflow-y': 'initial' }"></div><div class="flex-grow ovfl-y-auto" data-bind="if: selectedStrategy"><div data-bind="component: { name: 'strategy-or-portfolio', params: selectedStrategy }"></div></div></div></div></script><script type="text/html" id="strategies-where-any-position-has-pnl-realized-ui-root-template"><div class="strategies-where-any-position-has-pnl-realized-ui-root-container flex-vertical full-height"><div class="strategies-open-ui-root-top-bar flex-horizontal flex-start pad-top-10 pad-left-10"><div class="nowrap" data-bind="template: { name: 'show-edit-boolean-with-select-template', data: { label: 'Conta real:', edit: true, nullable: true, optionsCaption: '(Indefinido)', value: realAccount } }"></div><div>Estratégias com <select data-bind="value: component"><option value="strategies-with-any-operation-in-selected-month">alguma operação realizada no mês selecionado</option><option value="strategies-where-any-position-has-pnl-realized">alguma posição encerrada ou expirada no mês selecionado</option><option value="strategies-with-all-positions-closed">todas posições encerradas ou expiradas</option></select></div></div><div class="height-100-perc-50px" data-bind="component: component"></div></div></script><script type="text/html" id="strategies-not-executed-expired-template"><div class="strategies-where-any-position-has-pnl-realized-container flex-horizontal full-height"><div class="vertical-scroll" style="flex-basis: 110px; flex-shrink: 0; flex-grow: 0"><table class="default-table-styles default-align-right"><thead><tr><th class="nowrap">Ano / Mês da<br>Simulação</th></tr></thead><tbody data-bind="foreach: orderedMonths"><tr class="cursor-pointer" data-bind="click: $parent.selectedMonth.bind($data, $data), style: { 'background-color': $data === $parent.selectedMonth() ? '#282828' : '' }"><td class="align-center noselect nowrap"><a data-bind="text: $data"></a></td></tr></tbody></table></div><div class="vertical-scroll"><div class="strategies-list-container" data-bind="template: { name: 'strategy-or-portfolio-template', foreach: filteredStrategies }"></div></div></div></script><script type="text/html" id="strategies-not-executed-not-expired-template"><div class="strategies-list-container" data-bind="template: { name: 'strategy-or-portfolio-template', foreach: groupStrategies }"></div></script><script type="text/html" id="strategies-shared-publicly-template"><p>strategies-shared-publicly</p></script><script type="text/html" id="new-strategy-with-editable-positions-template"><div class="strategies-list-container" data-bind="template: { name: 'strategy-or-portfolio-template', foreach: strategies }"></div><div class="pad-20"><button data-bind="click: addStrategy">Incluir outra carteira ou estratégia</button></div></script><script type="text/html" id="new-strategy-with-full-history-template"><div class="strategies-list-container" data-bind="template: { name: 'strategy-or-portfolio-template', foreach: strategies }"></div><div class="pad-20"><button data-bind="click: addStrategy">Incluir outra carteira ou estratégia</button></div></script><script type="text/html" id="new-strategy-root-template"><div class="pad-10 pad-top-20">Há duas maneiras de cadastrar uma carteira ou estratégia para acompanhamento:</div><div class="flex-horizontal flex-gap-20 pad-10"><div>1) A forma mais indicada é registrar todas operações realizadas. Isso permite a geração de relatórios completos de resultados por estratégia e por mês, além da visualização do histórico ordenado de operações e rolagens. Eventos como agrupamentos, bonificações e desdobramentos serão tratados automaticamente. <br><br> RECOMENDADA PARA: Todas novas operações e todas operações antigas que se tenha o histórico registrado (em planilhas, notas de corretagem, etc). <br><br><p><label><input type="radio" name="new-strategy-component" value="new-strategy-with-full-history" data-bind="checked: newStrategyComponent"> Cadastrar carteira / estratégia com histórico de operações</label></p></div><div>2) A segunda forma, que só deve ser utilizada caso não se tenha o histórico de operações realizadas, é cadastrar apenas a posição atual. Nesse caso, apenas os dados recentes conseguem ser acompanhados, perdendo-se a capacidade de geração dos relatórios de resultados e acompanhamento de rolagens. <br><br> RECOMENDADA PARA: Carteiras muito antigas das quais não se possui o histórico de operações ou para o simples acompanhamento de ativos numa carteira 'atemporal'. <br><br><p><label><input type="radio" name="new-strategy-component" value="new-strategy-with-editable-positions" data-bind="checked: newStrategyComponent"> Cadastrar carteira / estratégia simplificada</label></p></div></div><div data-bind="component: newStrategyComponent"></div></script><script type="text/html" id="toggle-view-mode-template"><span data-bind="visible: ko.unwrap(positions_open_or_with_realized_pnl).length === 0">Histórico de operações</span> <select data-bind="visible: ko.unwrap(positions_open_or_with_realized_pnl).length > 0, value: viewMode"><option value="DETAILED_OPERATIONS_HISTORY">Histórico de operações</option><option value="CURRENT_POSITION">Posição atual</option></select></script><script type="text/html" id="show-edit-op-template"><div class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(allow_edit) || ! ko.unwrap(edit), click: function(p, e) { if (ko.unwrap(allow_edit) &amp;&amp; typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: ko.unwrap(value) === 'B' ? 'Bonificação' : ko.unwrap(value) === 'D' ? 'Desdobramento' : ko.unwrap(value) === 'E' ? 'Expiração' : ko.unwrap(value) === 'F' ? 'Cisão' : ko.unwrap(value) === 'G' ? 'Grupamento' : ko.unwrap(value) === 'I' ? 'Incorporação' : ko.unwrap(value) === 'R' ? 'Cisão' :  ko.unwrap(value) === 'S' ? 'Conversão' :  ko.unwrap(value) === 'T' ? 'Novo ticker' :  ko.unwrap(value) === 'C' ? ($data['imperative'] ? 'Comprar' : 'Compra') : (ko.unwrap(value) === 'V' ? ($data['imperative'] ? 'Vender' : 'Venda') : '') "></div><select data-bind="visible: ko.unwrap(allow_edit) &amp;&amp; ko.unwrap(edit), event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(value)) }, change: function() { if (typeof $data.edit === 'function') $data.edit(false) } }, value: value"><option value=""></option><option value="C" data-bind="text: $data['imperative'] ? 'Comprar' : 'Compra'"></option><option data-bind="visible: ko.unwrap(op_group_type) === 'E'" value="E">Expiração</option><option value="V" data-bind="text: $data['imperative'] ? 'Vender' : 'Venda'"></option></select></script><script type="text/html" id="show-edit-op-group-archive-template"><span class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(allow_edit) || ! ko.unwrap(edit), click: function(p, e) { if (ko.unwrap(allow_edit) &amp;&amp; typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: ko.unwrap(value) == 'N' ? 'Não' : (ko.unwrap(value) == 'S' ? 'Sim' : 'Automático') "></span> <select data-bind="visible: ko.unwrap(allow_edit) &amp;&amp; ko.unwrap(edit), event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(false) }, change: function() { if (typeof $data.edit === 'function') $data.edit(false) } }, value: value"><option value="A">Automático</option><option value="N">Não</option><option value="S">Sim</option></select></script><script type="text/html" id="show-edit-op-group-description-template"><div class="readonly-textarea" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(allow_edit) || ! ko.unwrap(edit), click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); }, text: value"></div><input type="text" style="width: 100%" data-bind="visible: ko.unwrap(allow_edit) &amp;&amp; ko.unwrap(edit) &amp;&amp; rows() === 1, attr: { tabindex: ko.unwrap(edit) ? 0 : -1 }, event: { blur: function(p) { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(p.value)) }, keyup: function(p, e) { if (typeof $data.edit === 'function' &amp;&amp; e.key === 'Enter' &amp;&amp; ko.unwrap(p.value)) $data.edit(false) } }, textInput: value"> <textarea style="width: 100%; height: 100%; min-height: 32px; resize: vertical" data-bind="visible: ko.unwrap(allow_edit) &amp;&amp; ko.unwrap(edit) &amp;&amp; rows() > 1, textInput: value, event: { blur: function(p) { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(p.value)) } }"></textarea></script><script type="text/html" id="show-value-template"><span style="padding-left: 3px; padding-right: 3px" data-bind="text: value"></span></script><script type="text/html" id="show-decimal-template"><span style="padding-left: 3px; padding-right: 3px" data-bind="brFormattedDecimal: { value: value, maxDecimalPlaces: maxDecimalPlaces }"></span></script><script type="text/html" id="show-underlying-avg-price-template"><abbr title="Preço médio considerando eventos corporativos e exercícios de opções. Não considera operações com opções zeradas ou expiradas."><span style="padding-left: 3px; padding-right: 3px" data-bind="brFormattedDecimal: { value: value, maxDecimalPlaces: maxDecimalPlaces }"></span></abbr></script><script type="text/html" id="show-integer-template"><span style="padding-left: 3px; padding-right: 3px" data-bind="brFormattedInteger: value"></span></script><script type="text/html" id="show-edit-date-template"><span data-bind="visible: ! ko.unwrap(edit), text: value, click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); if (!ko.unwrap($data.edit)) return; } "></span> <input type="text" class="edit-date-input" maxlength="10" data-bind="visible: ko.unwrap(edit), attr: { readonly: ! ko.unwrap(edit), tabindex: ko.unwrap(edit) ? 0 : -1 }, click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); e.target.select(); }, event: { blur: function(p) { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(p.value)) } }, datepickermask: value"></script><script type="text/html" id="show-edit-decimal-template"><span data-bind="visible: ! ko.unwrap(allow_edit), brFormattedDecimal: { maxDecimalPlaces: $data.maxDecimalPlaces || 2, value: value } "></span> <!-- USAR 'autosize' no input --> <input type="text" data-bind="visible: ko.unwrap(allow_edit), attr: { readonly: ! ko.unwrap(edit), tabindex: ko.unwrap(edit) ? 0 : -1 }, click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); if (!ko.unwrap($data.edit)) return; e.target.focus(); e.target.select(); }, event: { blur: function(p) { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(p.value)) }, keyup: function(p, e) { if (typeof $data.edit === 'function' &amp;&amp; e.key === 'Enter' &amp;&amp; ko.unwrap(p.value)) $data.edit(false); } }, brFormattedDecimal: { maxDecimalPlaces: $data.maxDecimalPlaces || 2, value: value }"></script><script type="text/html" id="show-edit-integer-template"><span data-bind="visible: ! ko.unwrap(allow_edit), brFormattedInteger: value "></span> <!-- USAR 'autosize' no input --> <input type="text" maxlength="13" data-bind="visible: ko.unwrap(allow_edit), attr: { readonly: ! ko.unwrap(edit), tabindex: ko.unwrap(edit) ? 0 : -1 }, click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); if (!ko.unwrap($data.edit)) return; e.target.focus(); e.target.select(); }, event: { blur: function(p) { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(p.value)) }, keyup: function(p, e) { if (typeof $data.edit === 'function' &amp;&amp; e.key === 'Enter' &amp;&amp; ko.unwrap(p.value)) $data.edit(false); } }, brFormattedInteger: value "></script><script type="text/html" id="show-edit-boolean-with-select-template"><span data-bind="text: label"></span> <span class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(edit) &amp;&amp; ko.unwrap(value) !== null &amp;&amp; ko.unwrap(value) !== '' &amp;&amp; typeof ko.unwrap(value) !== 'undefined', click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: ko.unwrap(value) === true || ko.unwrap(value) === 'true' ? 'Sim' : ( ko.unwrap(value) === false || ko.unwrap(value) === 'false' ? 'Não' : '') "></span> <select data-bind="visible: ko.unwrap(value) === null || ko.unwrap(value) === '' || typeof ko.unwrap(value) === 'undefined' || ko.unwrap(edit), event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(mUtils.undefinedNullOrEmpty(ko.unwrap(value))) }, change: function() { if (typeof $data.edit === 'function') $data.edit(mUtils.undefinedNullOrEmpty(ko.unwrap(value))) } }, booleanValue: value"><option data-bind="visible: $data.nullable, text: $data.optionsCaption || ''" value=""></option><option value="false">Não</option><option value="true">Sim</option></select></script><script type="text/html" id="show-edit-exchange-or-country-template"><span>Ativos: </span> <span class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(allow_edit) || ! ko.unwrap(edit), click: function(p, e) { if (!ko.unwrap(allow_edit)) return; if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: ( ko.unwrap(exchange_or_country) == 2 ? 'US' : 'B3') "></span> <select data-bind="visible: ko.unwrap(allow_edit) &amp;&amp; ko.unwrap(edit), event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(false) }, change: function() { if (typeof $data.edit === 'function') $data.edit(false) } }, value: exchange_or_country"><option value="1">B3</option><option value="2">US</option></select></script><script type="text/html" id="show-edit-privacy-template">Privacidade: <span class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(edit), click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: ko.unwrap(value) == '2' ? 'Pública' : (ko.unwrap(value) == '1' ? 'Restrita' : 'Privada') "></span> <select data-bind="visible: edit, event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(false) }, change: function() { if (typeof $data.edit === 'function') $data.edit(false) } }, value: value"><option value="0">Privada</option><option value="2">Pública</option></select></script><script type="text/html" id="show-edit-broker-template"><div class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(edit), click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: market.brokersById[ko.unwrap(broker_id)] "></div><select data-bind="visible: ko.unwrap(edit), event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(broker_id)) }, change: function() { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(broker_id)) } }, options: $data.brokersList || market.userBrokersList, optionsCaption: $data.optionsCaption || '', optionsText: 'shortName', optionsValue: 'id', value: broker_id"></select></script><script type="text/html" id="show-edit-strategy-or-portfolio-flag-template">Tipo: <span class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(edit), click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: ko.unwrap(value) == 'P' ? 'Carteira' : (ko.unwrap(value) == 'S' ? 'Estratégia' : 'Automático') "></span> <select data-bind="visible: edit, event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(false) }, change: function() { if (typeof $data.edit === 'function') $data.edit(false) } }, value: value"><option value="A">Automático</option><option value="P">Carteira</option><option value="S">Estratégia</option></select></script><script type="text/html" id="show-edit-strategy-or-portfolio-archive-template">Arquivar: <span class="readonly-select" style="width: 100%; height: 100%" data-bind="visible: ! ko.unwrap(edit), click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, text: ko.unwrap(value) == 'N' ? 'Não' : (ko.unwrap(value) == 'S' ? 'Sim' : (ko.unwrap(value) == 'G' ? 'Por grupo' : 'Automático')) "></span> <select data-bind="visible: edit, event: { blur: function() { if (typeof $data.edit === 'function') $data.edit(false) }, change: function() { if (typeof $data.edit === 'function') $data.edit(false) } }, value: value"><option value="A">Automático</option><option value="G">Por grupo</option><option value="N">Não</option><option value="S">Sim</option></select></script><script type="text/html" id="show-edit-strategy-title-template"><!-- USAR 'autosize' no input --> <input class="strategy-title" type="text" maxlength="250" placeholder="Título da carteira ou estratégia" data-bind="attr: { size: ko.unwrap(value) ? Math.min(50, Math.max(10, ko.unwrap(value).length)) : 20,  readonly: ! ko.unwrap(edit), tabindex: ko.unwrap(edit) ? 0 : -1 }, click: function(p, e) { if (typeof $data.edit === 'function') $data.edit(true); e.target.focus(); }, event: { blur: function(p) { if (typeof $data.edit === 'function') $data.edit(!ko.unwrap(p.value)) }, keyup: function(p, e) { if (typeof $data.edit === 'function' &amp;&amp; e.key === 'Enter' &amp;&amp; ko.unwrap(p.value)) $data.edit(false) } }, textInput: value "></script><script type="text/html" id="strategy-execution-history-template"><div class="ovfl-x-auto"><table class="default-table-styles default-align-right execution-history-table"><thead><tr><th class="col-add-remove-op" rowspan="2"><button class="small-cmd" tabindex="-1" data-bind="visible: ko.unwrap(archive_user_option) !== 'S' || archive !== 'S', click: addOperationsGroup">+</button></th><th class="col-op-group-description" rowspan="2">Descrição do evento ou <br> grupo de operações</th><th class="col-op-group-archive" rowspan="2" data-bind="visible: ko.unwrap(archive_user_option) === 'G'">Arquivar</th><th class="col-add-remove-op"></th><th data-bind="attr: { colspan: anyOperationHasOption() ? 8 : 2 }">Operações</th><th colspan="3" data-bind="visible: ko.unwrap(allowShowPlanned) &amp;&amp; ko.unwrap(show_planned)">Dados da simulação</th><th colspan="5">Quantidades e preços efetivamente executados</th><th data-bind="visible: false" rowspan="2">id</th><th rowspan="2" data-bind="visible: anyError">Erros</th><th class="col-cumulative-qty" rowspan="2" data-bind="visible: show_every_operation_result">Qtd acumulada</th><th class="col-cumulative-avg-price" rowspan="2" data-bind="visible: show_every_operation_result">Pr. médio após operação <!-- <abbr title="calculadas a partir da nota de corretagem">(incluindo taxas)</abbr> --></th><th class="col-op-pnl" rowspan="2" data-bind="visible: show_every_operation_result">Lucro bruto / prejuízo</th><th data-bind="visible: show_fees" colspan="2">Taxas CBLC</th><th data-bind="visible: show_fees" colspan="3">Taxas B3</th><th data-bind="visible: show_fees" colspan="2">Taxas corretora</th><th data-bind="visible: show_fees" colspan="2">Impostos</th></tr><tr><th></th><th class="col-op">Tipo</th><th class="col-ticker">Ativo</th><th data-bind="visible: anyOperationHasOption">Tipo</th><th class="col-expiration" data-bind="visible: anyOperationHasOption">Vencimento</th><th class="col-dc" data-bind="visible: anyOperationHasOption">D.C.</th><th class="col-du" data-bind="visible: anyOperationHasOption">D.U.</th><th class="col-mod" data-bind="visible: anyOperationHasOption">Mod.</th><th class="col-strike" data-bind="visible: anyOperationHasOption">Strike</th><th class="col-planned-qty" data-bind="visible: ko.unwrap(allowShowPlanned) &amp;&amp; ko.unwrap(show_planned)">Qtd</th><th class="col-planned-avg-price" data-bind="visible: ko.unwrap(allowShowPlanned) &amp;&amp; ko.unwrap(show_planned)">Pr. médio</th><th class="col-planned-total" data-bind="visible: ko.unwrap(allowShowPlanned) &amp;&amp; ko.unwrap(show_planned)">Total</th><th class="col-exec-qty">Qtd</th><th class="col-exec-avg-price">Pr. médio</th><th class="col-exec-total">Total</th><th class="col-exec-date">Data</th><th class="col-note-number">N&ordm; nota negoc.</th><th class="col-fee-tax" data-bind="visible: show_fees"><abbr title="Liquidação">Liquid.</abbr></th><th class="col-fee-tax" data-bind="visible: show_fees">Registro</th><th class="col-fee-tax" data-bind="visible: show_fees">Termo / opções</th><th class="col-fee-tax" data-bind="visible: show_fees">A.N.A.</th><th class="col-fee-tax" data-bind="visible: show_fees"><abbr title="Emolumentos">Emol.</abbr></th><th class="col-fee-tax" data-bind="visible: show_fees"><abbr title="Corretagem">Corret.</abbr></th><th class="col-fee-tax" data-bind="visible: show_fees">Outras</th><th class="col-fee-tax" data-bind="visible: show_fees">ISS</th><th class="col-fee-tax" data-bind="visible: show_fees">I.R.R.F.</th></tr></thead><tbody data-bind="foreach: { data: op_groups, trackBy: 'id' }"><tr data-bind="attr: { 'data-op_group_id': id }, style: { 'background-color': $index() % 2 ? '#282828' : '' }, visible: ! $parent.hide_groups_where_all_ops_expired() || ! allOpsExpired()"><td data-bind="attr: { rowspan: rowspan }"><button class="small-cmd" tabindex="-1" data-bind="visible: ko.unwrap(archive) !== 'S' &amp;&amp; ko.unwrap(allow_edit) &amp;&amp; $index() > 0, click: $parent.removeOperationsGroup">-</button><span data-bind="visible: false, text: id"></span></td><td class="align-left" data-bind="attr: { rowspan: rowspan }, template: { name: 'show-edit-op-group-description-template', data: { allow_edit: allow_edit, edit: ! ko.unwrap(allow_edit) ? false : edit_description, rows: rowspan, value: description }}"></td><td class="align-left" data-bind="visible: ko.unwrap($parent.archive_user_option) === 'G', attr: { rowspan: rowspan }, template: { name: 'show-edit-op-group-archive-template', data: { allow_edit: allow_edit, edit: edit_archive, rows: rowspan, value: archive_user_option }}"></td><td data-bind="attr: { 'data-op_id': operations()[0].id }"><button class="small-cmd" tabindex="-1" data-bind="visible: ko.unwrap(archive) !== 'S' &amp;&amp; ko.unwrap(allow_edit), click: addOperation">+</button></td><td class="align-left" data-bind="template: { name: 'show-edit-op-template', data: { op_group_type: type, allow_edit: operations()[0].archive !== 'S' &amp;&amp; ! corporateEventsTypes.includes(ko.unwrap(type)), edit: operations()[0].archive === 'S' || corporateEventsTypes.includes(ko.unwrap(type)) ? false : operations()[0].edit_op, value: operations()[0].op }}"></td><td class="align-left col-ticker"><span data-bind="visible: operations()[0].archive === 'S', text: operations()[0].asset_ticker"></span> <input type="text" class="uppercase" data-bind="visible: operations()[0].archive === 'N', style: { 'background-color': ko.unwrap(operations()[0].asset_ticker) &amp;&amp; ! ko.unwrap(operations()[0].asset_isValid) ? '#424100' : '' }, attr: { readonly: ! ko.unwrap(operations()[0].edit_asset), tabindex: ko.unwrap(operations()[0].edit_asset) ? 0 : -1 }, click: function(p, e) { if (corporateEventsTypes.includes(ko.unwrap(operations()[0].op)) ) return false; if (typeof operations()[0].edit_asset === 'function') operations()[0].edit_asset(true); e.target.focus(); }, event: { blur: operations()[0].onBlur, keyup: operations()[0].onKeyup }, textInput: operations()[0].asset_ticker "><div class="align-center" data-bind="visible: operations()[0].asset_is_option_exercise">(<span data-bind="text: ko.unwrap(operations()[0].asset) &amp;&amp; ko.unwrap(operations()[0].asset).u"></span>)</div></td><td class="align-center" data-bind="visible: $parent.anyOperationHasOption, text: ko.unwrap(operations()[0].asset) &amp;&amp; (mUtils.isCall(ko.unwrap(operations()[0].asset)) ? 'CALL' : (mUtils.isPut(ko.unwrap(operations()[0].asset)) ? 'PUT' : '')) "></td><td class="col-expiration" data-bind="visible: $parent.anyOperationHasOption, text: ko.unwrap(operations()[0].asset) &amp;&amp; ko.unwrap(operations()[0].asset).e"></td><td data-bind="visible: $parent.anyOperationHasOption, text: ko.unwrap(operations()[0].asset) &amp;&amp; ko.unwrap(operations()[0].asset).dc"></td><td data-bind="visible: $parent.anyOperationHasOption, text: ko.unwrap(operations()[0].asset) &amp;&amp; ko.unwrap(operations()[0].asset).du"></td><td class="align-center" data-bind="visible: $parent.anyOperationHasOption, text: ko.unwrap(operations()[0].asset) &amp;&amp; ko.unwrap(operations()[0].asset).m">.</td><td data-bind="visible: $parent.anyOperationHasOption, brFormattedDecimal: $parent.anyOperationHasOption() &amp;&amp; ko.unwrap(operations()[0].asset) &amp;&amp; ko.unwrap(operations()[0].asset).getStrikeAt &amp;&amp; ko.unwrap(operations()[0].asset).getStrikeAt(operations()[0].executed &amp;&amp; ko.unwrap(operations()[0].executed.date))"></td><td data-bind="css: { 'hover-bg-303030': ! corporateEventsTypes.includes(ko.unwrap(type)) &amp;&amp; ko.unwrap(operations()[0].planned.total_qty), 'cursor-pointer': ! corporateEventsTypes.includes(ko.unwrap(type)) &amp;&amp; ko.unwrap(operations()[0].planned.total_qty) }, visible: ko.unwrap($parent.allowShowPlanned) &amp;&amp; ko.unwrap($parent.show_planned), click: function() { if ( corporateEventsTypes.includes(ko.unwrap(type)) ) return false; if (ko.unwrap(operations()[0].planned.total_qty)) $data.operations()[0].executed.total_qty(ko.unwrap(operations()[0].planned.total_qty)) }, brFormattedInteger: { value: ['B', 'D', 'F', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap(type)) ? undefined : operations()[0].planned &amp;&amp; operations()[0].planned.total_qty } "></td><td data-bind="css: { 'hover-bg-303030': ! corporateEventsTypes.includes(ko.unwrap(type)) &amp;&amp; ko.unwrap(operations()[0].planned.avg_unit_price), 'cursor-pointer': ! corporateEventsTypes.includes(ko.unwrap(type)) &amp;&amp; ko.unwrap(operations()[0].planned.avg_unit_price) }, visible: ko.unwrap($parent.allowShowPlanned) &amp;&amp; ko.unwrap($parent.show_planned), click: function() { if ( corporateEventsTypes.includes(ko.unwrap(type)) ) return false; if (ko.unwrap(operations()[0].planned.avg_unit_price)) $data.operations()[0].executed.avg_unit_price(ko.unwrap(operations()[0].planned.avg_unit_price)) }, brFormattedDecimal: { maxDecimalPlaces: 4, value: corporateEventsTypes.includes(ko.unwrap(type)) ? undefined : operations()[0].planned &amp;&amp; operations()[0].planned.avg_unit_price }"></td><td data-bind="css: { 'hover-bg-303030': ! corporateEventsTypes.includes(ko.unwrap(type)) &amp;&amp; ko.unwrap(operations()[0].planned.total_qty) &amp;&amp; ko.unwrap(operations()[0].planned.avg_unit_price), 'cursor-pointer': ! corporateEventsTypes.includes(ko.unwrap(type)) &amp;&amp; ko.unwrap(operations()[0].planned.total_qty) &amp;&amp; ko.unwrap(operations()[0].planned.avg_unit_price) }, visible: ko.unwrap($parent.allowShowPlanned) &amp;&amp; ko.unwrap($parent.show_planned), click: function() { if ( corporateEventsTypes.includes(ko.unwrap(type)) ) return false; if (ko.unwrap(operations()[0].planned.total_qty) &amp;&amp; ko.unwrap(operations()[0].planned.avg_unit_price)) { $data.operations()[0].executed.total_qty(ko.unwrap(operations()[0].planned.total_qty)); $data.operations()[0].executed.avg_unit_price(ko.unwrap(operations()[0].planned.avg_unit_price)); } }, brFormattedDecimal: { value: corporateEventsTypes.includes(ko.unwrap(type)) ? undefined : operations()[0].planned.total }"></td><td data-bind="template: { name: ko.unwrap(type) === 'E' ? 'show-integer-template' : ['B', 'D', 'F', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap(type)) ? 'show-value-template' : 'show-edit-integer-template', data: { allow_edit: ! corporateEventsTypes.includes(ko.unwrap(type)), edit: corporateEventsTypes.includes(ko.unwrap(type)) ? false : operations()[0].executed.edit_total_qty, value: ['B', 'D', 'F', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap(type)) ? operations()[0].executed.formatted_qty : operations()[0].executed.total_qty } }"></td><td data-bind="template: { name: ko.unwrap(type) === 'B' || ko.unwrap(operations()[0].asset_is_option_exercise) ? 'show-decimal-template' : ['C', 'V'].includes(ko.unwrap(operations()[0].op)) || ! ko.unwrap(operations()[0].op) ? 'show-edit-decimal-template' : 'empty-template', data: { allow_edit: ! corporateEventsTypes.includes(ko.unwrap(type)), edit: corporateEventsTypes.includes(ko.unwrap(type)) ? false : operations()[0].executed.edit_avg_unit_price, value: ['D', 'F', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap(type)) ? undefined : ko.unwrap(operations()[0].asset_isValid) &amp;&amp; ko.unwrap(operations()[0].asset_is_option_exercise) ? ko.unwrap(operations()[0].asset).getStrikeAt(operations()[0].executed &amp;&amp; ko.unwrap(operations()[0].executed.date)) : operations()[0].executed.avg_unit_price, maxDecimalPlaces: 4 } }"></td><td data-bind="brFormattedDecimal: { value: corporateEventsTypes.includes(ko.unwrap(type)) ? undefined : operations()[0].executed.total }, css: { 'color-red': ko.unwrap(operations()[0].op) === 'C', 'color-green': ko.unwrap(operations()[0].op) === 'V' }"></td><td class="align-center" data-bind="template: { name: corporateEventsTypes.includes(ko.unwrap(type)) ? 'show-value-template' : 'show-edit-date-template', data: { edit: corporateEventsTypes.includes(ko.unwrap(type)) ? false : operations()[0].executed.edit_date, value: operations()[0].executed.date_ddMMyyyy } }"></td><td class="col-note-number" data-bind="template: { name: ['C', 'V'].includes(ko.unwrap(operations()[0].op)) || ! ko.unwrap(operations()[0].op) ? 'show-edit-integer-template' : 'empty-template', data: { allow_edit: true, edit: ['C', 'V'].includes(ko.unwrap(operations()[0].op)) || ! ko.unwrap(operations()[0].op) ? operations()[0].executed.edit_brokerage_note_number : false, value: ['C', 'V'].includes(ko.unwrap(operations()[0].op)) ? operations()[0].executed &amp;&amp; operations()[0].executed.brokerage_note_number : undefined } }"></td><td class="yellow" data-bind="visible: $parent.anyError, text: operations()[0].errorMessage"></td><td data-bind="visible: $parent.show_every_operation_result, brFormattedInteger: operations()[0].cumulative_qty, css: { 'color-red': ko.unwrap(operations()[0].cumulative_qty) &lt; 0 }"></td><td data-bind="visible: $parent.show_every_operation_result, brFormattedDecimal: { maxDecimalPlaces: 4, value: operations()[0].cumulative_avg_unit_price }"></td><td data-bind="visible: $parent.show_every_operation_result, brFormattedDecimal: operations()[0].pnl_realized, css: { 'color-red': ko.unwrap(operations()[0].pnl_realized) &lt;= -0.01, 'color-green' : ko.unwrap(operations()[0].pnl_realized) >= 0.01 }"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td><td data-bind="visible: $parent.show_fees"></td></tr><!--ko foreach: { data: operations().slice(1), trackBy: 'id' }--><tr data-bind="style: { 'background-color': $parentContext.$index() % 2 ? '#282828' : '' }, visible: ! $parents[1].hide_groups_where_all_ops_expired() || ! $parent.allOpsExpired()"><td data-bind="attr: { 'data-op_id': id }"><button class="small-cmd" tabindex="-1" data-bind="visible: ko.unwrap($parent.archive) !== 'S' &amp;&amp; ko.unwrap($parent.allow_edit) &amp;&amp; $parent.operations().length > 1, click: $parent.removeOperation">-</button></td><td class="align-left" data-bind="template: { name: 'show-edit-op-template', data: { op_group_type: $parent.type, allow_edit: archive !== 'S' &amp;&amp; ! corporateEventsTypes.includes(ko.unwrap($parent.type)), edit: archive === 'S' || corporateEventsTypes.includes(ko.unwrap($parent.type)) ? false : edit_op, value: op }}"></td><td class="align-left col-ticker"><span data-bind="visible: archive === 'S', text: asset_ticker"></span> <input type="text" class="uppercase" data-bind="visible: archive === 'N', style: { 'background-color': ko.unwrap(asset_ticker) &amp;&amp; ! ko.unwrap(asset_isValid) ? '#424100' : '' }, attr: { readonly: ! ko.unwrap(edit_asset), tabindex: ko.unwrap(edit_asset) ? 0 : -1 }, click: function(p, e) { if (corporateEventsTypes.includes(ko.unwrap(op)) ) return false; if (typeof $data.edit_asset === 'function') $data.edit_asset(true); e.target.focus(); }, event: { blur: onBlur, keyup: onKeyup }, textInput: asset_ticker "><div class="align-center" data-bind="visible: asset_is_option_exercise">(<span data-bind="text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).u"></span>)</div></td><td class="align-center" data-bind="visible: $parents[1].anyOperationHasOption, text: ko.unwrap(asset) &amp;&amp; (mUtils.isCall(ko.unwrap(asset)) ? 'CALL' : (mUtils.isPut(ko.unwrap(asset)) ? 'PUT' : ''))"></td><td class="col-expiration" data-bind="visible: $parents[1].anyOperationHasOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).e"></td><td data-bind="visible: $parents[1].anyOperationHasOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).dc"></td><td data-bind="visible: $parents[1].anyOperationHasOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).du"></td><td class="align-center" data-bind="visible: $parents[1].anyOperationHasOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).m"></td><td data-bind="visible: $parents[1].anyOperationHasOption, brFormattedDecimal: $parents[1].anyOperationHasOption() &amp;&amp; ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).getStrikeAt &amp;&amp; ko.unwrap(asset).getStrikeAt(executed &amp;&amp; ko.unwrap(executed.date))"></td><td data-bind="css: { 'hover-bg-303030': ! corporateEventsTypes.includes(ko.unwrap($parent.type)) &amp;&amp; ko.unwrap(planned.total_qty), 'cursor-pointer': ! corporateEventsTypes.includes(ko.unwrap($parent.type)) &amp;&amp; ko.unwrap(planned.total_qty) }, visible: ko.unwrap($parents[1].allowShowPlanned) &amp;&amp; ko.unwrap($parents[1].show_planned), click: function() { if ( corporateEventsTypes.includes(ko.unwrap($parent.type)) ) return false; if (ko.unwrap(planned.total_qty)) $data.executed.total_qty(ko.unwrap(planned.total_qty)) }, brFormattedInteger: ['B', 'D', 'F', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap($parent.type)) ? undefined : planned &amp;&amp; planned.total_qty"></td><td data-bind="css: { 'hover-bg-303030': ! corporateEventsTypes.includes(ko.unwrap($parent.type)) &amp;&amp; ko.unwrap(planned.avg_unit_price), 'cursor-pointer': ! corporateEventsTypes.includes(ko.unwrap($parent.type)) &amp;&amp; ko.unwrap(planned.avg_unit_price) }, visible: ko.unwrap($parents[1].allowShowPlanned) &amp;&amp; ko.unwrap($parents[1].show_planned), click: function() { if ( corporateEventsTypes.includes(ko.unwrap($parent.type)) ) return false; if (ko.unwrap(planned.avg_unit_price)) $data.executed.avg_unit_price(ko.unwrap(planned.avg_unit_price)) }, brFormattedDecimal: { maxDecimalPlaces: 4, value: corporateEventsTypes.includes(ko.unwrap($parent.type)) ? undefined : planned &amp;&amp; planned.avg_unit_price }"></td><td data-bind="css: { 'hover-bg-303030': ! corporateEventsTypes.includes(ko.unwrap($parent.type)) &amp;&amp; ko.unwrap(planned.total_qty) &amp;&amp; ko.unwrap(planned.avg_unit_price), 'cursor-pointer': ! corporateEventsTypes.includes(ko.unwrap($parent.type)) &amp;&amp; ko.unwrap(planned.total_qty) &amp;&amp; ko.unwrap(planned.avg_unit_price) }, visible: ko.unwrap($parents[1].allowShowPlanned) &amp;&amp; ko.unwrap($parents[1].show_planned), click: function() { if ( corporateEventsTypes.includes(ko.unwrap($parent.type)) ) return false; if (ko.unwrap(planned.total_qty) &amp;&amp; ko.unwrap(planned.avg_unit_price)) { $data.executed.total_qty(ko.unwrap(planned.total_qty)); $data.executed.avg_unit_price(ko.unwrap(planned.avg_unit_price)); } }, brFormattedDecimal: corporateEventsTypes.includes(ko.unwrap($parent.type)) ? undefined : planned &amp;&amp; planned.total"></td><td data-bind="template: { name: ko.unwrap($parent.type) === 'E' ? 'show-integer-template' : ['B', 'D', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap($parent.type)) ? 'show-value-template' : 'show-edit-integer-template', data: { allow_edit: ! corporateEventsTypes.includes(ko.unwrap($parent.type)), edit: corporateEventsTypes.includes(ko.unwrap($parent.type)) ? false : executed.edit_total_qty, value: ['B', 'D', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap($parent.type)) ? executed.formatted_qty : executed.total_qty } }"></td><td data-bind="template: { name: ko.unwrap($parent.type) === 'B' || ko.unwrap(asset_is_option_exercise) ? 'show-decimal-template' : ['C', 'V'].includes(ko.unwrap(op)) || ! ko.unwrap(op) ? 'show-edit-decimal-template' : 'empty-template', data: { allow_edit: ! corporateEventsTypes.includes(ko.unwrap($parent.type)), edit: corporateEventsTypes.includes(ko.unwrap($parent.type)) ? false : executed.edit_avg_unit_price, value: ['D', 'F', 'G', 'I', 'R', 'S', 'T'].includes(ko.unwrap($parent.type)) ? undefined : ko.unwrap(asset_isValid) &amp;&amp; ko.unwrap(asset_is_option_exercise) ? ko.unwrap(asset).getStrikeAt(executed &amp;&amp; ko.unwrap(executed.date)) : executed.avg_unit_price, maxDecimalPlaces: 4 } }"></td><td data-bind="brFormattedDecimal: corporateEventsTypes.includes(ko.unwrap($parent.type)) ? undefined : executed.total, css: { 'color-red': ko.unwrap(op) === 'C', 'color-green': ko.unwrap(op) === 'V' }"></td><td class="align-center" data-bind="template: { name: corporateEventsTypes.includes(ko.unwrap($parent.type)) ? 'show-value-template' : 'show-edit-date-template', data: { edit: corporateEventsTypes.includes(ko.unwrap($parent.type)) ? false : executed.edit_date, value: executed.date_ddMMyyyy } }"></td><td class="col-note-number" data-bind="template: { name: ['C', 'V'].includes(ko.unwrap(op)) || ! ko.unwrap(op) ? 'show-edit-integer-template' : 'empty-template', data: { allow_edit: true, edit: ['C', 'V'].includes(ko.unwrap(op)) || ! ko.unwrap(op) ? executed.edit_brokerage_note_number : false, value: ['C', 'V'].includes(ko.unwrap(op)) ? executed &amp;&amp; executed.brokerage_note_number : undefined } }"></td><td class="yellow" data-bind="visible: $parents[1].anyError, text: errorMessage"></td><td data-bind="visible: $parents[1].show_every_operation_result, brFormattedInteger: cumulative_qty, css: { 'color-red': ko.unwrap(cumulative_qty) &lt; 0 }"></td><td data-bind="visible: $parents[1].show_every_operation_result, brFormattedDecimal: { maxDecimalPlaces: 4, value: cumulative_avg_unit_price }"></td><td data-bind="visible: $parents[1].show_every_operation_result, brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td><td data-bind="visible: $parents[1].show_fees"></td></tr><!--/ko--></tbody><tfoot><tr><td></td><td colspan="3"></td><td></td><td class="align-left" data-bind="attr: { colspan: anyOperationHasOption() ? 8 : 2 }, text: exec_ops_count_text"></td><td data-bind="visible: ko.unwrap(allowShowPlanned) &amp;&amp; ko.unwrap(show_planned)" colspan="3"></td><td><abbr data-bind="brFormattedDecimal: { value: all_operations_balance, absoluteValue: true }, css: { 'color-red': ko.unwrap(all_operations_balance) &lt;= -0.01, 'color-green': ko.unwrap(all_operations_balance) >= 0.01 }, attr: { title: ko.unwrap(all_operations_balance) &lt;= 0 ? 'Custo de todas operações realizadas' : 'Saldo de todas operações realizadas' }"></abbr></td><td colspan="2"></td><td data-bind="visible: anyError"></td><td data-bind="visible: show_every_operation_result" colspan="2"></td><td data-bind="visible: show_every_operation_result"><abbr data-bind="brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }" title="Lucro / prejuízo bruto total já realizado"></abbr></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td><td data-bind="visible: show_fees"></td></tr></tfoot></table></div></script><script type="text/html" id="resulting-positions-table-template"><div class="ovfl-x-auto"><table class="default-table-styles default-align-right resulting-positions-table"><thead><tr><th data-bind="attr: { colspan: resultingPositionsHaveAnyOption() ? (has_full_history ? 14 : 15) : (has_full_history ? 4 : 5) }">Posição atual</th><th rowspan="2" data-bind="visible: anyError">Erros</th><th data-bind="visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; show_profit_loss_open()" colspan="2"><abbr title="Lucro / prejuízo realizável a mercado. Pode-se conseguir uma melhor execução.">Lucro / prejuízo realizável *</abbr></th><th class="col-pnl-realized" data-bind="visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; ko.unwrap(show_profit_loss_realized)" rowspan="2">Realizado (<span data-bind="text: currency"></span>)</th><th data-bind="visible: show_book, attr: bookHeaderAttributes">Book</th><th data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption()" colspan="4">Gregas</th><th data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()" colspan="6">Posições em aberto</th><th data-bind="visible: show_last" colspan="3">Último negócio</th><th data-bind="visible: show_intrinsic_extrinsic_values" colspan="2">VI e VE</th><th data-bind="visible: show_volume" colspan="2">Volume</th></tr><tr><th class="col-add-remove-op" data-bind="if: !has_full_history, visible: !has_full_history"><button class="small-cmd" tabindex="-1" data-bind="click: addPosition">+</button></th><th></th><th class="col-ticker cursor-pointer" data-bind="click: function() { sortBy(getAssetId) }">Ativo</th><th class="cursor-pointer" data-bind="click: function() { sortBy(getOptionKind) }, visible: resultingPositionsHaveAnyOption">Tipo</th><th class="col-expiration cursor-pointer" data-bind="click: function() { sortBy(getAssetExpirationDate) }, visible: resultingPositionsHaveAnyOption">Vencimento</th><th class="col-dc cursor-pointer" data-bind="click: function() { sortBy(getAssetExpirationDc) }, visible: resultingPositionsHaveAnyOption">D.C.</th><th class="col-du cursor-pointer" data-bind="click: function() { sortBy(getAssetExpirationDu) }, visible: resultingPositionsHaveAnyOption">D.U.</th><th class="col-fm cursor-pointer" data-bind="click: function() { sortBy(getAssetFM) }, visible: resultingPositionsHaveAnyOption">FM</th><th class="col-mod cursor-pointer" data-bind="click: function() { sortBy(getAssetMod) }, visible: resultingPositionsHaveAnyOption">Mod</th><th class="col-strike cursor-pointer" data-bind="click: function() { sortBy(getAssetStrike) }, visible: resultingPositionsHaveAnyOption">Strike</th><th class="cursor-pointer" data-bind="click: function() { sortBy(getAssetAIOTM) }, visible: resultingPositionsHaveAnyOption">A/I/OTM</th><th class="cursor-pointer" data-bind="click: function() { sortBy(getStrikeDistance) }, visible: resultingPositionsHaveAnyOption">Dist. (%) do Strike</th><th class="cursor-pointer" data-bind="click: function() { sortBy(getITMProb) }, visible: resultingPositionsHaveAnyOption">Prob. (%) de Exerc.</th><!-- <th data-bind="visible: resultingPositionsHaveAnyOption">Dist. (%)</th> --><th class="col-position-qty cursor-pointer" data-bind="click: function() { sortBy('qty') }">Qtd</th><th class="col-avg-price cursor-pointer" data-bind="click: function() { sortBy('avg_unit_price') }">Pr. médio</th><!-- abbr title="incluindo taxas da nota de corretagem">Pr. médio</abbr> --><th class="col-pnl-open-amount" data-bind="visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; show_profit_loss_open(), text: currency"></th><th class="col-pnl-open-percentage" data-bind="visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; show_profit_loss_open()">%</th><th class="col-book-qty" data-bind="visible: show_book() &amp;&amp; show_book_qty()">Qtd.</th><th class="col-book-vol" data-bind="visible: show_book() &amp;&amp; show_book_vol() &amp;&amp; resultingPositionsHaveAnyOption()">Vol.</th><th class="cols-bid-ask" data-bind="visible: show_book">Bid</th><th class="cols-bid-ask" data-bind="visible: show_book">Ask</th><th class="col-book-vol" data-bind="visible: show_book() &amp;&amp; show_book_vol() &amp;&amp; resultingPositionsHaveAnyOption()">Vol.</th><th class="col-book-qty" data-bind="visible: show_book() &amp;&amp; show_book_qty()">Qtd.</th><th class="col-greek" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption()">Delta</th><th class="col-greek" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption()">Gamma</th><th class="col-greek" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption()">Theta</th><th class="col-greek" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption()">Vega</th><th class="" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()">IQ</th><th class="" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()">Cob.</th><th class="" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()">Trav.</th><th class="" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()">Descob.</th><th class="" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()">Tit.</th><th class="" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()">Lanç.</th><th class="col-last-price" data-bind="visible: show_last">Preço</th><th class="col-last-change" data-bind="visible: show_last">Var (%)</th><th class="col-last-datetime" data-bind="visible: show_last">Data/hora</th><th class="col-vi" data-bind="visible: show_intrinsic_extrinsic_values">VI</th><th class="col-ve" data-bind="visible: show_intrinsic_extrinsic_values">VE</th><th class="col-num-negocios" data-bind="visible: show_volume"><span class="hidden-if-wgt-1600">Neg.</span><span class="hidden-if-wlt-1600">Negócios</span></th><th class="col-vol-financeiro" data-bind="visible: show_volume">Financeiro</th></tr></thead><tbody data-bind="foreach: { trackBy: 'id', data: ( has_full_history &amp;&amp; viewMode() === viewModes.CURRENT_POSITION &amp;&amp; ko.unwrap(show_profit_loss_realized) ) ? ko.unwrap(positions_open_or_with_realized_pnl) : ko.unwrap(positions) }"><tr data-bind="css: { 'not-selected': ! ko.unwrap(checked) }"><td data-bind="if: ! $parent.has_full_history, visible: ! $parent.has_full_history"><button class="small-cmd" tabindex="-1" data-bind="click: $parent.removePosition">-</button></td><td class="align-center"><input type="checkbox" data-bind="checked: checked"></td><td class="col-ticker align-left"><div data-bind="if: ! $parent.has_full_history"><input type="text" class="uppercase" data-bind="visible: ! $parent.has_full_history, style: { 'background-color': ko.unwrap(asset_ticker) &amp;&amp; ! ko.unwrap(asset_isValid) ? '#424100' : '' }, attr: { readonly: ! ko.unwrap(edit_asset), tabindex: ko.unwrap(edit_asset) ? 0 : -1 }, click: function(p, e) { if (typeof $data.edit_asset === 'function') $data.edit_asset(true); e.target.focus(); }, event: { blur: onBlur, keyup: onKeyup }, textInput: asset_ticker"></div><span data-bind="visible: $parent.has_full_history, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).t"></span></td><td class="align-center" data-bind="visible: $parent.resultingPositionsHaveAnyOption, text: $parent.getOptionKind($data)"></td><td class="col-expiration" data-bind="visible: $parent.resultingPositionsHaveAnyOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).e"></td><td data-bind="visible: $parent.resultingPositionsHaveAnyOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).dc"></td><td data-bind="visible: $parent.resultingPositionsHaveAnyOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).du"></td><td class="align-center" data-bind="visible: $parent.resultingPositionsHaveAnyOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).fm ? '✔' : ''"></td><td class="align-center" data-bind="visible: $parent.resultingPositionsHaveAnyOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).m"></td><td data-bind="visible: $parent.resultingPositionsHaveAnyOption, brFormattedDecimal: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).s"></td><td class="align-center" data-bind="visible: $parent.resultingPositionsHaveAnyOption, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).aiotm"></td><td data-bind="visible: $parent.resultingPositionsHaveAnyOption, brFormattedPercentage: { value: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).sd, maxDecimalPlaces: 2, appendPositiveSign: true }"></td><td data-bind="visible: $parent.resultingPositionsHaveAnyOption, brFormattedPercentage: { value: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).itmp, maxDecimalPlaces: 2 }"></td><!-- <td data-bind="visible: $parent.resultingPositionsHaveAnyOption"></td> --><td data-bind="css: { 'color-red': ko.unwrap(qty) &lt; 0 }, template: { name: $parent.has_full_history ? 'show-integer-template' : 'show-edit-integer-template', data: { allow_edit: ! $parent.has_full_history, edit: ! $parent.has_full_history ? $data.edit_qty : false, value: qty } }"></td><td data-bind="template: { name: $parent.has_full_history ? ( ko.unwrap(avg_unit_price) ? ( mUtils.isETForStock(ko.unwrap(asset)) ? 'show-underlying-avg-price-template' : 'show-decimal-template' ) : 'empty-template' ) : 'show-edit-decimal-template' , data: { allow_edit: ! $parent.has_full_history, edit: ! $parent.has_full_history ? $data.edit_avg_unit_price : false, value: avg_unit_price, maxDecimalPlaces: 4 } }"></td><td class="yellow" data-bind="visible: $parent.anyError, text: errorMessage"></td><td data-bind="visible: $parent.viewMode() === $parent.viewModes.CURRENT_POSITION &amp;&amp; $parent.show_profit_loss_open()"><abbr data-bind="brFormattedDecimal: pnl_open_amount, css: { 'color-red': ko.unwrap(pnl_open_amount) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount) >= 0.01 }" title="Lucro / prejuízo realizável a mercado considerando preço médio de aquisição do ativo. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: qty != 0 &amp;&amp; pnl_open_amount.hasValue()">*</span></td><td data-bind="visible: $parent.viewMode() === $parent.viewModes.CURRENT_POSITION &amp;&amp; $parent.show_profit_loss_open()"><abbr data-bind="brFormattedPercentage: { value: pnl_open_percentage, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(pnl_open_amount) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount) >= 0.01 }" title="Lucro / prejuízo percentual realizável a mercado considerando preço médio de aquisição do ativo. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: qty != 0 &amp;&amp; pnl_open_percentage.hasValue()">*</span></td><td data-bind="visible: $parent.viewMode() === $parent.viewModes.CURRENT_POSITION &amp;&amp; ko.unwrap($parent.show_profit_loss_realized), brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }"></td><td class="col-book-qty" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_qty(), brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).qb"></td><td class="align-center" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_vol() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedPercentage: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).l"></td><td class="align-center" data-bind="visible: $parent.show_book, brFormattedDecimal: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).b"></td><td class="align-center" data-bind="visible: $parent.show_book, brFormattedDecimal: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).a"></td><td class="align-center" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_vol() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedPercentage: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).j"></td><td class="col-book-qty" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_qty(), brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).qa"></td><td data-bind="visible: $parent.show_greeks() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 4, value: d }, css: { 'color-red': ko.unwrap(d) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_greeks() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 4, value: g }, css: { 'color-red': ko.unwrap(g) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_greeks() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 4, value: tf }, css: { 'color-red': ko.unwrap(tf) &lt;= -0.0001, 'color-green': ko.unwrap(tf) >= 0.0001 }"></td><td data-bind="visible: $parent.show_greeks() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 4, value: v }, css: { 'color-red': ko.unwrap(v) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_open_interest() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedDecimal: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).iq"></td><td data-bind="visible: $parent.show_open_interest() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).cov"></td><td data-bind="visible: $parent.show_open_interest() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).blk"></td><td data-bind="visible: $parent.show_open_interest() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).ucov"></td><td data-bind="visible: $parent.show_open_interest() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).tit"></td><td data-bind="visible: $parent.show_open_interest() &amp;&amp; $parent.resultingPositionsHaveAnyOption(), brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).lan"></td><td data-bind="visible: $parent.show_last, brFormattedDecimal: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).p"></td><td data-bind="visible: $parent.show_last, brFormattedPercentage: { value: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).c, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(asset) &amp;&amp; (ko.unwrap(ko.unwrap(asset).c) &lt;= -0.0001), 'color-green': ko.unwrap(asset) &amp;&amp; (ko.unwrap(ko.unwrap(asset).c) >= 0.0001) } "></td><td class="col-last-datetime" data-bind="visible: $parent.show_last, text: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).h &amp;&amp; mUtils.isoDateStringToDDMMString(ko.unwrap(ko.unwrap(asset).h), true)"></td><td data-bind="visible: $parent.show_intrinsic_extrinsic_values, brFormattedDecimal: vi"></td><td data-bind="visible: $parent.show_intrinsic_extrinsic_values, brFormattedDecimal: ve, css: { 'color-red': ko.unwrap(ve) &lt;= -0.01 }"></td><td data-bind="visible: $parent.show_volume, brFormattedInteger: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).n"></td><td data-bind="visible: $parent.show_volume, brFormattedDecimal: ko.unwrap(asset) &amp;&amp; ko.unwrap(asset).f"></td></tr></tbody><tfoot data-bind="visible: positions().length > 0 || ko.unwrap(show_profit_loss_realized)"><tr><td rowspan="2" data-bind="visible: ! has_full_history"></td><td rowspan="2"></td><td class="align-right" data-bind="attr: { colspan: resultingPositionsHaveAnyOption() ? 11 : 1, rowspan: ko.unwrap(selected_open_positions_cost) === ko.unwrap(all_operations_balance) ? 2 : 1 }"><abbr data-bind="visible: ko.unwrap(selected_open_positions_cost) !== ko.unwrap(all_operations_balance) &amp;&amp; ! resultingPositionsHaveAnyOption()" title="Custo / saldo das posições selecionadas considerando quantidades e preços médios">Pos. abertas</abbr><span data-bind="visible: ko.unwrap(selected_open_positions_cost) !== ko.unwrap(all_operations_balance) &amp;&amp; resultingPositionsHaveAnyOption()">Custo / saldo / lucro / prejuízo das posições selecionadas considerando qtds. e preços médios</span><span data-bind="visible: ko.unwrap(selected_open_positions_cost) === ko.unwrap(all_operations_balance)">Custo / saldo</span></td><td class="align-center" colspan="2" data-bind="attr: { rowspan: ko.unwrap(selected_open_positions_cost) === ko.unwrap(all_operations_balance) ? 2 : 1 }"><abbr data-bind="brFormattedDecimal: { value: selected_open_positions_cost, absoluteValue: true }, css: { 'color-red': ko.unwrap(selected_open_positions_cost) &lt;= -0.01, 'color-green': ko.unwrap(selected_open_positions_cost) >= 0.01 }, attr: { title: ko.unwrap(selected_open_positions_cost) &lt;= 0 ? 'Custo das posições selecionadas considerando quantidades e preços médios' : 'Saldo das posições selecionadas considerando quantidades e preços médios' }"></abbr></td><td rowspan="2" data-bind="visible: anyError"></td><td data-bind="attr: { rowspan: ko.unwrap(pnl_open_amount_ref_selected_open_positions) === ko.unwrap(pnl_open_amount_ref_all_operations) ? 2 : 1 }, visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; show_profit_loss_open()"><abbr data-bind="brFormattedDecimal: pnl_open_amount_ref_selected_open_positions, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_selected_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_selected_open_positions) >= 0.01 }" title="Lucro / prejuízo realizável a mercado considerando preço médio / lucro / prejuízo das posições selecionadas. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_amount_ref_selected_open_positions.hasValue()">*</span></td><td data-bind="attr: { rowspan: ko.unwrap(pnl_open_percentage_ref_selected_open_positions) === ko.unwrap(pnl_open_percentage_ref_all_operations) ? 2 : 1 }, visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; show_profit_loss_open()"><abbr data-bind="brFormattedPercentage: { value: pnl_open_percentage_ref_selected_open_positions, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_selected_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_selected_open_positions) >= 0.01 }" title="Lucro / prejuízo percentual realizável a mercado considerando preço médio / lucro / prejuízo das posições selecionadas. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_percentage_ref_selected_open_positions.hasValue()">*</span></td><td rowspan="2" data-bind="visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; ko.unwrap(show_profit_loss_realized)"><abbr data-bind="brFormattedDecimal: pnl_realized, css: { 'color-red': ko.unwrap(pnl_realized) &lt;= -0.01, 'color-green': ko.unwrap(pnl_realized) >= 0.01 }" title="Lucro / prejuízo total já realizado em R$"></abbr></td><td rowspan="2" data-bind="visible: show_book() &amp;&amp; show_book_qty()"></td><td rowspan="2" data-bind="visible: show_book() &amp;&amp; show_book_vol() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" class="align-center" colspan="2" data-bind="visible: show_book"><abbr data-bind="brFormattedDecimal: selected_open_positions_value, css: { 'color-red': ko.unwrap(selected_open_positions_value) &lt;= -0.01, 'color-green': ko.unwrap(selected_open_positions_value) >= 0.01 }" title="Valor das posições selecionadas a mercado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: selected_open_positions_value.hasValue()">*</span></td><td rowspan="2" data-bind="visible: show_book() &amp;&amp; show_book_vol() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" data-bind="visible: show_book() &amp;&amp; show_book_qty()"></td><td rowspan="2" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 2, value: delta_selected_positions }, css: { 'color-red': ko.unwrap(delta_selected_positions) &lt;= -0.01 }"></td><td rowspan="2" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 2, value: gamma_selected_positions }, css: { 'color-red': ko.unwrap(gamma_selected_positions) &lt;= -0.01 }"></td><td rowspan="2" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 2, value: theta_financeiro_selected_positions }, css: { 'color-red': ko.unwrap(theta_financeiro_selected_positions) &lt;= -0.01, 'color-green': ko.unwrap(theta_financeiro_selected_positions) >= 0.01 }"></td><td rowspan="2" data-bind="visible: show_greeks() &amp;&amp; resultingPositionsHaveAnyOption(), brFormattedDecimal: { maxDecimalPlaces: 2, value: vega_selected_positions }, css: { 'color-red': ko.unwrap(vega_selected_positions) &lt;= -0.01 }"></td><td rowspan="2" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" data-bind="visible: show_open_interest() &amp;&amp; resultingPositionsHaveAnyOption()"></td><td rowspan="2" data-bind="visible: show_last"></td><td rowspan="2" data-bind="visible: show_last"></td><td rowspan="2" data-bind="visible: show_last"></td><td rowspan="2" data-bind="visible: show_intrinsic_extrinsic_values"></td><td rowspan="2" data-bind="visible: show_intrinsic_extrinsic_values"></td><td rowspan="2" data-bind="visible: show_volume"></td><td rowspan="2" data-bind="visible: show_volume"></td></tr><tr><td class="align-right" data-bind="attr: { colspan: resultingPositionsHaveAnyOption() ? 11 : 1 }, visible: ko.unwrap(selected_open_positions_cost) !== ko.unwrap(all_operations_balance)"><abbr data-bind="visible: ! resultingPositionsHaveAnyOption()" title="Custo / saldo / lucro / prejuízo considerando todas operações já realizadas">Todas oper.</abbr><span data-bind="visible: resultingPositionsHaveAnyOption">Custo / saldo / lucro / prejuízo considerando todas operações já realizadas</span></td><td data-bind="visible: ko.unwrap(selected_open_positions_cost) !== ko.unwrap(all_operations_balance)" class="align-center" colspan="2"><abbr data-bind="brFormattedDecimal: { value: all_operations_balance, absoluteValue: true }, css: { 'color-red': ko.unwrap(all_operations_balance) &lt;= -0.01, 'color-green': ko.unwrap(all_operations_balance) >= 0.01 }, attr: { title: ko.unwrap(all_operations_balance) &lt;= 0 ? 'Custo de todas operações já realizadas' : 'Saldo de todas operações já realizadas' }"></abbr></td><td data-bind="visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; show_profit_loss_open() &amp;&amp; ko.unwrap(pnl_open_amount_ref_selected_open_positions) !== ko.unwrap(pnl_open_amount_ref_all_operations)"><abbr data-bind="brFormattedDecimal: pnl_open_amount_ref_all_operations, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_all_operations) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_all_operations) >= 0.01 }" title="Lucro / prejuízo realizável a mercado considerando custo de todas operações e lucro / prejuízo já realizado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_amount_ref_all_operations.hasValue()">*</span></td><td data-bind="visible: viewMode() === viewModes.CURRENT_POSITION &amp;&amp; show_profit_loss_open() &amp;&amp; ko.unwrap(pnl_open_percentage_ref_selected_open_positions) !== ko.unwrap(pnl_open_percentage_ref_all_operations)"><abbr data-bind="brFormattedPercentage: { value: pnl_open_percentage_ref_all_operations, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(pnl_open_amount_ref_selected_open_positions) &lt;= -0.01, 'color-green': ko.unwrap(pnl_open_amount_ref_selected_open_positions) >= 0.01 }" title="Lucro / prejuízo percentual realizável a mercado considerando custo de todas operações e lucro / prejuízo já realizado. Pode-se conseguir uma melhor execução."></abbr> <span data-bind="visible: pnl_open_percentage_ref_all_operations.hasValue()">*</span></td></tr></tfoot></table></div></script><script type="text/html" id="resulting-positions-visualizations-template"><div class="strategyOrPortfolioResultingPositionContent" data-bind="foreach: allSelectedVisualizations"><div class="flex-horizontal flex-gap-10 flex-wrap strategyOrPortfolioResultingPositionContentRow" data-bind="foreach: $data"><!--ko if: Array.isArray($data)--><div class="flex-horizontal flex-gap-10 flex-grow flex-shrink min-width-0" data-bind="foreach: $data"><div class="flex-grow flex-shrink min-width-0" data-bind="component: { name: $data.componentName, params: $data.params }"></div></div><!--/ko--> <!--ko ifnot: Array.isArray($data)--><div class="flex-grow flex-shrink min-width-0" data-bind="component: { name: $data.componentName, params: $data.params }"></div><!--/ko--></div></div></script><script type="text/html" id="strategy-or-portfolio-template"><div class="strategyOrPortfolio" data-bind="attr: { 'data-strategy_id': id }"><div class="strategyOrPortfolioHeaderRow strategyOrPortfolioTitleRow"><div class="strategy-info flex-horizontal flex-gap-10"><div class="flex-horizontal flex-gap-10" style="align-items: center"><div data-bind="template: { name: 'show-edit-strategy-title-template', data: { edit: edit_title, value: title }}"></div><div class="flex-horizontal flex-gap-20" style="padding-right: 25px"><div data-bind="visible: underlying_asset_id"><span data-bind="text: underlying_asset_id"></span></div><div class="nowrap" data-bind="with: underlying_asset"><span data-bind="css: { 'color-red': ko.unwrap(c) &lt;= -0.0001, 'color-green': ko.unwrap(c) >= 0.0001 }"><span data-bind="visible: p, text: $parent.currency"></span> <span data-bind="brFormattedDecimal: p"></span></span></div><div class="nowrap" data-bind="with: underlying_asset"><span data-bind="brFormattedPercentage: { value: c, maxDecimalPlaces: 2, appendPositiveSign: true, appendPercentSymbol: true }, css: { 'color-red': ko.unwrap(c) &lt;= -0.0001, 'color-green': ko.unwrap(c) >= 0.0001 }"></span></div><div class="nowrap" data-bind="with: underlying_asset"><span data-bind="text: h"></span></div></div></div><div class="flex-vertical flex-gap-10"><div data-bind="template: { name: 'show-edit-exchange-or-country-template', data: { allow_edit: allow_edit_exchange_or_country, edit: edit_exchange_or_country, exchange_or_country: exchange_or_country } }"></div><div style="min-width: 130px" data-bind="template: { name: 'show-edit-strategy-or-portfolio-flag-template', data: { edit: edit_portfolio_or_strategy_flag, value: portfolio_or_strategy_flag }}"></div></div><div class="flex-vertical flex-gap-10"><div class="nowrap" data-bind="template: { name: 'show-edit-boolean-with-select-template', data: { label: 'Conta real:', edit: edit_real_account, nullable: true, value: real_account } }"></div><div class="flex-horizontal flex-gap-10" style="min-width: 170px" data-bind="visible: ko.unwrap(real_account) === null || ko.unwrap(real_account) === '' || typeof ko.unwrap(real_account) === 'undefined' || ko.unwrap(real_account)"><div>Corretora:</div><div data-bind="template: { name: 'show-edit-broker-template', data: { edit: edit_broker, broker_id: broker_id } }"></div></div></div><div class="flex-vertical flex-gap-10" style="width: 180px"><div data-bind="template: { name: 'show-edit-privacy-template', data: { edit: edit_privacy, value: privacy }}"></div><div data-bind="visible: ko.unwrap(privacy) != '0', template: { name: 'show-edit-boolean-with-select-template', data: { label: 'Habilitar comentários:', edit: edit_enable_comments, value: enable_comments } }"></div></div></div></div><div class="strategyOrPortfolioHeaderRow"><div class="left-margin-0 pad-top-2" data-bind="visible: has_full_history, template: { name: 'toggle-view-mode-template', data: $data }"></div><div class="strategyOrPortfolioResultingPositionHeader flex-grow" data-bind="visible: viewMode() !== viewModes.DETAILED_OPERATIONS_HISTORY"><div class="flex-basis-60-perc"><label><input type="checkbox" data-bind="checked: showTable"> <span>Tabela</span></label> <label class="margin4px" data-bind="css: { disabled: ! showTable() }, visible: viewMode() === viewModes.CURRENT_POSITION"> Lucro / prejuízo </label> <label data-bind="css: { disabled: ! showTable(), margin4px: has_full_history }, visible: viewMode() === viewModes.CURRENT_POSITION"><input data-bind="checked: show_profit_loss_open, attr: { disabled: ! showTable() }" type="checkbox"> realizável</label> <label data-bind="css: { disabled: ! showTable(), margin4px: has_full_history }, visible: has_full_history &amp;&amp; viewMode() === viewModes.CURRENT_POSITION"><input data-bind="checked: show_profit_loss_realized, attr: { disabled: ! showTable() }" type="checkbox"> realizado</label> <label data-bind="css: { disabled: ! showTable() }, visible: has_full_history &amp;&amp; viewMode() === viewModes.CURRENT_POSITION"><input data-bind="checked: hide_closed_positions, attr: { disabled: ! showTable() || ! ko.unwrap(show_profit_loss_realized) }" type="checkbox"> (ocultar posições zeradas)</label> <label class="margin4px" data-bind="visible: showBookCheckBoxes(), css: { disabled: ! showTable() }"><input data-bind="checked: show_book, attr: { disabled: ! showTable() }" type="checkbox" class="margin4px"> Book </label> <label data-bind="visible: showBookCheckBoxes(), css: { margin4px: resultingPositionsHaveAnyOption, disabled: ! showTable() || ! show_book() }"><input data-bind="checked: show_book_qty, attr: { disabled: ! showTable() || ! show_book() }" type="checkbox"> qtd.</label> <label data-bind="visible: showBookCheckBoxes() &amp;&amp; resultingPositionsHaveAnyOption(), css: { disabled: ! showTable() || ! show_book() || ! resultingPositionsHaveAnyOption() }"><input data-bind="checked: show_book_vol, attr: { disabled: ! showTable() || ! show_book() || ! resultingPositionsHaveAnyOption() }" type="checkbox"> vol. </label> <label data-bind="css: { disabled: ! showTable() }, visible: resultingPositionsHaveAnyOption" style="display: none"><input data-bind="checked: show_greeks, attr: { disabled: ! showTable() }" type="checkbox"> Gregas</label> <label data-bind="css: { disabled: ! showTable() }, visible: resultingPositionsHaveAnyOption" style="display: none"><input data-bind="checked: show_open_interest, attr: { disabled: ! showTable() }" type="checkbox"> Posições em aberto</label> <label data-bind="css: { disabled: ! showTable() }"><input data-bind="checked: show_last, attr: { disabled: ! showTable() }" type="checkbox"> Último negócio</label> <label data-bind="css: { disabled: ! showTable() }, visible: resultingPositionsHaveAnyOption" style="display: none"><input data-bind="checked: show_intrinsic_extrinsic_values, attr: { disabled: ! showTable() }" type="checkbox"> VI e VE</label> <label data-bind="css: { disabled: ! showTable() }"><input data-bind="checked: show_volume, attr: { disabled: ! showTable() }" type="checkbox"> Volume</label></div><div class="flex-basis-40-perc" data-bind="foreach: visualizations"><label><input type="checkbox" data-bind="checked: $parent.selectedVisualizationsExceptTable, checkedValue: $data"> <span data-bind="text: description"></span></label></div></div><div data-bind="visible: has_full_history &amp;&amp; ko.unwrap(allowShowPlanned) &amp;&amp; viewMode() === viewModes.DETAILED_OPERATIONS_HISTORY"><label><input data-bind="checked: show_planned" type="checkbox"> Dados da simulação </label></div><div class="strategyOrPortfolioResultingPositionHeader" data-bind="visible: has_full_history &amp;&amp; viewMode() === viewModes.DETAILED_OPERATIONS_HISTORY &amp;&amp; exec_ops_count() > 0"><label><input type="checkbox" data-bind="checked: show_every_operation_result"> Exibir quantidade acumulada e preço médio após cada operação </label> <label><input type="checkbox" data-bind="checked: hide_groups_where_all_ops_expired"> Ocultar grupos em que todas opções tenham expirado </label></div><!--
			<div data-bind="text: id"></div>
			<div><button tabindex="-1" data-bind="click: $root.removeStrategy">Excluir estratégia / operação</button></div>
			--></div><div class="strategyOrPortfolioContent"><div class="strategyOrPortfolioOperationsHistory" data-bind="if: has_full_history &amp;&amp; viewMode() === viewModes.DETAILED_OPERATIONS_HISTORY, visible: has_full_history &amp;&amp; viewMode() === viewModes.DETAILED_OPERATIONS_HISTORY"><div data-bind="template: { name: 'strategy-execution-history-template', data: $data }"></div></div><div class="strategyOrPortfolioResultingPosition" data-bind="visible: ! has_full_history || viewMode() !== viewModes.DETAILED_OPERATIONS_HISTORY, template: { name: 'resulting-positions-visualizations-template', data: $data }"></div></div></div></script><script type="text/html" id="long-and-short-template"><div class="long-and-short-charts-container"><div class="long-and-short-asset-chart-area" data-bind="component: { name: 'candlestick-chart', params: candlestickChartAsset1 } "></div><div class="long-and-short-asset-chart-area" data-bind="component: { name: 'candlestick-chart', params: candlestickChartAsset2 } "></div></div></script><script type="text/html" id="options-strategy-summary-table-template"><table class="default-table-styles default-align-right"><thead><tr><th data-bind="attr: { colspan: days().length }">Resumo da posição</th></tr><tr data-bind="foreach: days"><th data-bind="text: $data"></th></tr></thead><tbody><tr data-bind="foreach: breakEvens"><td data-bind="html: ($data.text ? $data.text.replace(/\s/g, '    ') : $data.text)"></td></tr><tr data-bind="foreach: maxProfitAmount"><td data-bind="text: $data.text, style: $data.style "></td></tr><tr data-bind="foreach: maxLossAmount"><td data-bind="text: $data.text, style: $data.style "></td></tr></tbody></table></script><script type="text/html" id="volatilities-table-template"><table class="default-table-styles default-align-right"><thead><tr><th colspan="3">Volatilidades <span data-bind="text: asset.id"></span></th><th colspan="4">Em 12 meses</th></tr><tr><th colspan="2"></th><th>Última</th><th>IV Rank</th><th>Percentil</th><th>Mín</th><th>Máx</th></tr></thead><tbody><tr><td colspan="2" class="align-left"><strong>Histórica</strong></td><td><span data-bind="brFormattedPercentage: asset.evl"></span></td><td><span data-bind="brFormattedPercentage: asset.evr_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.evp_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.evmi_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.evma_12m"></span></td></tr><tr><td rowspan="2" class="align-left" style="padding-top: 20px"><strong>Implícita</strong></td><td class="align-center">CALLs</td><td><span data-bind="brFormattedPercentage: asset.iv_c"></span></td><td><span data-bind="brFormattedPercentage: asset.ivr_c_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.ivp_c_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.ivmi_c_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.ivma_c_12m"></span></td></tr><tr><td class="align-center">PUTs</td><td><span data-bind="brFormattedPercentage: asset.iv_p"></span></td><td><span data-bind="brFormattedPercentage: asset.ivr_p_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.ivp_p_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.ivmi_p_12m"></span></td><td><span data-bind="brFormattedPercentage: asset.ivma_p_12m"></span></td></tr></tbody></table></script><script type="text/html" id="skew-chart-template"><div class="skew-chart-container"><div class="skew-chart" data-bind="component: { name: 'google-chart', params: $data }"></div><div class="skew-chart-ctrls-bottom"><select data-bind="value: hAxisColumnIndexForSkewChart"><option value="1">Strike</option><option value="0">% do spot</option></select></div></div></script><script type="text/html" id="candlestick-chart-template"><div class="candlestick-chart-container"><div class="candlestick-chart-ctrls-top" data-bind="with: asset"><div data-bind="text: t"></div><div class="nowrap" data-bind="css: { 'color-red': ko.unwrap(c) &lt;= -0.0001, 'color-green': ko.unwrap(c) >= 0.0001 } ">R$ <span data-bind="brFormattedDecimal: p"></span></div><div class="nowrap" data-bind="brFormattedPercentage: { value: c, appendPercentSymbol: true, appendPositiveSign: true, maxDecimalPlaces: 2 }, css: { 'color-red': ko.unwrap(c) &lt;= -0.0001, 'color-green': ko.unwrap(c) >= 0.0001 } "></div><div class="nowrap" data-bind="text: h"></div><div><span data-bind="brFormattedInteger: n"></span> <span data-bind="visible: n, text: $parent.volumeTextFormat() === 'short' ? 'neg.' : 'negócios'"></span></div><div class="nowrap">R$ <span data-bind="brFormattedAsText: { value: f, format: $parent.volumeTextFormat } "></span></div></div><div class="candlestick-chart" data-bind="component: { name: 'tradingview-lightweight-stock-chart', params: $data }"></div></div></script><script type="text/html" id="options-strategy-payoff-chart-template"><div class="options-strategy-payoff-chart-container"><div class="options-strategy-payoff-chart-ctrls-top"><div><label class="lbl-clr-chk"> <input type="checkbox" data-bind="checked: payoff1ChartLine.selected"> <span class="span-chk chk-blue"></span> <span class="lbl-chk">Payoff</span> </label></div><div><label class="lbl-clr-chk"> <input type="checkbox" data-bind="checked: deltaChartLine.selected"> <span class="span-chk chk-red"></span> <span class="lbl-chk">Delta</span> </label></div><div><label class="lbl-clr-chk"> <input type="checkbox" data-bind="checked: gammaChartLine.selected"> <span class="span-chk chk-orange"></span> <span class="lbl-chk">Gamma</span> </label></div><div><label class="lbl-clr-chk"> <input type="checkbox" data-bind="checked: thetaChartLine.selected"> <span class="span-chk chk-yellow"></span> <span class="lbl-chk">Theta</span> </label></div><div><label class="lbl-clr-chk"> <input type="checkbox" data-bind="checked: vegaChartLine.selected"> <span class="span-chk chk-purple"></span> <span class="lbl-chk">Vega</span> </label></div><div><select data-bind="value: payoff1TradingDaysFromToday"><option value="0" data-bind="text: todayIsTradingDay() ? 'hoje' : 'último'"></option><option value="1" data-bind="visible: resultingPositionFirstUnexpiredExpirationInDUs(), text: nextTradingDayName"></option><option data-bind="visible: resultingPositionFirstUnexpiredExpirationInDUs() > 1, text: resultingPositionFirstUnexpiredExpirationDateDDMMYYYY, value: resultingPositionFirstUnexpiredExpirationInDUs"></option></select></div></div><div class="options-strategy-payoff-chart-ctrls-top" data-bind="visible: showPayoff2ChartLineOption"><div><label class="lbl-clr-chk"> <input type="checkbox" data-bind="checked: payoff2ChartLine.selected"> <span class="span-chk chk-green"></span> <span class="lbl-chk" data-bind="text: payoff2ChartLineExpirationInfo"></span> </label></div></div><div class="options-strategy-payoff-chart-ctrls-top" data-bind="visible: showPayoffChartResultKindOption"><div><p>&nbsp; Resultado <select data-bind="value: payoffChartResultKind"><option value="consolidated">consolidado</option><option value="open-positions">das posições em aberto</option></select></p></div></div><div class="options-strategy-payoff-chart" data-bind="component: { name: 'google-chart', params: $data }"></div><div class="options-strategy-payoff-chart-ctrls-bottom"><select data-bind="brFormattedDecimal: maxDownPercentChangeForPayoffChart"><option value="-0,10">-10%</option><option value="-0,25">-25%</option><option value="-0,50">-50%</option><option value="-0,75">-75%</option><option value="-1,00">-100%</option></select> <select data-bind="value: hAxisColumnIndexForPayoffChart"><option value="1" data-bind="text: 'Cotação de ' + ko.unwrap(underlying_asset_id)"></option><option value="0" data-bind="text: 'Variação de ' + ko.unwrap(underlying_asset_id)"></option></select> <select data-bind="brFormattedDecimal: maxUpPercentChangeForPayoffChart"><option value="0,10">+10%</option><option value="0,25">+25%</option><option value="0,50">+50%</option><option value="0,75">+75%</option><option value="1,00">+100%</option><option value="2,00">+200%</option><option value="3,00">+300%</option><option value="5,00">+500%</option><option value="10,00">+1000%</option></select></div></div></script><script type="text/html" id="options-strategy-charts-template"><div class="options-strategy-charts-container"><div class="options-strategy-stock-chart-area" data-bind="component: { name: 'candlestick-chart', params: candlestickChartParams } "></div><div class="options-strategy-payoff-chart-area" data-bind="component: { name: 'options-strategy-payoff-chart', params: $data } "></div><div class="skew-chart-area" data-bind="visible: resultingPositionsHaveAnyOptionExpiringAfterToday, component: { name: 'skew-chart', params: $data } "></div></div></script><script type="text/html" id="roll-sold-option-template"><div class="ovfl-x-auto"><table class="default-table-styles default-align-right resulting-positions-table"><thead><tr><th class="align-left" colspan="9">Rolagem - zerar posição atual</th><th data-bind="visible: show_book, attr: bookHeaderAttributes">Book</th><th data-bind="visible: show_greeks" colspan="4">Gregas</th><th data-bind="visible: show_open_interest" colspan="6">Posições em aberto</th><th data-bind="visible: show_last" colspan="3">Último negócio</th><th data-bind="visible: show_volume" colspan="2">Volume</th><th colspan="2"><abbr title="Custo ou receita da rolagem, considerando a zeragem da posição atual e montagem da nova posição">Custo / receita da rolagem *</abbr></th><th rowspan="2">Notional</th></tr><tr><th>Operação</th><th class="col-position-qty">Quantidade</th><th class="col-ticker">Ativo</th><th class="col-expiration">Vencimento</th><th class="col-dc">D.C.</th><th class="col-du">D.U.</th><th class="col-fm">FM</th><th class="col-mod">Mod</th><th class="col-strike">Strike</th><th class="col-book-qty" data-bind="visible: show_book() &amp;&amp; show_book_qty()">Qtd.</th><th class="col-book-vol" data-bind="visible: show_book() &amp;&amp; show_book_vol()">Vol.</th><th class="cols-bid-ask" data-bind="visible: show_book">Bid</th><th class="cols-bid-ask" data-bind="visible: show_book">Ask</th><th class="col-book-vol" data-bind="visible: show_book() &amp;&amp; show_book_vol()">Vol.</th><th class="col-book-qty" data-bind="visible: show_book() &amp;&amp; show_book_qty()">Qtd.</th><th class="col-greek" data-bind="visible: show_greeks()">Delta</th><th class="col-greek" data-bind="visible: show_greeks()">Gamma</th><th class="col-greek" data-bind="visible: show_greeks()">Theta</th><th class="col-greek" data-bind="visible: show_greeks()">Vega</th><th class="" data-bind="visible: show_open_interest">IQ</th><th class="" data-bind="visible: show_open_interest">Cob.</th><th class="" data-bind="visible: show_open_interest">Trav.</th><th class="" data-bind="visible: show_open_interest">Descob.</th><th class="" data-bind="visible: show_open_interest">Tit.</th><th class="" data-bind="visible: show_open_interest">Lanç.</th><th class="col-last-price" data-bind="visible: show_last">Preço</th><th class="col-last-change" data-bind="visible: show_last">Var (%)</th><th class="col-last-datetime" data-bind="visible: show_last">Data/hora</th><th class="col-num-negocios" data-bind="visible: show_volume">Negócios</th><th class="col-vol-financeiro" data-bind="visible: show_volume">Financeiro</th><th>A mercado</th><th>Pela média <br> do book</th></tr></thead><tbody data-bind="foreach: positions"><tr><td class="align-center" data-bind="text: qty > 0 ? 'Vender' : 'Comprar'"></td><td class="col-position-qty" data-bind="brFormattedInteger: Math.abs(qty)"></td><td class="col-ticker align-left" data-bind="text: asset.t"></td><td class="col-expiration" data-bind="text: asset.e"></td><td data-bind="text: asset.dc"></td><td data-bind="text: asset.du"></td><td class="align-center" data-bind="text: asset.fm ? '✔' : ''"></td><td class="align-center" data-bind="text: asset.m"></td><td data-bind="brFormattedDecimal: asset.s"></td><td class="col-book-qty" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_qty(), brFormattedInteger: asset.qb"></td><td class="align-center" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_vol(), brFormattedPercentage: asset.l"></td><td class="align-center" data-bind="visible: $parent.show_book, brFormattedDecimal: asset.b"></td><td class="align-center" data-bind="visible: $parent.show_book, brFormattedDecimal: asset.a"></td><td class="align-center" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_vol(), brFormattedPercentage: asset.j"></td><td class="col-book-qty" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_qty(), brFormattedInteger: asset.qa"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.d }, css: { 'color-red': ko.unwrap(asset.d) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.g }, css: { 'color-red': ko.unwrap(asset.g) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.tf }, css: { 'color-red': ko.unwrap(asset.tf) &lt;= -0.0001, 'color-green': ko.unwrap(asset.tf) >= 0.0001 }"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.v }, css: { 'color-red': ko.unwrap(asset.v) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_open_interest, brFormattedDecimal: asset.iq"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.cov"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.blk"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.ucov"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.tit"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.lan"></td><td data-bind="visible: $parent.show_last, brFormattedDecimal: asset.p"></td><td data-bind="visible: $parent.show_last, brFormattedPercentage: { value: asset.c, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(asset.c) &lt;= -0.0001, 'color-green': ko.unwrap(asset.c) >= 0.0001 } "></td><td class="col-last-datetime" data-bind="visible: $parent.show_last, text: mUtils.isoDateStringToDDMMString(ko.unwrap(asset.h), true)"></td><td data-bind="visible: $parent.show_volume, brFormattedInteger: asset.n"></td><td data-bind="visible: $parent.show_volume, brFormattedDecimal: asset.f"></td><td class="align-center"><abbr title="Custos ou receitas das alternativas de rolagem (abaixo) já incluem o custo da zeragem da posição atual">***</abbr></td><td class="align-center"><abbr title="Custos ou receitas das alternativas de rolagem (abaixo) já incluem o custo da zeragem da posição atual">***</abbr></td><td data-bind="brFormattedDecimal: asset.s * Math.abs(qty)"></td></tr></tbody><tbody><tr><td class="align-left" data-bind="attr: { colspan: total_cols_count }"><div class="flex-horizontal flex-gap-20"><div class="pad-top-2">Montar nova posição - Vencimentos:</div><div class="flex-horizontal flex-gap-10" data-bind="foreach: expirationsList"><label><input type="checkbox" data-bind="checked: $parent.selectedExpirations, checkedValue: $data"> <span data-bind="text: dt"></span> - <span data-bind="text: dc"></span> d.c. - <span data-bind="text: du"></span> d.u. </label></div><div class="pad-top-2 min-width-120">Faixa de strikes:</div><div class="flex-grow top-buffer-5"><div style="width: 90%" data-bind="component: { name: 'slider-range-ctrl', params: { orderedValuesList: strikesList, rangeStartValue: strikesRangeStart, rangeEndValue: strikesRangeEnd } }"></div></div></div></td></tr></tbody><tbody data-bind="foreach: userFilteredRollingAlternatives"><tr><td class="align-center" data-bind="template: { name: 'show-edit-op-template', data: { imperative: true, op_group_type: 'R', edit: false, value: op }}"></td><td class="col-position-qty" data-bind="template: { name: 'show-edit-integer-template', data: { allow_edit: true, edit: true, value: qty } }"></td><td class="col-ticker align-left" data-bind="text: asset.t"></td><td class="col-expiration" data-bind="text: asset.e"></td><td data-bind="text: asset.dc"></td><td data-bind="text: asset.du"></td><td class="align-center" data-bind="text: asset.fm ? '✔' : ''"></td><td class="align-center" data-bind="text: asset.m"></td><td data-bind="brFormattedDecimal: asset.s"></td><td class="col-book-qty" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_qty(), brFormattedInteger: asset.qb"></td><td class="align-center" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_vol(), brFormattedPercentage: asset.l"></td><td class="align-center" data-bind="visible: $parent.show_book, brFormattedDecimal: asset.b"></td><td class="align-center" data-bind="visible: $parent.show_book, brFormattedDecimal: asset.a"></td><td class="align-center" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_vol(), brFormattedPercentage: asset.j"></td><td class="col-book-qty" data-bind="visible: $parent.show_book() &amp;&amp; $parent.show_book_qty(), brFormattedInteger: asset.qa"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.d }, css: { 'color-red': ko.unwrap(asset.d) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.g }, css: { 'color-red': ko.unwrap(asset.g) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.tf }, css: { 'color-red': ko.unwrap(asset.tf) &lt;= -0.0001, 'color-green': ko.unwrap(asset.tf) >= 0.0001 }"></td><td data-bind="visible: $parent.show_greeks, brFormattedDecimal: { maxDecimalPlaces: 4, value: asset.v }, css: { 'color-red': ko.unwrap(asset.v) &lt;= -0.0001 }"></td><td data-bind="visible: $parent.show_open_interest, brFormattedDecimal: asset.iq"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.cov"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.blk"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.ucov"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.tit"></td><td data-bind="visible: $parent.show_open_interest, brFormattedInteger: asset.lan"></td><td data-bind="visible: $parent.show_last, brFormattedDecimal: asset.p"></td><td data-bind="visible: $parent.show_last, brFormattedPercentage: { value: asset.c, maxDecimalPlaces: 2, appendPositiveSign: true }, css: { 'color-red': ko.unwrap(asset.c) &lt;= -0.0001, 'color-green': ko.unwrap(asset.c) >= 0.0001 } "></td><td class="col-last-datetime" data-bind="visible: $parent.show_last, text: mUtils.isoDateStringToDDMMString(ko.unwrap(asset.h), true)"></td><td data-bind="visible: $parent.show_volume, brFormattedInteger: asset.n"></td><td data-bind="visible: $parent.show_volume, brFormattedDecimal: asset.f"></td><td data-bind="brFormattedDecimal: { absoluteValue: true, value: market_cost }, css: { 'color-red': ko.unwrap(market_cost) &lt;= -0.01, 'color-green': ko.unwrap(market_cost) >= 0.01 }"></td><td data-bind="brFormattedDecimal: { absoluteValue: true, value: book_avg_cost }, css: { 'color-red': ko.unwrap(book_avg_cost) &lt;= -0.01, 'color-green': ko.unwrap(book_avg_cost) >= 0.01 }"></td><td data-bind="brFormattedDecimal: notional"></td></tr></tbody></table></div></script><script type="text/html" id="select-list-table-template"><div class="flex-vertical full-height"><div data-bind="style: { border: '1px solid #808080', padding: '6px 10px', width: titleWidth }"><span data-bind="text: title"></span></div><div class="ovfl-y-auto flex-grow"><table class="default-table-styles"><tbody data-bind="foreach: selectedItemsSorted"><tr><td><input type="checkbox" data-bind="attr: { id: $data }, checkedValue: $data, checked: $parent.selectedItems"></td><td style="min-width: 50px"><label data-bind="attr: { for: $data }, text: $data"></label></td></tr></tbody><tbody data-bind="foreach: itemsList.filter(item => selectedItems.indexOf(item) === -1 )"><tr><td><input type="checkbox" data-bind="attr: { id: $data }, checkedValue: $data, checked: $parent.selectedItems"></td><td style="min-width: 50px"><label data-bind="attr: { for: $data }, text: $data"></label></td></tr></tbody></table></div></div></script><script type="text/html" id="currencies-table-template"><div class="full-height" data-bind="component: { name: 'select-list-table', params: { title: currenciesListTitle, titleWidth: currenciesListTitleWidth, itemsList: currenciesList, selectedItems: selectedCurrencies } }"></div></script><script type="text/html" id="indexes-b3-table-template"><div class="full-height" data-bind="component: { name: 'select-list-table', params: { title: indexesB3TableTitle, titleWidth: indexesB3TitleWidth, itemsList: indexesB3ExceptNew, selectedItems: selectedIndexes } }"></div></script><script type="text/html" id="benchmarks-table-template"><div class="flex-vertical full-height"><table class="default-table-styles"><thead><tr><th colspan="2">Benchmarks</th></tr></thead><tbody data-bind="foreach: benchmarksList"><tr><td><input type="checkbox" data-bind="attr: { id: $data }, checkedValue: $data, checked: $parent.selectedBenchmarks"></td><td><label data-bind="attr: { for: $data }, text: $data"></label></td></tr></tbody></table></div></script><script type="text/html" id="metric-value-template"><span data-bind="brFormattedDecimal: { value: value, maxDecimalPlaces: maxDecimalPlaces }"></span></script><script type="text/html" id="metric-history-chart-template"><div data-bind="component: { name: 'chartjs-chart', params: { chartType: 'scatter', chartSeries: chartSeries, chartOptions: chartOptions } }"></div></script><script type="text/html" id="weight-limit-of-assets-without-data-template"><div>Se a carteira tiver ativos sem dados históricos suficientes, seu peso não pode ter sido superior a <select data-bind="value: weightLimit"><option value="0.01">1%</option><option value="0.02">2%</option><option value="0.03">3%</option><option value="0.04">4%</option><option value="0.05" selected="selected">5%</option><option value="0.06">6%</option><option value="0.07">7%</option><option value="0.08">8%</option><option value="0.09">9%</option><option value="0.10">10%</option><option value="0.15">15%</option><option value="0.20">20%</option></select> em nenhum pregão. (Entenda)</div></script><script type="text/html" id="at-date-template"><div class="min-width-70"><label data-bind="text: selectedDateFormatted"></label></div><div><input type="range" min="0" data-bind="attr: { max: inputRangeMax }, value: inputRangeValue, valueUpdate: 'input'"></div></script><script type="text/html" id="highlight-time-range-template"><div><span data-bind="text: (capitalizeOptionText ? 'D' : 'd') + 'estacar período'"></span></div><div><select data-bind="value: selectedHistoricalEvent, options: historicalEvents, optionsCaption: '', optionsText: 'title'"></select></div></script><script type="text/html" id="periodo-variacao-tamanho-amostra-template"><div><span>Período</span><span class="hidden-if-wlt-1600"> de variação</span>:</div><div><select data-bind="value: selectedPriceChangeInterval, options: priceChangeIntervals, optionsText: 'description'"></select></div><div><span class="hidden-if-wgt-1600">Amostra:</span><span class="hidden-if-wlt-1600">Tamanho da amostra:</span></div><div><select data-bind="value: selectedSampleSize, options: samples_config, optionsText: 'size'"></select></div><div class="nowrap" data-bind="with: selectedSampleSize"><span data-bind="text: description"></span></div></script><script type="text/html" id="periodo-variacao-tamanhos-amostras-table-template"><div class="ovfl-x-auto"><table class="default-table-styles min-width-860"><thead><tr><th>Período de variação</th><th colspan="7">Tamanhos das amostras</th></tr></thead><tbody data-bind="foreach: priceChangeIntervals"><tr><td data-bind="text: description"></td><!--ko foreach: empty_samples_config--><td></td><!--/ko--> <!--ko foreach: samples_config--><td><input type="checkbox" data-bind="attr: { id: 'cp_' + $parent.dus + '_s_' + size }, value: size, checked: selected"><label data-bind="attr: { for: 'cp_' + $parent.dus + '_s_' + size }, text: size + ' ' + description"></label></td><!--/ko--></tr></tbody></table></div></script><script type="text/html" id="consolidated-position-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><div class="not-clickable align-center"><strong>POSIÇÃO CONSOLIDADA</strong></div></div><div class="strategies-open-ui-root-top-bar flex-horizontal flex-start pad-left-10 pad-top-10"><div class="nowrap" data-bind="template: { name: 'show-edit-boolean-with-select-template', data: { label: 'Conta real:', edit: true, nullable: true, optionsCaption: '(Indefinido)', value: realAccount } }"></div><div>Total em R$: <span data-bind="style: { color: ko.unwrap(consolidatedPositionTotalValueBRL) &lt;= -0.01 ? '#fe7f7f' : ko.unwrap(consolidatedPositionTotalValueBRL) >= 0.01 ? '#7ECC7E' : '' }"><span data-bind="brFormattedDecimal: consolidatedPositionTotalValueBRL"></span></span></div><div>Dólar R$: <span data-bind="brFormattedDecimal: usd_brl"></span></div><div>Total em US$: <span data-bind="style: { color: ko.unwrap(consolidatedPositionTotalValueUSD) &lt;= -0.01 ? '#fe7f7f' : ko.unwrap(consolidatedPositionTotalValueUSD) >= 0.01 ? '#7ECC7E' : '' }"><span data-bind="brFormattedDecimal: consolidatedPositionTotalValueUSD"></span></span></div><div class="flex-horizontal flex-gap-20"><div class="nowrap"><input type="checkbox" id="cbxConsolidatePortfolios" data-bind="checked: consolidatePortfolios"><label for="cbxConsolidatePortfolios">Carteiras</label></div><div class="nowrap"><input type="checkbox" id="cbxConsolidateStrategies" data-bind="checked: consolidateStrategies"><label for="cbxConsolidateStrategies">Estratégias</label></div></div><div class="flex-horizontal flex-gap-10" data-bind="visible: realAccount"><div>Corretora:</div><div data-bind="template: { name: 'show-edit-broker-template', data: { edit: true, broker_id: brokerId, brokersList: brokersList, optionsCaption: '(TODAS)' } }"></div></div><div class="flex-horizontal flex-gap-10"><div>Ativo objeto:</div><div><select data-bind="options: consolidatedPositionAssetsAtSelectedBroker, optionsCaption: '(TODOS)', value: selectedAsset"></select></div></div></div><div class="flex-grow pad-left-10" style="overflow: auto"><table class="default-table-styles"><thead><tr><th>Ativo</th><th>Qtd. total</th><th>Bid</th><th>Ask</th><th colspan="2">Último</th><th>Data/hora</th><th>Valor atual (R$)</th><th>Peso (%)</th><th>Carteira ou estratégia</th><th>Quantidade</th><th colspan="2">Pr. médio</th><th>Variação (%)</th></tr></thead><tbody data-bind="foreach: consolidatedPositionByAsset"><tr><td data-bind="attr: { rowspan: positionByOrigin.length }, text: asset.t"></td><td class="align-right" data-bind="attr: { rowspan: positionByOrigin.length }, brFormattedInteger: total_qty, css: { 'color-red': ko.unwrap(total_qty) &lt; 0 }"></td><td class="align-right" data-bind="attr: { rowspan: positionByOrigin.length }, brFormattedDecimal: asset.b"></td><td class="align-right" data-bind="attr: { rowspan: positionByOrigin.length }, brFormattedDecimal: asset.a"></td><td class="align-right" data-bind="attr: { rowspan: positionByOrigin.length }, text: asset.x != 1 ? 'US$' : 'R$' "></td><td class="align-right" data-bind="attr: { rowspan: positionByOrigin.length }, brFormattedDecimal: asset.p"></td><td class="align-center" data-bind="attr: { rowspan: positionByOrigin.length }, text: mUtils.isoDateStringToDDMMString(ko.unwrap(asset.h), true)"></td><td class="align-right" data-bind="attr: { rowspan: positionByOrigin.length }, brFormattedDecimal: current_value, css: { 'color-red': ko.unwrap(current_value) &lt; 0 }"></td><td class="align-right bg-grad-gray" data-bind="attr: { rowspan: positionByOrigin.length }, brFormattedPercentage: { value: weight, maxDecimalPlaces: 2 }, style: { 'background-size': weightBgSizeStr }"></td><td data-bind="text: positionByOrigin[0].origin"></td><td class="align-right" data-bind="brFormattedInteger: positionByOrigin[0].qty, css: { 'color-red': ko.unwrap(positionByOrigin[0].qty) &lt; 0 }"></td><td class="align-right" data-bind="text: asset.x != 1 ? 'US$' : 'R$' "></td><td class="align-right" data-bind="brFormattedDecimal: positionByOrigin[0].avg_unit_price"></td><td class="align-right" data-bind="brFormattedPercentage: { value: positionByOrigin[0].value_percent_change, maxDecimalPlaces: 2, appendPositiveSign: true }, style: { color: ko.unwrap(positionByOrigin[0].value_percent_change) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(positionByOrigin[0].value_percent_change) >= 0.0001 ? '#7ECC7E' : '' }"></td></tr><!--ko foreach: positionByOrigin.slice(1)--><tr><td data-bind="text: origin"></td><td class="align-right" data-bind="brFormattedInteger: qty, css: { 'color-red': ko.unwrap(qty) &lt; 0 }"></td><td class="align-right" data-bind="text: $parent.asset.x != 1 ? 'US$' : 'R$' "></td><td class="align-right" data-bind="brFormattedDecimal: avg_unit_price"></td><td class="align-right" data-bind="brFormattedPercentage: { value: value_percent_change, maxDecimalPlaces: 2, appendPositiveSign: true }, style: { color: ko.unwrap(value_percent_change) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(value_percent_change) >= 0.0001 ? '#7ECC7E' : '' }"></td></tr><!--/ko--></tbody><tfoot><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td class="align-right" data-bind="brFormattedDecimal: consolidatedPositionTotalFiltered, css: { 'color-red': ko.unwrap(consolidatedPositionTotalFiltered) &lt; 0 }"></td><td class="align-right" data-bind="brFormattedPercentage: { value: consolidatedPositionWeightFiltered, maxDecimalPlaces: 2 }, css: { 'color-red': ko.unwrap(consolidatedPositionWeightFiltered) &lt; 0 }"></td><td></td><td></td><td></td><td></td><td></td></tr></tfoot></table></div><div class="flex-horizontal flex-gap-10 pad-left-10 pad-top-10" style="flex-basis: 40%; flex-shrink: 0"><div class="flex-basis-56-perc"><div class="hidden-if-wlt-1800 align-center bg-333">HISTÓRICO DE BETA E CORRELAÇÂO</div><div class="hidden-if-wlt-1800 flex-vertical flex-gap-10 history-charts-container"><div class="hidden-if-wlt-1800 pad-top-10 pad-left-10" data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }"></div></div><div class="flex-horizontal flex-gap-10"><div class="flex-basis-50-perc"><div class="align-center bg-333"><span class="hidden-if-wgt-1800">HISTÓRICO DE</span> <span>BETA</span></div><div data-bind="component: { name: 'metric-history-chart', params: history.beta }"></div></div><div class="flex-basis-50-perc"><div class="align-center bg-333"><span class="hidden-if-wgt-1800">HISTÓRICO DE</span> <span>CORRELAÇÃO</span></div><div data-bind="component: { name: 'metric-history-chart', params: history.correl }"></div></div></div></div><div class="flex-basis-44-perc"><div class="align-center bg-333">PAYOFF MULTI-BETADO</div><div data-bind="component: { name: 'chartjs-chart', params: multiBetaPayoffChartParams }"></div></div></div></div></script><script type="text/html" id="portfolio-summary-table-template"><div data-bind="text: ko.toJSON(positions_open_or_with_realized_pnl)"></div></script><script type="text/html" id="portfolios-table-template"><table class="default-table-styles"><thead><tr><th data-bind="text: description"></th><th>Custo aquisição<br>(<span data-bind="text: currency"></span>)</th><th>Valor atual<br>(<span data-bind="text: currency"></span>)</th><th>Variação<br>(%)</th></tr></thead><tbody data-bind="foreach: portfolios"><tr class="cursor-pointer" data-bind="click: function() { $parent.selectedPortfolio() === fullEntity ? $parent.selectedPortfolio(null) : $parent.selectedPortfolio(fullEntity) }, style: { 'background-color': $parent.selectedPortfolio() === fullEntity ? '#282828' : '' }"><td class="noselect"><a data-bind="text: titleComputed"></a></td><td class="align-right"><label><abbr data-bind="brFormattedDecimal: { absoluteValue: true, appendPositiveSign: true, value: all_operations_balance }, attr: { title: ko.unwrap(all_operations_balance) > 0 ? 'Crédito de montagem da posição' : 'Custo de montagem da posição' }, style: { color: ko.unwrap(all_operations_balance) >= 0.01 ? '#7ECC7E' : '' }"></abbr></label></td><td class="align-right"><label><abbr data-bind="brFormattedDecimal: all_open_positions_value" title="Valor da posição a mercado. Pode-se conseguir uma melhor execução."></abbr></label></td><td class="align-right"><label><abbr data-bind="brFormattedPercentage: { value: pnl_open_percentage_ref_all_operations, maxDecimalPlaces: 2, appendPositiveSign: true }, style: { color: ko.unwrap(pnl_open_amount_ref_all_open_positions) &lt;= -0.01 ? '#fe7f7f' : ko.unwrap(pnl_open_amount_ref_all_open_positions) >= 0.01 ? '#7ECC7E' : '' }" title="Lucro / prejuízo percentual realizável a mercado. Pode-se conseguir uma melhor execução."></abbr></label></td></tr></tbody><tfoot><tr><td></td><td class="align-right" data-bind="brFormattedDecimal: { absoluteValue: true, value: portfolios_cost }"></td><td class="align-right" data-bind="brFormattedDecimal: portfolios_value"></td><td class="align-right" data-bind="brFormattedPercentage: { value: portfolios_value_percent_change, maxDecimalPlaces: 2, appendPositiveSign: true }, style: { color: ko.unwrap(portfolios_value_percent_change) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(portfolios_value_percent_change) >= 0.0001 ? '#7ECC7E' : '' }"></td></tr></tfoot></table></script><script type="text/html" id="portfolios-list-and-operations-history-template"><div class="strategies-open-ui-root-container flex-vertical full-height pad-left-10 pad-top-10"><div class="strategies-open-ui-root-top-bar flex-horizontal flex-start"><div><span>Conta real </span> <select data-bind="value: realAccountFilter"><option value="">(Indefinido)</option><option value="N">Não</option><option value="S">Sim</option></select></div><div data-bind="visible: ! real_account_filtered_portfolios_count(), text: 'Nenhuma carteira'"></div><div data-bind="visible: real_account_filtered_portfolios_count"><span data-bind="text: filteredPortfoliosCountText"></span></div><div data-bind="visible: real_account_filtered_portfolios_count">Total em R$: <span data-bind="style: { color: ko.unwrap(total_value_BRL) &lt;= -0.01 ? '#fe7f7f' : ko.unwrap(total_value_BRL) >= 0.01 ? '#7ECC7E' : '' }"><span data-bind="brFormattedDecimal: total_value_BRL"></span></span></div><div data-bind="visible: real_account_filtered_portfolios_count">Dólar R$: <span data-bind="brFormattedDecimal: usd_brl"></span></div><div data-bind="visible: real_account_filtered_portfolios_count">Total em US$: <span data-bind="style: { color: ko.unwrap(total_value_USD) &lt;= -0.01 ? '#fe7f7f' : ko.unwrap(total_value_USD) >= 0.01 ? '#7ECC7E' : '' }"><span data-bind="brFormattedDecimal: total_value_USD"></span></span></div></div><div class="flex-vertical height-100-perc-60px flex-gap-10"><div class="flex-horizontal flex-gap-20" data-bind="if: filteredPortfoliosCount, style: selectedPortfolio() ? { 'min-height': 110, 'max-height': '33%', 'overflow-y': 'auto' } : { 'min-height': 'initial', 'max-height': 'initial', 'overflow-y': 'initial' }"><div data-bind="component: { name: 'portfolios-table', params: leftTable }, visible: leftTable.portfolios_count"></div><div data-bind="component: { name: 'portfolios-table', params: rightTable }, visible: rightTable.portfolios_count"></div></div><div class="flex-grow ovfl-y-auto" data-bind="if: selectedPortfolio"><div data-bind="component: { name: 'strategy-or-portfolio', params: selectedPortfolio }"></div></div><div class="flex-grow ovfl-y-auto" data-bind="ifnot: selectedPortfolio"><div style="width: 920px; margin: 0 auto" class="fade-in-element text-center"><p style="font-size: 32px">Você está visualizando o gerenciamento de carteiras do Opções.Net.Br, recurso exclusivo para assinantes Premium.</p><p style="font-size: 18px">As carteiras exibidas são mero exemplo e não constituem sugestão de investimento.</p></div></div></div></div></script><script type="text/html" id="portfolios-returns-table-template"><table class="default-table-styles top-buffer-10 min-width-360 pad-right-10"><thead><tr><th data-bind="attr: { colspan: showCheckBoxes ? 6 : 4 }, text: title"></th><th data-bind="visible: showAcquisitionCost" class="th-portfolio-cost">Custo aquisição<br>(<span data-bind="text: currency"></span>)</th><th data-bind="visible: showCurrentValue" class="th-portfolio-value">Valor atual<br>(<span data-bind="text: currency"></span>)</th><th data-bind="visible: showChange" class="th-portfolio-var">Variação<br>(%)</th></tr></thead><tbody data-bind="foreach: portfolios"><tr data-bind="style: { 'background-color': selected() ? '#282828' : '' }"><td><div class="fake-tree-btn" data-bind="click: function() { $data.assetsVisible(!$data.assetsVisible()) }, text: assetsVisible() ? '-' : '+'"></div></td><td data-bind="visible: $parent.showCheckBoxes"><input type="checkbox" data-bind="attr: { id: 'c' + ko.unwrap(id) }, checked: selected"></td><td data-bind="attr: { colspan: $parent.showCheckBoxes ? 4 : 3 }" class="td-portfolio-title"><label class="cursor-pointer full-width" data-bind="attr: { for: 'c' + ko.unwrap(id) }, text: titleComputed"></label></td><td data-bind="visible: $parent.showAcquisitionCost"><label class="cursor-pointer full-width align-right" data-bind="attr: { for: 'c' + ko.unwrap(id) }"><abbr data-bind="brFormattedDecimal: { absoluteValue: true, appendPositiveSign: true, value: all_operations_balance }, attr: { title: ko.unwrap(all_operations_balance) > 0 ? 'Crédito de montagem da posição' : 'Custo de montagem da posição' }, style: { color: ko.unwrap(all_operations_balance) >= 0.01 ? '#7ECC7E' : '' }"></abbr></label></td><td data-bind="visible: $parent.showCurrentValue"><label class="cursor-pointer full-width align-right" data-bind="attr: { for: 'c' + ko.unwrap(id) }"><abbr data-bind="brFormattedDecimal: all_open_positions_value" title="Valor da posição a mercado. Pode-se conseguir uma melhor execução."></abbr></label></td><td data-bind="visible: $parent.showChange"><label class="cursor-pointer full-width align-right" data-bind="attr: { for: 'c' + ko.unwrap(id) }"><abbr data-bind="brFormattedPercentage: { value: pnl_open_percentage_ref_all_operations, maxDecimalPlaces: 2, appendPositiveSign: true }, style: { color: ko.unwrap(pnl_open_amount_ref_all_open_positions) &lt;= -0.01 ? '#fe7f7f' : ko.unwrap(pnl_open_amount_ref_all_open_positions) >= 0.01 ? '#7ECC7E' : '' }" title="Lucro / prejuízo percentual realizável a mercado. Pode-se conseguir uma melhor execução."></abbr></label></td></tr><tr data-bind="visible: assetsVisible"><td></td><td data-bind="visible: $parent.showCheckBoxes"></td><td data-bind="visible: $parent.showCheckBoxes"></td><td class="td-portfolio-asset">Ativo</td><td class="td-portfolio-asset-qty align-center">Quantidade</td><td class="td-portfolio-asset-weight align-center">Peso (%)</td><td data-bind="visible: $parent.showAcquisitionCost"></td><td data-bind="visible: $parent.showCurrentValue"></td><td data-bind="visible: $parent.showChange"></td></tr><!--ko foreach: positions--><tr data-bind="visible: $parent.assetsVisible"><td></td><td data-bind="visible: $parents[1].showCheckBoxes"></td><td data-bind="visible: $parents[1].showCheckBoxes"><input type="checkbox" data-bind="attr: { id: 'c' + ko.unwrap($parent.id) + '_' + ko.unwrap(asset).t }, checked: selected"></td><td><label data-bind="attr: { for: 'c' + ko.unwrap($parent.id) + '_' + ko.unwrap(asset).t }, text: ko.unwrap(asset).t"></label></td><td class="align-right" data-bind="brFormattedInteger: qty, style: { color: qty &lt; 0 ? '#fe7f7f' : 'inherit' }"></td><td class="align-right bg-grad-gray" data-bind="brFormattedPercentage: weight, style: { 'background-size': weightBgSizeStr } "></td><td class="align-right" data-bind="visible: $parents[1].showAcquisitionCost, brFormattedDecimal: { absoluteValue: true, appendPositiveSign: true, value: balance }, attr: { title: ko.unwrap(balance) > 0 ? 'Crédito de montagem da posição' : 'Custo de montagem da posição' }, style: { color: ko.unwrap(balance) >= 0.01 ? '#7ECC7E' : '' }"></td><td class="align-right" data-bind="visible: $parents[1].showCurrentValue, brFormattedDecimal: current_value"></td><td class="align-right" data-bind="visible: $parents[1].showChange, brFormattedPercentage: { value: value_percent_change, maxDecimalPlaces: 2, appendPositiveSign: true }, style: { color: ko.unwrap(value_percent_change) &lt;= -0.0001 ? '#fe7f7f' : ko.unwrap(value_percent_change) >= 0.0001 ? '#7ECC7E' : '' }"></td></tr><!--/ko--></tbody></table></script><script type="text/html" id="portfolios-returns-comparison-template"><div class="flex-vertical full-height pad-10"><div class="flex-horizontal flex-gap-20 full-height"><div class="flex-vertical full-height flex-gap-10"><div style="overflow: hidden; flex-basis: 130px"><div class="min-width-90 full-height" data-bind="component: { name: 'benchmarks-table', params: $data }"></div></div><div class="flex-basis-54-perc" style="overflow: hidden"><div class="min-width-90 full-height" data-bind="component: { name: 'indexes-b3-table', params: $data }"></div></div><div class="flex-basis-26-perc" style="overflow: hidden"><div class="min-width-90 full-height" data-bind="component: { name: 'currencies-table', params: $data }"></div></div></div><div class="vertical-scroll min-width-380 pad-right-2"><div class="top-buffer-10"><p><span style="display: inline-block; margin-right: 10px">Conta real</span> <select data-bind="value: realAccountFilter"><option value="">(Indefinido)</option><option value="N">Não</option><option value="S">Sim</option><option value="T">Todas</option></select></p></div><div>Exibir <input type="checkbox" id="cbxAcquisitionCost" data-bind="checked: showAcquisitionCost"><label for="cbxAcquisitionCost">Custo de aquisição</label> <input type="checkbox" id="cbxCurrentValue" data-bind="checked: showCurrentValue"><label for="cbxCurrentValue">Valor atual</label> <input type="checkbox" id="cbxChange" data-bind="checked: showChange"><label for="cbxChange">Variação</label></div><div class="top-buffer-20" data-bind="component: { name: 'portfolios-returns-table', params: filteredPortfoliosB3 }, visible: filteredPortfoliosB3.count"></div><div class="top-buffer-30" data-bind="component: { name: 'portfolios-returns-table', params: filteredPortfoliosUS }, visible: filteredPortfoliosUS.count"></div></div><div class="flex-vertical full-height flex-grow flex-shrink flex-gap-10"><div class="top-buffer-10 flex-horizontal flex-gap-20"><div><p>Performance das carteiras em <label style="margin-left: 6px"><input type="checkbox" id="PORTF_RETURNS_BRL" name="PORTF_RETURNS_BRL" data-bind="checked: portfoliosReturnsInBRL"> BRL (R$)</label> <label style="margin-left: 6px"><input type="checkbox" id="PORTF_RETURNS_USD" name="PORTF_RETURNS_USD" data-bind="checked: portfoliosReturnsInUSD"> USD (US$)</label></p></div><div><p>Performance dos índices em <label style="margin-left: 6px"><input type="checkbox" id="IDXS_RETURNS_BRL" name="IDXS_RETURNS_BRL" data-bind="checked: indexesReturnsInBRL"> BRL (R$)</label> <label style="margin-left: 6px"><input type="checkbox" id="IDXS_RETURNS_USD" name="IDXS_RETURNS_USD" data-bind="checked: indexesReturnsInUSD"> USD (US$)</label></p></div></div><div class="flex-grow flex-shrink" data-bind="component: { name: 'tradingview-lightweight-chart', params: { series: chartSeries, options: chartOptions } }"></div></div></div></div></script><script type="text/html" id="table-currencies-correlations-template"><table class="default-table-styles fix-left-col-vertical-scroll" data-bind="style: { 'min-width': controller.currenciesToCorrelate().length * ( controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 310 : 80 ) + 305 }"><thead><tr><th class="td-fake-tree-btn" data-bind="attr: { rowspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }"></th><th colspan="3" class="td-portfolio-title-head-col" data-bind="attr: { rowspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }, text: title"></th><!--ko foreach: controller.currenciesToCorrelate--><th data-bind="text: $data, attr: { colspan: ($parent.controller.selectedViewMode() === $parent.controller.viewModes.HISTORIC_CHART ? 2 : 1) }"></th><!--/ko--></tr><tr data-bind="visible: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART)"><!--ko foreach: controller.currenciesToCorrelate--><th>Histórico</th><th>Métricas</th><!--/ko--></tr></thead><tbody data-bind="foreach: portfolios"><tr><td class="td-fake-tree-btn"><div class="fake-tree-btn" data-bind="click: function() { $data.assetsVisible(!$data.assetsVisible()) }, text: assetsVisible() ? '-' : '+'"></div></td><td colspan="3" class="td-portfolio-title"><span class="cursor-pointer full-width noselect" data-bind="click: function() { $data.assetsVisible(!$data.assetsVisible()) }, text: titleComputed"></span></td><!--ko foreach: $parent.controller.currenciesToCorrelate--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].controller.correl[ko.unwrap($parent.id)][$data] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.id), asset2: $data, derivedMetric: 'avg', $parent: $parents[1].controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].controller.getDerivedMetricValue('correl', ko.unwrap($parent.id), $data, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('correl', 'avg', ko.unwrap($parent.id), $data) }"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].controller.correl[ko.unwrap($parent.id)][$data] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('correl', 'value', ko.unwrap($parent.id), $data) }"></td><!--/ko--> <!--/ko--></tr><tr data-bind="visible: assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset">Ativo</td><td class="td-portfolio-asset-qty align-center">Quantidade</td><td class="td-portfolio-asset-weight align-center">Peso (%)</td><!--ko foreach: $parent.controller.currenciesToCorrelate--><td></td><td data-bind="visible: ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART)"></td><!--/ko--></tr><!--ko foreach: positions--><tr data-bind="visible: $parent.assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset" data-bind="with: asset"><span data-bind="text: id"></span></td><td class="td-portfolio-asset-qty align-right" data-bind="brFormattedInteger: qty, style: { color: qty &lt; 0 ? '#fe7f7f' : 'inherit' }"></td><td data-bind="brFormattedPercentage: weight, class: 'align-right td-portfolio-asset-weight' + ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART ? '' : ' bg-grad-gray'), style: ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART ? {} : { 'background-size': weightBgSizeStr }) "></td><!--ko foreach: $parents[1].controller.currenciesToCorrelate--> <!--ko if: $parents[2].controller.selectedViewMode() === $parents[2].controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[2].controller.correl[ko.unwrap($parent.asset).id][$data] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.asset).id, asset2: $data, derivedMetric: 'avg', $parent: $parents[2].controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[2].controller.selectedViewMode() === $parents[2].controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[2].controller.getDerivedMetricValue('correl', ko.unwrap($parent.asset).id, $data, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[2].controller.getBgColor('correl', 'avg', ko.unwrap($parent.asset).id, $data) }"></td><!--/ko--> <!--ko if: $parents[2].controller.selectedViewMode() === $parents[2].controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[2].controller.correl[ko.unwrap($parent.asset).id][$data] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[2].controller.getBgColor('correl', 'value', ko.unwrap($parent.asset).id, $data) }"></td><!--/ko--> <!--/ko--></tr><!--/ko--><tr data-bind="visible: assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset"></td><td class="td-portfolio-asset-qty align-center"></td><td class="td-portfolio-asset-weight align-center"></td><!--ko foreach: $parent.controller.currenciesToCorrelate--><td></td><td data-bind="visible: ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART)"></td><!--/ko--></tr></tbody></table></script><script type="text/html" id="portfolios-currencies-correlations-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="flex-horizontal flex-gap-10"><div class="flex-horizontal flex-gap-10"><div><select data-bind="value: selectedViewMode"><option value="historic-chart">Histórico</option><option value="avg-value">Valor médio</option><option value="value-at-date" selected="selected">Valor na data</option></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'at-date', params: { selectedDateChanged: selectedDateChanged } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div><span class="hidden-if-wlt-1600"> da </span> <span> correlação </span></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'highlight-time-range', params: { selectedHistoricalEvent: selectedHistoricalEvent } }, visible: selectedViewMode() === viewModes.HISTORIC_CHART"></div></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'periodo-variacao-tamanho-amostra', params: { selectedPriceChangeInterval: selectedPriceChangeInterval, samples_config: samples_config, selectedSampleSize: selectedSampleSize } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div></div><div class="flex-horizontal flex-gap-10 height-100-perc-30px"><div class="min-width-90 vertical-scroll" data-bind="visible: selectedViewMode() === viewModes.HISTORIC_CHART, component: { name: 'currencies-table', params: $data }"></div><div class="flex-vertical flex-gap-10 flex-grow width-100-perc-100px"><div data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }, visible: selectedViewMode() !== viewModes.VALUE_AT_DATE"></div><div class="top-buffer-10"><span>Conta real </span> <select data-bind="value: realAccountFilter"><option value="">(Indefinido)</option><option value="N">Não</option><option value="S">Sim</option><option value="T">Todas</option></select></div><div data-bind="class: selectedViewMode() === viewModes.HISTORIC_CHART ? 'height-100-perc-160px' : 'height-100-perc-30px'"><div class="top-buffer-20" data-bind="component: { name: 'table-currencies-correlations', params: filteredPortfoliosB3 }, visible: filteredPortfoliosB3.count"></div><div class="top-buffer-30" data-bind="component: { name: 'table-currencies-correlations', params: filteredPortfoliosUS }, visible: filteredPortfoliosUS.count"></div></div></div></div></div></script><script type="text/html" id="table-indexes-correlations-template"><table class="default-table-styles fix-left-col-vertical-scroll" data-bind="style: { 'min-width': controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? controller.indexesToCorrelate().length * 310 + 305 : 1400 }"><thead><tr><th class="td-fake-tree-btn" data-bind="attr: { rowspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }"></th><th colspan="3" class="td-portfolio-title-head-col" data-bind="attr: { rowspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }, text: title"></th><!--ko foreach: controller.indexesToCorrelate--><th data-bind="text: $data, attr: { colspan: ($parent.controller.selectedViewMode() === $parent.controller.viewModes.HISTORIC_CHART ? 2 : 1) }"></th><!--/ko--></tr><tr data-bind="visible: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART)"><!--ko foreach: controller.indexesToCorrelate--><th>Histórico</th><th>Métricas</th><!--/ko--></tr></thead><tbody data-bind="foreach: portfolios"><tr><td class="td-fake-tree-btn"><div class="fake-tree-btn" data-bind="click: function() { $data.assetsVisible(!$data.assetsVisible()) }, text: assetsVisible() ? '-' : '+'"></div></td><td colspan="3" class="td-portfolio-title"><span class="cursor-pointer full-width noselect" data-bind="click: function() { $data.assetsVisible(!$data.assetsVisible()) }, text: titleComputed"></span></td><!--ko foreach: $parent.controller.indexesToCorrelate--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].controller.correl[ko.unwrap($parent.id)][$data] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.id), asset2: $data, derivedMetric: 'avg', $parent: $parents[1].controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].controller.getDerivedMetricValue('correl', ko.unwrap($parent.id), $data, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('correl', 'avg', ko.unwrap($parent.id), $data) }"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].controller.correl[ko.unwrap($parent.id)][$data] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('correl', 'value', ko.unwrap($parent.id), $data) }"></td><!--/ko--> <!--/ko--></tr><tr data-bind="visible: assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset">Ativo</td><td class="td-portfolio-asset-qty align-center">Quantidade</td><td class="td-portfolio-asset-weight align-center">Peso (%)</td><!--ko foreach: $parent.controller.indexesToCorrelate--><td></td><td data-bind="visible: ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART)"></td><!--/ko--></tr><!--ko foreach: positions--><tr data-bind="visible: $parent.assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset" data-bind="with: asset"><span data-bind="text: id"></span></td><td class="td-portfolio-asset-qty align-right" data-bind="brFormattedInteger: qty, style: { color: qty &lt; 0 ? '#fe7f7f' : 'inherit' }"></td><td data-bind="brFormattedPercentage: weight, class: 'align-right td-portfolio-asset-weight' + ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART ? '' : ' bg-grad-gray'), style: ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART ? {} : { 'background-size': weightBgSizeStr }) "></td><!--ko foreach: $parents[1].controller.indexesToCorrelate--> <!--ko if: $parents[2].controller.selectedViewMode() === $parents[2].controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[2].controller.correl[ko.unwrap($parent.asset).id][$data] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.asset).id, asset2: $data, derivedMetric: 'avg', $parent: $parents[2].controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[2].controller.selectedViewMode() === $parents[2].controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[2].controller.getDerivedMetricValue('correl', ko.unwrap($parent.asset).id, $data, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[2].controller.getBgColor('correl', 'avg', ko.unwrap($parent.asset).id, $data) }"></td><!--/ko--> <!--ko if: $parents[2].controller.selectedViewMode() === $parents[2].controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[2].controller.correl[ko.unwrap($parent.asset).id][$data] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[2].controller.getBgColor('correl', 'value', ko.unwrap($parent.asset).id, $data) }"></td><!--/ko--> <!--/ko--></tr><!--/ko--><tr data-bind="visible: assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset"></td><td class="td-portfolio-asset-qty align-center"></td><td class="td-portfolio-asset-weight align-center"></td><!--ko foreach: $parent.controller.indexesToCorrelate--><td></td><td data-bind="visible: ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART)"></td><!--/ko--></tr></tbody></table></script><script type="text/html" id="portfolios-indexes-correlations-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="flex-horizontal flex-gap-10"><div class="flex-horizontal flex-gap-10"><div><select data-bind="value: selectedViewMode"><option value="historic-chart">Histórico</option><option value="avg-value">Valor médio</option><option value="value-at-date" selected="selected">Valor na data</option></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'at-date', params: { selectedDateChanged: selectedDateChanged } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div><span class="hidden-if-wlt-1600"> da </span> <span> correlação </span></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'highlight-time-range', params: { selectedHistoricalEvent: selectedHistoricalEvent } }, visible: selectedViewMode() === viewModes.HISTORIC_CHART"></div></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'periodo-variacao-tamanho-amostra', params: { selectedPriceChangeInterval: selectedPriceChangeInterval, samples_config: samples_config, selectedSampleSize: selectedSampleSize } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div></div><div class="flex-horizontal flex-gap-10 height-100-perc-30px"><div class="min-width-90 vertical-scroll" data-bind="visible: selectedViewMode() === viewModes.HISTORIC_CHART, component: { name: 'indexes-b3-table', params: $data }"></div><div class="flex-vertical flex-gap-10 flex-grow width-100-perc-100px"><div data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }, visible: selectedViewMode() !== viewModes.VALUE_AT_DATE"></div><div class="top-buffer-10"><span>Conta real </span> <select data-bind="value: realAccountFilter"><option value="">(Indefinido)</option><option value="N">Não</option><option value="S">Sim</option><option value="T">Todas</option></select></div><div data-bind="class: selectedViewMode() === viewModes.HISTORIC_CHART ? 'height-100-perc-160px' : 'height-100-perc-30px'"><div class="top-buffer-20" data-bind="component: { name: 'table-indexes-correlations', params: filteredPortfoliosB3 }, visible: filteredPortfoliosB3.count"></div><div class="top-buffer-30" data-bind="component: { name: 'table-indexes-correlations', params: filteredPortfoliosUS }, visible: filteredPortfoliosUS.count"></div></div></div></div></div></script><script type="text/html" id="portfolios-inter-correlations-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="flex-horizontal flex-gap-10"><div class="flex-horizontal flex-gap-10"><div><select data-bind="value: selectedViewMode"><option value="historic-chart">Histórico</option><option value="avg-value">Valor médio</option><option value="value-at-date" selected="selected">Valor na data</option></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'at-date', params: { selectedDateChanged: selectedDateChanged } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div><span class="hidden-if-wlt-1600"> da </span> <span> correlação </span></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'highlight-time-range', params: { selectedHistoricalEvent: selectedHistoricalEvent } }, visible: selectedViewMode() === viewModes.HISTORIC_CHART"></div></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'periodo-variacao-tamanho-amostra', params: { selectedPriceChangeInterval: selectedPriceChangeInterval, samples_config: samples_config, selectedSampleSize: selectedSampleSize } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div></div><div class="flex-horizontal flex-gap-10 height-100-perc-30px"><div class="flex-vertical flex-gap-10 flex-grow width-100-perc-100px"><div data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }, visible: selectedViewMode() !== viewModes.VALUE_AT_DATE"></div><div data-bind="class: (selectedViewMode() === viewModes.HISTORIC_CHART ? 'height-100-perc-160px' : 'height-100-perc-30px')"><table class="default-table-styles fix-left-col-vertical-scroll"><thead><tr><th class="td-portfolio-title-head-col-left-0" data-bind="attr: { rowspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Carteiras <span style="display: inline-block; margin-left: 40px">Conta real </span> <select data-bind="value: realAccountFilter"><option value="">(Indefinido)</option><option value="N">Não</option><option value="S">Sim</option><option value="T">Todas</option></select></th><!--ko foreach: filteredPortfoliosB3WithWeightsAndConsolidatedPortfolio--><th data-bind="text: titleComputed, attr: { colspan: ($parent.selectedViewMode() === $parent.viewModes.HISTORIC_CHART ? 2 : 1) }"></th><!--/ko--> <!--ko foreach: filteredPortfoliosUSWithWeightsAndConsolidatedPortfolio--><th data-bind="text: titleComputed, attr: { colspan: ($parent.selectedViewMode() === $parent.viewModes.HISTORIC_CHART ? 2 : 1) }"></th><!--/ko--></tr><tr data-bind="visible: (selectedViewMode() === viewModes.HISTORIC_CHART)"><!--ko foreach: filteredPortfoliosB3WithWeightsAndConsolidatedPortfolio--><th>Histórico</th><th>Métricas</th><!--/ko--> <!--ko foreach: filteredPortfoliosUSWithWeightsAndConsolidatedPortfolio--><th>Histórico</th><th>Métricas</th><!--/ko--></tr></thead><tbody data-bind="foreach: filteredPortfoliosB3WithWeightsAndConsolidatedPortfolio"><tr><td class="td-portfolio-title-left-0" data-bind="text: titleComputed"></td><!--ko foreach: $parent.filteredPortfoliosB3WithWeightsAndConsolidatedPortfolio--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.id), asset2: ko.unwrap($data.id), derivedMetric: 'avg', $parent: $parents[1] } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].getDerivedMetricValue('correl', ko.unwrap($parent.id), ko.unwrap($data.id), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'avg', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'value', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--/ko--> <!--ko foreach: $parent.filteredPortfoliosUSWithWeightsAndConsolidatedPortfolio--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.id), asset2: ko.unwrap($data.id), derivedMetric: 'avg', $parent: $parents[1] } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].getDerivedMetricValue('correl', ko.unwrap($parent.id), ko.unwrap($data.id), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'avg', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'value', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--/ko--></tr></tbody><tbody data-bind="foreach: filteredPortfoliosUSWithWeightsAndConsolidatedPortfolio"><tr><td class="td-portfolio-title-left-0" data-bind="text: titleComputed"></td><!--ko foreach: $parent.filteredPortfoliosB3WithWeightsAndConsolidatedPortfolio--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.id), asset2: ko.unwrap($data.id), derivedMetric: 'avg', $parent: $parents[1] } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].getDerivedMetricValue('correl', ko.unwrap($parent.id), ko.unwrap($data.id), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'avg', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'value', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--/ko--> <!--ko foreach: $parent.filteredPortfoliosUSWithWeightsAndConsolidatedPortfolio--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.id), asset2: ko.unwrap($data.id), derivedMetric: 'avg', $parent: $parents[1] } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].getDerivedMetricValue('correl', ko.unwrap($parent.id), ko.unwrap($data.id), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'avg', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].correl[ko.unwrap($parent.id)][ko.unwrap($data.id)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor('correl', 'value', ko.unwrap($parent.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--/ko--></tr></tbody></table></div></div></div></div></script><script type="text/html" id="derived-metrics-template"><p>Média <br> <span data-bind="brFormattedDecimal: { value: $parent.getDerivedMetricValue(metric, asset1, asset2, 'avg'), maxDecimalPlaces: (metric === 'covar' ? 6 : 2) } "></span></p><p>Desvio <br> padrão<br><span data-bind="brFormattedDecimal: { value: $parent.getDerivedMetricValue(metric, asset1, asset2, 'stdev'), maxDecimalPlaces: (metric === 'covar' ? 6 : 4) }"></span></p><p>Variância<br><span data-bind="brFormattedDecimal: { value: $parent.getDerivedMetricValue(metric, asset1, asset2, 'variance'), maxDecimalPlaces: 6 }"></span></p></script><script type="text/html" id="assets-and-index-beta-correlation-history-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="flex-horizontal flex-gap-10"><div><select data-bind="value: selectedViewMode"><option value="historic-chart">Histórico</option><option value="avg-value">Valor médio</option><option value="value-at-date" selected="selected">Valor na data</option></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'at-date', params: { selectedDateChanged: selectedDateChanged } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div>do beta e correlação de <select data-bind="value: selectedAssetKind"><option value="">ações da lista</option><option value="IBOV">ações do IBOV</option><option value="BDRS">BDRs mais líquidos</option><option value="ETFS">ETFs</option><option value="FIAGROS">FIAGROs</option><option value="FIIS">FIIs mais líquidos</option><option value="FIPS">FIPs</option></select></div><div class="flex-grow flex-shrink" data-bind="visible: selectedAssetKind() == ''"><input type="text" class="full-width uppercase" data-bind="textInput: userTypedAssetsIdsList"></div><div>com o índice <select data-bind="value: referenceIndex, options: indexesB3ExceptNew"></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'highlight-time-range', params: { selectedHistoricalEvent: selectedHistoricalEvent } }, visible: selectedViewMode() === viewModes.HISTORIC_CHART"></div></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'periodo-variacao-tamanho-amostra', params: { selectedPriceChangeInterval: selectedPriceChangeInterval, samples_config: samples_config, selectedSampleSize: selectedSampleSize } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }, visible: selectedViewMode() !== viewModes.VALUE_AT_DATE"></div><div data-bind="class: (selectedViewMode() === viewModes.HISTORIC_CHART ? 'height-100-perc-160px' : 'height-100-perc-60px')"><table data-bind="class: 'default-table-styles fix-left-col-vertical-scroll' + (selectedViewMode() === viewModes.HISTORIC_CHART ? ' min-width-690' : ' min-width-240')"><thead><tr><th data-bind="attr: { rowspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Ativo</th><th data-bind="attr: { colspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Beta</th><th data-bind="attr: { colspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Correlação</th></tr><tr data-bind="visible: (selectedViewMode() === viewModes.HISTORIC_CHART)"><th>Histórico</th><th>Métricas</th><th>Histórico</th><th>Métricas</th></tr></thead><tbody data-bind="foreach: assetsIdsList"><tr><td><span class="full-width" data-bind="text: $data"></span></td><!--ko if: $parent.selectedViewMode() === $parent.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parent.getChartParams('beta', $data, ko.unwrap($parent.referenceIndex)) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'beta', asset1: $data, asset2: ko.unwrap($parent.referenceIndex), derivedMetric: 'avg', $parent: $parent } }" class="align-center"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parent.getDerivedMetricValue('beta', $data, ko.unwrap($parent.referenceIndex), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('beta', 'avg', $data, ko.unwrap($parent.referenceIndex)) }"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parent.beta[$data][ko.unwrap($parent.referenceIndex)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('beta', 'value', $data, ko.unwrap($parent.referenceIndex)) }"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parent.getChartParams('correl', $data, ko.unwrap($parent.referenceIndex)) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: $data, asset2: ko.unwrap($parent.referenceIndex), derivedMetric: 'avg', $parent: $parent } }" class="align-center"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parent.getDerivedMetricValue('correl', $data, ko.unwrap($parent.referenceIndex), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('correl', 'avg', $data, ko.unwrap($parent.referenceIndex)) }"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parent.correl[$data][ko.unwrap($parent.referenceIndex)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('correl', 'value', $data, ko.unwrap($parent.referenceIndex)) }"></td><!--/ko--></tr></tbody></table></div></div></script><script type="text/html" id="asset-and-all-indexes-beta-correlation-history-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="flex-horizontal flex-gap-10"><div><select data-bind="value: selectedViewMode"><option value="historic-chart">Histórico</option><option value="avg-value">Valor médio</option><option value="value-at-date" selected="selected">Valor na data</option></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'at-date', params: { selectedDateChanged: selectedDateChanged } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div>do beta e correlação de <input class="align-center max-width-60 uppercase" onclick="this.select()" type="text" data-bind="style: { color: dynamicUnderlying.isInvalid() ? 'yellow' : 'inherit' }, textInput: dynamicUnderlying.ticker"> com todos os índices</div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'highlight-time-range', params: { selectedHistoricalEvent: selectedHistoricalEvent } }, visible: selectedViewMode() === viewModes.HISTORIC_CHART"></div></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'periodo-variacao-tamanho-amostra', params: { selectedPriceChangeInterval: selectedPriceChangeInterval, samples_config: samples_config, selectedSampleSize: selectedSampleSize } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }, visible: selectedViewMode() !== viewModes.VALUE_AT_DATE"></div><div data-bind="class: (selectedViewMode() === viewModes.HISTORIC_CHART ? 'height-100-perc-160px' : 'height-100-perc-60px'), visible: dynamicUnderlying.asset"><table data-bind="class: 'default-table-styles fix-left-col-vertical-scroll' + (selectedViewMode() === viewModes.HISTORIC_CHART ? ' min-width-690' : ' min-width-240')"><thead><tr><th data-bind="attr: { rowspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Índice</th><th data-bind="attr: { colspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Beta</th><th data-bind="attr: { colspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Correlação</th></tr><tr data-bind="visible: (selectedViewMode() === viewModes.HISTORIC_CHART)"><th>Histórico</th><th>Métricas</th><th>Histórico</th><th>Métricas</th></tr></thead><tbody data-bind="foreach: indexes"><tr><td><span class="full-width" data-bind="text: $data"></span></td><!--ko if: $parent.selectedViewMode() === $parent.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parent.getChartParams('beta', ko.unwrap($parent.assetId), $data) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'beta', asset1: ko.unwrap($parent.assetId), asset2: $data, derivedMetric: 'avg', $parent: $parent } }" class="align-center"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parent.getDerivedMetricValue('beta', ko.unwrap($parent.assetId), $data, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('beta', 'avg', ko.unwrap($parent.assetId), $data) }"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parent.beta[ko.unwrap($parent.assetId)][$data] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('beta', 'value', ko.unwrap($parent.assetId), $data) }"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parent.getChartParams('correl', ko.unwrap($parent.assetId), $data) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.assetId), asset2: $data, derivedMetric: 'avg', $parent: $parent } }" class="align-center"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parent.getDerivedMetricValue('correl', ko.unwrap($parent.assetId), $data, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('correl', 'avg', ko.unwrap($parent.assetId), $data) }"></td><!--/ko--> <!--ko if: $parent.selectedViewMode() === $parent.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parent.correl[ko.unwrap($parent.assetId)][$data] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.getBgColor('correl', 'value', ko.unwrap($parent.assetId), $data) }"></td><!--/ko--></tr></tbody></table></div></div></script><script type="text/html" id="correlation-covariance-matrix-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="flex-horizontal flex-gap-10"><div><select data-bind="value: selectedViewMode"><option value="historic-chart">Histórico</option><option value="avg-value">Valor médio</option><option value="value-at-date" selected="selected">Valor na data</option></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'at-date', params: { selectedDateChanged: selectedDateChanged } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div>da</div><div><select data-bind="value: selectedMetric"><option value="correl">correlação</option><option value="covar">covariância</option></select></div><div class="nowrap">dos ativos</div><div><select data-bind="value: selectedAssetsSource"><option value="selected-portfolio">da carteira</option><option value="list">da lista</option></select></div><div data-bind="visible: selectedAssetsSource() === assetsSources.SELECTED_PORTFOLIO"><select data-bind="value: selectedPortfolio, options: portfoliosWithWeights, optionsText: 'titleComputed', optionsCaption: '(todas)'"></select></div><div class="flex-grow flex-shrink" data-bind="visible: selectedAssetsSource() === assetsSources.LIST"><input type="text" class="full-width uppercase" data-bind="textInput: userTypedAssetsIdsList"></div></div><div class="flex-horizontal flex-gap-10"><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'highlight-time-range', params: { selectedHistoricalEvent: selectedHistoricalEvent } }, visible: selectedViewMode() === viewModes.HISTORIC_CHART"></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'periodo-variacao-tamanho-amostra', params: { selectedPriceChangeInterval: selectedPriceChangeInterval, samples_config: samples_config, selectedSampleSize: selectedSampleSize } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div></div><div data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }, visible: selectedViewMode() !== viewModes.VALUE_AT_DATE"></div><div data-bind="class: (selectedViewMode() === viewModes.HISTORIC_CHART ? 'height-100-perc-160px' : 'height-100-perc-60px')"><table class="default-table-styles fix-left-col-vertical-scroll"><thead><tr><th class="width-70" data-bind="attr: { rowspan: (selectedViewMode() === viewModes.HISTORIC_CHART ? 2 : 1) }">Ativos</th><!--ko foreach: assetsIdsList--><th data-bind="text: $data, attr: { colspan: ($parent.selectedViewMode() === $parent.viewModes.HISTORIC_CHART ? 2 : 1) }"></th><!--/ko--></tr><tr data-bind="visible: (selectedViewMode() === viewModes.HISTORIC_CHART)"><!--ko foreach: assetsIdsList--><th>Histórico</th><th>Métricas</th><!--/ko--></tr></thead><tbody data-bind="foreach: assetsIdsList"><tr><th class="align-center left-0 width-70" data-bind="text: $data, style: $parent.cellStyle"></th><!--ko foreach: $parent.assetsIdsList--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1][$parents[1].selectedMetric()][$parent][$data] }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: $parents[1].selectedMetric(), asset1: $parent, asset2: $data, derivedMetric: 'avg', $parent: $parents[1] } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: { maxDecimalPlaces: ( $parents[1].selectedMetric() === 'covar' ? 6 : 2), value: $parents[1].getDerivedMetricValue($parents[1].selectedMetric(), $parent, $data, 'avg') }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor($parents[1].selectedMetric(), 'avg', $parent, $data) }"></td><!--/ko--> <!--ko if: $parents[1].selectedViewMode() === $parents[1].viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1][$parents[1].selectedMetric()][$parent][$data] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].getBgColor($parents[1].selectedMetric(), 'value', $parent, $data) }"></td><!--/ko--> <!--/ko--></tr></tbody></table></div></div></script><script type="text/html" id="beta-and-correlation-history-ui-root-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"><strong>HISTÓRICO DE BETA E CORRELAÇÃO</strong></a> <a class="clickable" data-bind="text: 'Ativos com índice específico', click: setViewComponent.bind($data, 'assets-and-index-beta-correlation-history'), style: { 'background-color': component() === 'assets-and-index-beta-correlation-history' || component().name === 'assets-and-index-beta-correlation-history' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Ativo específico com todos os índices', click: setViewComponent.bind($data, 'asset-and-all-indexes-beta-correlation-history'), style: { 'background-color': component() === 'asset-and-all-indexes-beta-correlation-history' || component().name === 'asset-and-all-indexes-beta-correlation-history' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Correlação e covariância entre ativos', click: setViewComponent.bind($data, 'correlation-covariance-matrix'), style: { 'background-color': component() === 'correlation-covariance-matrix' || component().name === 'correlation-covariance-matrix' ? '#1d1d1d' : '' }"></a></div><div class="height-100-perc-30px pad-10" data-bind="component: component "></div></div></script><script type="text/html" id="table-beta-correlation-history-template"><table data-bind="class: 'default-table-styles fix-left-col-vertical-scroll' + (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? ' min-width-1020' : ' min-width-520')"><thead><tr><th data-bind="attr: { rowspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }" class="td-fake-tree-btn"></th><th data-bind="attr: { rowspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }, text: title" colspan="3" class="td-portfolio-title-head-col"></th><th data-bind="attr: { rowspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }">Índice</th><th data-bind="attr: { colspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }">Beta</th><th data-bind="attr: { colspan: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART ? 2 : 1) }">Correlação</th></tr><tr data-bind="visible: (controller.selectedViewMode() === controller.viewModes.HISTORIC_CHART)"><th>Histórico</th><th>Métricas</th><th>Histórico</th><th>Métricas</th></tr></thead><tbody data-bind="foreach: portfolios"><tr><td class="td-fake-tree-btn"><div class="fake-tree-btn" data-bind="click: function() { $data.assetsVisible(!$data.assetsVisible()) }, text: assetsVisible() ? '-' : '+'"></div></td><td colspan="3" class="td-portfolio-title"><span class="cursor-pointer full-width noselect" data-bind="click: function() { $data.assetsVisible(!$data.assetsVisible()) }, text: titleComputed"></span></td><td class="align-center"><select data-bind="value: referenceIndex, options: $parent.controller.indexesB3ExceptNew"></select></td><!--ko if: $parent.controller.selectedViewMode() === $parent.controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parent.controller.getChartParams('beta', ko.unwrap($data.id), ko.unwrap($data.id)) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'beta', asset1: ko.unwrap($data.id), asset2: ko.unwrap($data.id), derivedMetric: 'avg', $parent: $parent.controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parent.controller.selectedViewMode() === $parent.controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parent.controller.getDerivedMetricValue('beta', ko.unwrap($data.id), ko.unwrap($data.id), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.controller.getBgColor('beta', 'avg', ko.unwrap($data.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--ko if: $parent.controller.selectedViewMode() === $parent.controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parent.controller.beta[ko.unwrap($data.id)][ko.unwrap($data.id)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.controller.getBgColor('beta', 'value', ko.unwrap($data.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--ko if: $parent.controller.selectedViewMode() === $parent.controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parent.controller.getChartParams('correl', ko.unwrap($data.id), ko.unwrap($data.id)) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($data.id), asset2: ko.unwrap($data.id), derivedMetric: 'avg', $parent: $parent.controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parent.controller.selectedViewMode() === $parent.controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parent.controller.getDerivedMetricValue('correl', ko.unwrap($data.id), ko.unwrap($data.id), 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.controller.getBgColor('correl', 'avg', ko.unwrap($data.id), ko.unwrap($data.id)) }"></td><!--/ko--> <!--ko if: $parent.controller.selectedViewMode() === $parent.controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parent.controller.correl[ko.unwrap($data.id)][ko.unwrap($data.id)] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parent.controller.getBgColor('correl', 'value', ko.unwrap($data.id), ko.unwrap($data.id)) }"></td><!--/ko--></tr><tr data-bind="visible: assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset">Ativo</td><td class="td-portfolio-asset-qty align-center">Quantidade</td><td class="td-portfolio-asset-weight align-center">Peso (%)</td><td></td><td data-bind="attr: { colspan: ($parent.controller.selectedViewMode() === $parent.controller.viewModes.HISTORIC_CHART ? 2 : 1) }"></td><td data-bind="attr: { colspan: ($parent.controller.selectedViewMode() === $parent.controller.viewModes.HISTORIC_CHART ? 2 : 1) }"></td></tr><!--ko foreach: positions--><tr data-bind="visible: $parent.assetsVisible"><td class="td-fake-tree-btn"></td><td class="td-portfolio-asset" data-bind="with: asset"><span data-bind="text: id"></span></td><td class="td-portfolio-asset-qty align-right" data-bind="style: { color: qty &lt; 0 ? '#fe7f7f' : 'inherit' }"><span data-bind="brFormattedInteger: qty"></span></td><td data-bind="brFormattedPercentage: weight, class: 'align-right td-portfolio-asset-weight' + ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART ? '' : ' bg-grad-gray'), style: ($parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART ? {} : { 'background-size': weightBgSizeStr }) "></td><td class="align-center" data-bind="text: $parent.referenceIndex"></td><!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].controller.getChartParams('beta', ko.unwrap($parent.id), ko.unwrap(asset).id) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'beta', asset1: ko.unwrap($parent.id), asset2: ko.unwrap(asset).id, derivedMetric: 'avg', $parent: $parents[1].controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].controller.getDerivedMetricValue('beta', ko.unwrap($parent.id), ko.unwrap(asset).id, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('beta', 'avg', ko.unwrap($parent.id), ko.unwrap(asset).id) }"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].controller.beta[ko.unwrap($parent.id)][ko.unwrap(asset).id] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('beta', 'value', ko.unwrap($parent.id), ko.unwrap(asset).id) }"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.HISTORIC_CHART--><td data-bind="component: { name: 'metric-history-chart', params: $parents[1].controller.getChartParams('correl', ko.unwrap($parent.id), ko.unwrap(asset).id) }" style="width: 290px; height: 200px; background-color: inherit"></td><td data-bind="template:  { name: 'derived-metrics-template', data: { metric: 'correl', asset1: ko.unwrap($parent.id), asset2: ko.unwrap(asset).id, derivedMetric: 'avg', $parent: $parents[1].controller } }" class="align-center"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.AVG_VALUE--><td data-bind="brFormattedDecimal: $parents[1].controller.getDerivedMetricValue('correl', ko.unwrap($parent.id), ko.unwrap(asset).id, 'avg'), style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('correl', 'avg', ko.unwrap($parent.id), ko.unwrap(asset).id) }"></td><!--/ko--> <!--ko if: $parents[1].controller.selectedViewMode() === $parents[1].controller.viewModes.VALUE_AT_DATE--><td data-bind="component: { name: 'metric-value', params: $parents[1].controller.correl[ko.unwrap($parent.id)][ko.unwrap(asset).id] }, style: { textAlign: 'center', width: 'auto', height: 'auto', backgroundColor: $parents[1].controller.getBgColor('correl', 'value', ko.unwrap($parent.id), ko.unwrap(asset).id) }"></td><!--/ko--></tr><!--/ko--></tbody></table></script><script type="text/html" id="portfolios-beta-correlation-history-template"><div class="flex-vertical full-height flex-gap-10 pad-10"><div class="flex-horizontal flex-gap-10"><div><select data-bind="value: selectedViewMode"><option value="historic-chart">Histórico</option><option value="avg-value">Valor médio</option><option value="value-at-date" selected="selected">Valor na data</option></select></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'at-date', params: { selectedDateChanged: selectedDateChanged } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div>do beta e correlação</div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'highlight-time-range', params: { selectedHistoricalEvent: selectedHistoricalEvent } }, visible: selectedViewMode() === viewModes.HISTORIC_CHART"></div></div><div class="flex-horizontal flex-gap-10" data-bind="component: { name: 'periodo-variacao-tamanho-amostra', params: { selectedPriceChangeInterval: selectedPriceChangeInterval, samples_config: samples_config, selectedSampleSize: selectedSampleSize } }, visible: selectedViewMode() === viewModes.VALUE_AT_DATE"></div><div data-bind="component: { name: 'periodo-variacao-tamanhos-amostras-table', params: { all_price_change_intervals_and_samples_config: all_price_change_intervals_and_samples_config } }, visible: selectedViewMode() !== viewModes.VALUE_AT_DATE"></div><div class="top-buffer-10"><span>Conta real </span> <select data-bind="value: realAccountFilter"><option value="">(Indefinido)</option><option value="N">Não</option><option value="S">Sim</option><option value="T">Todas</option></select></div><div data-bind="class: (selectedViewMode() === viewModes.HISTORIC_CHART ? 'height-100-perc-160px' : 'height-100-perc-60px')"><div class="top-buffer-20" data-bind="component: { name: 'table-beta-correlation-history', params: filteredPortfoliosB3 }, visible: filteredPortfoliosB3.count"></div><div class="top-buffer-30" data-bind="component: { name: 'table-beta-correlation-history', params: filteredPortfoliosUS }, visible: filteredPortfoliosUS.count"></div></div></div></script><script type="text/html" id="portfolios-ui-root-template"><div class="strategies-ui-root-container flex-vertical full-height"><div class="strategies-ui-root-top-bar flex-horizontal flex-space-evenly"><a class="not-clickable align-center"><strong>ATIVOS / CARTEIRAS</strong></a> <a class="clickable" data-bind="text: 'Patrimônio', click: setViewComponent.bind($data, 'portfolios-list-and-operations-history'), style: { 'background-color': component() === 'portfolios-list-and-operations-history' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Performance', click: setViewComponent.bind($data, 'portfolios-returns-comparison'), style: { 'background-color': component() === 'portfolios-returns-comparison' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Correlação com índices', click: setViewComponent.bind($data, 'portfolios-indexes-correlations'), style: { 'background-color': component() === 'portfolios-indexes-correlations' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Correlação com moedas', click: setViewComponent.bind($data, 'portfolios-currencies-correlations'), style: { 'background-color': component() === 'portfolios-currencies-correlations' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Correlação entre carteiras', click: setViewComponent.bind($data, 'portfolios-inter-correlations'), style: { 'background-color': component() === 'portfolios-inter-correlations' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Histórico de beta e correlação', click: setViewComponent.bind($data, 'portfolios-beta-correlation-history'), style: { 'background-color': component() === 'portfolios-beta-correlation-history' ? '#1d1d1d' : '' }"></a> <a class="clickable" data-bind="text: 'Matriz de correlação e covariância', click: setViewComponent.bind($data, { name: 'correlation-covariance-matrix', params: { initiallySelectedViewMode: viewModes.AVG_VALUE } }), style: { 'background-color': component() === 'correlation-covariance-matrix' || component().name === 'correlation-covariance-matrix' ? '#1d1d1d' : '' }"></a></div><div class="height-100-perc-30px" data-bind="component: component"></div></div></script></main></div><script src="/js/ui-bundle-after.js?v=PeIxymmRJRw4oMUcQokJn9_7FyQ"></script><script src="/js/preview-bundle-after.js?v=BgW7YpsCpn_M0NgCt70unmDPfJg"></script><script src="/js/user-loader.js?v=20251209"></script></body></html>